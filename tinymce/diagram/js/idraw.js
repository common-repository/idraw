var JSON;if(!JSON){JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());(function(){var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var d=new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1);function b(l){var g,j,e;var k,h,f;e=l.length;j=0;g="";while(j<e){k=l.charCodeAt(j++)&255;if(j===e){g+=a.charAt(k>>2);g+=a.charAt((k&3)<<4);g+="==";break}h=l.charCodeAt(j++);if(j===e){g+=a.charAt(k>>2);g+=a.charAt(((k&3)<<4)|((h&240)>>4));g+=a.charAt((h&15)<<2);g+="=";break}f=l.charCodeAt(j++);g+=a.charAt(k>>2);g+=a.charAt(((k&3)<<4)|((h&240)>>4));g+=a.charAt(((h&15)<<2)|((f&192)>>6));g+=a.charAt(f&63)}return g}function c(m){var l,k,h,f;var j,e,g;e=m.length;j=0;g="";while(j<e){do{l=d[m.charCodeAt(j++)&255]}while(j<e&&l===-1);if(l===-1){break}do{k=d[m.charCodeAt(j++)&255]}while(j<e&&k===-1);if(k===-1){break}g+=String.fromCharCode((l<<2)|((k&48)>>4));do{h=m.charCodeAt(j++)&255;if(h===61){return g}h=d[h]}while(j<e&&h===-1);if(h===-1){break}g+=String.fromCharCode(((k&15)<<4)|((h&60)>>2));do{f=m.charCodeAt(j++)&255;if(f===61){return g}f=d[f]}while(j<e&&f===-1);if(f===-1){break}g+=String.fromCharCode(((h&3)<<6)|f)}return g}if(!window.btoa){window.btoa=b}if(!window.atob){window.atob=c}})();function Hammer(o,v,l){var h=this;var B={prevent_default:false,css_hacks:true,swipe:true,swipe_time:200,swipe_min_distance:20,drag:true,drag_vertical:true,drag_horizontal:true,drag_min_distance:20,transform:true,scale_treshold:0.1,rotation_treshold:15,tap:true,tap_double:true,tap_max_interval:300,tap_max_distance:10,tap_double_distance:20,hold:true,hold_timeout:500};v=E(B,v);(function(){if(!v.css_hacks){return false}var T=["webkit","moz","ms","o",""];var Q={userSelect:"none",touchCallout:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"};var S="";for(var P=0;P<T.length;P++){for(var R in Q){S=R;if(T[P]){S=T[P]+S.substring(0,1).toUpperCase()+S.substring(1)}o.style[S]=Q[R]}}})();var K=0;var u=0;var L=0;var z={};var M=0;var k=false;var f=null;var e=null;var t=null;var D={x:0,y:0};var c=null;var C=null;var N={};var b=false;var j;var d;var A;var I=("ontouchstart" in window);this.option=function(P,Q){if(Q!=l){v[P]=Q}return v[P]};this.getDirectionFromAngle=function(R){var S={down:R>=45&&R<135,left:R>=135||R<=-135,up:R<-45&&R>-135,right:R>=-45&&R<=45};var Q,P;for(P in S){if(S[P]){Q=P;break}}return Q};this.destroy=function(){if(I){a(o,"touchstart touchmove touchend touchcancel",x)}else{a(o,"mouseup mousedown mousemove",x);a(o,"mouseout",s)}};function w(P){return P.touches?P.touches.length:1}function O(S){S=S||window.event;if(!I){var T=document,Q=T.body;return[{x:S.pageX||S.clientX+(T&&T.x271||Q&&Q.x271||0)-(T&&T.clientLeft||Q&&T.clientLeft||0),y:S.pageY||S.clientY+(T&&T.x272||Q&&Q.x272||0)-(T&&T.clientTop||Q&&T.clientTop||0)}]}else{var V=[],U;for(var R=0,P=S.touches.length;R<P;R++){U=S.touches[R];V.push({x:U.pageX,y:U.pageY})}return V}}function p(Q,P){return Math.atan2(P.y-Q.y,P.x-Q.x)*180/Math.PI}function q(Q,R){if(Q.length==2&&R.length==2){var P,U;P=Q[0].x-Q[1].x;U=Q[0].y-Q[1].y;var S=Math.sqrt((P*P)+(U*U));P=R[0].x-R[1].x;U=R[0].y-R[1].y;var T=Math.sqrt((P*P)+(U*U));return T/S}return 0}function m(R,S){if(R.length==2&&S.length==2){var Q,U;Q=R[0].x-R[1].x;U=R[0].y-R[1].y;var T=Math.atan2(U,Q)*180/Math.PI;Q=S[0].x-S[1].x;U=S[0].y-S[1].y;var P=Math.atan2(U,Q)*180/Math.PI;return P-T}return 0}function J(P,Q){Q.touches=O(Q.originalEvent);Q.type=P;if(r(h["on"+P])){h["on"+P].call(h,Q)}}function F(P){P=P||window.event;if(P.preventDefault){P.preventDefault();P.stopPropagation()}else{P.returnValue=false;P.cancelBubble=true}}function G(){z={};k=false;M=0;K=0;u=0;f=null}var y={hold:function(P){if(v.hold){f="hold";clearTimeout(C);C=setTimeout(function(){if(f=="hold"){J("hold",{originalEvent:P,position:z.start})}},v.hold_timeout)}},swipe:function(V){if(!z.move){return}var T=z.move[0].x-z.start[0].x;var S=z.move[0].y-z.start[0].y;K=Math.sqrt(T*T+S*S);var R=new Date().getTime();var U=R-t;if(v.swipe&&(v.swipe_time>U)&&(K>v.swipe_min_distance)){u=p(z.start[0],z.move[0]);L=h.getDirectionFromAngle(u);f="swipe";var Q={x:z.move[0].x-N.left,y:z.move[0].y-N.top};var P={originalEvent:V,position:Q,direction:L,distance:K,distanceX:T,distanceY:S,angle:u};J("swipe",P)}},drag:function(U){var S=z.move[0].x-z.start[0].x;var R=z.move[0].y-z.start[0].y;K=Math.sqrt(S*S+R*R);if(v.drag&&(K>v.drag_min_distance)||f=="drag"){u=p(z.start[0],z.move[0]);L=h.getDirectionFromAngle(u);var T=(L=="up"||L=="down");if(((T&&!v.drag_vertical)||(!T&&!v.drag_horizontal))&&(K>v.drag_min_distance)){return}f="drag";var Q={x:z.move[0].x-N.left,y:z.move[0].y-N.top};var P={originalEvent:U,position:Q,direction:L,distance:K,distanceX:S,distanceY:R,angle:u};if(k){J("dragstart",P);k=false}J("drag",P);F(U)}},transform:function(R){if(v.transform){if(w(R)!=2){return false}var Q=m(z.start,z.move);var S=q(z.start,z.move);if(f!="drag"&&(f=="transform"||Math.abs(1-S)>v.scale_treshold||Math.abs(Q)>v.rotation_treshold)){f="transform";z.center={x:((z.move[0].x+z.move[1].x)/2)-N.left,y:((z.move[0].y+z.move[1].y)/2)-N.top};var P={originalEvent:R,position:z.center,scale:S,rotation:Q};if(k){J("transformstart",P);k=false}J("transform",P);F(R);return true}}return false},tap:function(T){var Q=new Date().getTime();var S=Q-t;if(v.hold&&!(v.hold&&v.hold_timeout>S)){return}var R=(function(){if(D&&v.tap_double&&e=="tap"&&(t-c)<v.tap_max_interval){var W=Math.abs(D[0].x-z.start[0].x);var V=Math.abs(D[0].y-z.start[0].y);return(D&&z.start&&Math.max(W,V)<v.tap_double_distance)}return false})();if(R){f="double_tap";c=null;J("doubletap",{originalEvent:T,position:z.start});F(T)}else{var U=(z.move)?Math.abs(z.move[0].x-z.start[0].x):0;var P=(z.move)?Math.abs(z.move[0].y-z.start[0].y):0;K=Math.max(U,P);if(K<v.tap_max_distance){f="tap";c=Q;D=z.start;if(v.tap){J("tap",{originalEvent:T,position:z.start});F(T)}}}}};function x(Q){switch(Q.type){case"mousedown":case"touchstart":z.start=O(Q);t=new Date().getTime();M=w(Q);k=true;j=Q;var P=o.getBoundingClientRect();var U=o.clientTop||document.body.clientTop||0;var T=o.clientLeft||document.body.clientLeft||0;var R=window.pageYOffset||o.x272||document.body.x272;var S=window.pageXOffset||o.x271||document.body.x271;N={top:P.top+R-U,left:P.left+S-T};b=true;y.hold(Q);if(v.prevent_default){F(Q)}break;case"mousemove":case"touchmove":if(!b){return false}d=Q;z.move=O(Q);if(!y.transform(Q)){y.drag(Q)}break;case"mouseup":case"mouseout":case"touchcancel":case"touchend":if(!b||(f!="transform"&&Q.touches&&Q.touches.length>0)){return false}b=false;A=Q;y.swipe(Q);if(f=="drag"){J("dragend",{originalEvent:Q,direction:L,distance:K,angle:u})}else{if(f=="transform"){J("transformend",{originalEvent:Q,position:z.center,scale:q(z.start,z.move),rotation:m(z.start,z.move)})}else{y.tap(j)}}e=f;J("release",{originalEvent:Q,gesture:f});G();break}}function s(P){if(!H(o,P.relatedTarget)){x(P)}}if(I){g(o,"touchstart touchmove touchend touchcancel",x)}else{g(o,"mouseup mousedown mousemove",x);g(o,"mouseout",s)}function H(P,R){if(!R&&window.event&&window.event.toElement){R=window.event.toElement}if(P===R){return true}if(R){var Q=R.parentNode;while(Q!==null){if(Q===P){return true}Q=Q.parentNode}}return false}function E(R,Q){var P={};if(!Q){return R}for(var S in R){if(S in Q){P[S]=Q[S]}else{P[S]=R[S]}}return P}function r(P){return Object.prototype.toString.call(P)=="[object Function]"}function g(S,R,T){R=R.split(" ");for(var Q=0,P=R.length;Q<P;Q++){if(S.addEventListener){S.addEventListener(R[Q],T,false)}else{if(document.attachEvent){S.attachEvent("on"+R[Q],T)}}}}function a(S,R,T){R=R.split(" ");for(var Q=0,P=R.length;Q<P;Q++){if(S.removeEventListener){S.removeEventListener(R[Q],T,false)}else{if(document.detachEvent){S.detachEvent("on"+R[Q],T)}}}}}var browser={versions:function(){var a=navigator.userAgent,b=navigator.appVersion;return{trident:a.indexOf("Trident")>-1,ie:a.indexOf("MSIE")>-1,ie10:a.indexOf("MSIE 10.0")>-1,oldIE:a.indexOf("MSIE 8.0")>-1||a.indexOf("MSIE 7.0")>-1||a.indexOf("MSIE 6.0")>-1,presto:a.indexOf("Presto")>-1,webKit:a.indexOf("AppleWebKit")>-1,gecko:a.indexOf("Gecko")>-1&&a.indexOf("KHTML")===-1,mobile:!!a.match(/AppleWebKit.*Mobile.*/)||!a.match(/AppleWebKit/),ios:!!a.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:a.indexOf("Android")>-1&&a.indexOf("Linux")>-1,iPhone:a.indexOf("iPhone")>-1||a.indexOf("Mac")>-1,iPad:a.indexOf("iPad")>-1,webApp:a.indexOf("Safari")===-1}}()};var gLogMsg="";function wtkLog(a){if(!browser||!browser.versions.ie){console.log(a)}else{if("console" in self&&"log" in console){console.log("ie:"+a)}}gLogMsg+=a+"\r\n";return}function isOldIE(){return browser.versions.oldIE}if(browser.versions.oldIE){wtkLog("oldIE "+browser.versions.oldIE)}var gForceMobile=false;function setForceMobile(a){gForceMobile=a;return}function isMobile(){return gForceMobile||browser.versions.android||browser.versions.iPhone||browser.versions.iPad}wtkLog(navigator.userAgent);var WTK_HOST_NAME=window.atob("aHR0cDovL3d3dy41aWRyYXcuY29tCg==");function x321(){return""}function x325(a){WTK_HOST_NAME=a;return}function x322(){return x321()+"/wtk/images/"}function x323(a){return x321()+"/wtk/images/"+a}Array.prototype.remove=function(b){for(var a=0;a<this.length;++a){if(this[a]===b){this.splice(a,1);break}}return};Array.prototype.has=function(b){for(var a=0;a<this.length;++a){if(this[a]===b){return true}}return false};Array.prototype.clear=function(){this.length=0};Array.prototype.copy=function(c){this.clear();for(var a=0;a<c.length;++a){var b=c[a];if(b&&b.dup){b=b.dup()}this.push(b)}return};function x179(a,b){return a.x>=b.x&&a.y>=b.y&&a.x<(b.x+b.w)&&a.y<(b.y+b.h)}function createXMLHTTTPRequest(){var c=null;try{c=new ActiveXObject("Msxml2.XMLHTTP")}catch(b){try{c=new ActiveXObject("Microsoft.XMLHTTP")}catch(a){c=null}}if(!c&&typeof XMLHttpRequest!=="undefined"){c=new XMLHttpRequest()}return c}function x320(a,b){if(window.attachEvent){window.attachEvent(a,b)}else{if(window.addEventListener){window.addEventListener(a,b)}else{document.addEventListener(a,b,true)}}return}String.prototype.replaceAll=function(a,c,b){if(!RegExp.prototype.isPrototypeOf(a)){return this.replace(new RegExp(a,(b?"gi":"g")),c)}else{return this.replace(a,c)}};function x114(b){var a=0;var d="";b=b.replaceAll("<br>","");var f=b.length;for(a=0;a<f;a++){var e=b.charAt(a);if(e==="“"||e==="”"){e='"'}d=d+e}return d}String.prototype.trim=function(){return String(this).replace(/^\s+|\s+$|^\n+|\n+$/g,"")};function x100(b,c,g,h,j){if(!b||!c||!g||!h){return}var l=c.x;var k=c.y;b.moveTo(l,k);if(!j){b.lineTo(g.x,g.y);return}var o=g.x-c.x;var m=g.y-c.y;var a=Math.sqrt(o*o+m*m);var d=Math.atan(m/o);b.save();b.translate(c.x,c.y);b.rotate(d);if(g.x<c.x){b.translate(-a,0)}b.moveTo(0,0);l=0;while(l<a){l+=h;if(l>a){l=a}b.lineTo(l,0);l+=j;b.moveTo(l,0)}b.restore();return}var x26=0;var x27=1;var x20=2;var x28=3;var x21=4;var x29=5;var x22=1<<8|x20;var x24=1<<8|x28;var x23=1<<8|x21;var x25=1<<8|x29;function x96(a,b){a.translate(-b/2,0);a.moveTo(-b/2,-b/2);a.lineTo(b/2,0);a.lineTo(-b/2,b/2);a.stroke();a.beginPath();return}function x99(a,b){a.translate(-b/2,0);a.moveTo(b/2,0);a.lineTo(-b/2,-b/2);a.lineTo(-b/2,b/2);a.lineTo(b/2,0);return}function x95(a,b){a.translate(-b/2,0);a.arc(0,0,b/2,Math.PI*2,0);return}function x97(a,b){a.translate(-b/2,0);a.rect(-b/2,-b/2,b,b);return}function x98(a,b){a.translate(-b/2,0);a.rotate(Math.PI/4);a.rect(-b/2,-b/2,b,b);return}var arrow_draw_header=[null,x96,x95,x97,x98,x99];function x94(a,g,b,d,f){var m=10;if(!a||!b||!d){return}var l=g>>8;g=g&255;if(g<=0||g>=arrow_draw_header.length){return}if(f){m=f}var e=(d.y-b.y)/(d.x-b.x);var c=Math.atan(e);if(d.x<b.x){c=c+Math.PI}var j=a.fillStyle;var h=a.strokeStyle;a.save();a.translate(d.x,d.y);a.rotate(c);a.beginPath();m=m+a.lineWidth-1;arrow_draw_header[g](a,m);a.closePath();if(l){a.fillStyle=h}else{a.fillStyle="White"}if(g>1){a.fill()}a.stroke();a.restore();a.fillStyle=j;a.strokeStyle=h;return}function x107(c,d,k,g,l,e,m,j,o,f){if(!d){c.fillRect(m,j,o,f);return}if(!k){k=0}if(!g){g=0}if(!l||l>d.width){l=d.width}if(!e||e>d.height){e=d.height}var b=l/2;var a=e/2;if(l>=o&&e>=f){c.drawImage(d,k,g,l,e,m,j,o,f);return}c.drawImage(d,k,g,b,a,m,j,b,a);c.drawImage(d,k+b,g,b,a,m+o-b,j,b,a);c.drawImage(d,k,g+a,b,a,m,j+f-a,b,a);c.drawImage(d,k+b,g+a,b,a,m+o-b,j+f-a,b,a);if(o>l){c.drawImage(d,k+b,g,1,a,m+b,j,o-l,a);c.drawImage(d,k+b,g+a,1,a,m+b,j+f-a,o-l,a)}if(f>e){c.drawImage(d,k,g+a,b,1,m,j+a,b,f-e);c.drawImage(d,k+b,g+a,b,1,m+o-b,j+a,b,f-e);c.drawImage(d,k+b,g+a,1,1,m+b,j+a,o-l,f-e)}return}function x106(c,e,a,f,b,d){if(!e){c.fillRect(a,f,b,d);return}return x107(c,e,0,0,e.width,e.height,a,f,b,d)}function x108(a,g,l,f,m,d){var b=g.x151();var j=g.getX();var e=g.getY();var k=g.x171();var c=g.x147();if(!b){a.fillRect(l,f,m,d);return}return x107(a,b,j,e,k,c,l,f,m,d)}function drawRoundRect(b,a,c,d){b.arc(d,d,d,Math.PI,1.5*Math.PI,false);b.lineTo(a-d,0);b.arc(a-d,d,d,1.5*Math.PI,2*Math.PI,false);b.lineTo(a,c-d);b.arc(a-d,c-d,d,0,0.5*Math.PI,false);b.lineTo(d,c);b.arc(d,c-d,d,0.5*Math.PI,Math.PI,false);b.lineTo(0,d);return}function getViewPort(){var b;var a;if(typeof window.innerWidth!="undefined"){b=window.innerWidth,a=window.innerHeight}else{if(typeof document.documentElement!="undefined"&&typeof document.documentElement.clientWidth!="undefined"&&document.documentElement.clientWidth!=0){b=document.documentElement.clientWidth,a=document.documentElement.clientHeight}else{b=document.getElementsByTagName("body")[0].clientWidth,a=document.getElementsByTagName("body")[0].clientHeight}}return{width:b,height:a}}function isPunctuation(a){return(a==="。"||a==="，"||a==="："||a==="；"||a===";"||a==="."||a===","||a===":")}function layoutLine(b,j,k,a){var g="";var d=b.measureText(k).width;if(d<a){j.push(k)}else{d=0;for(var e=0;e<k.length;e++){var f=k.charAt(e);var h=b.measureText(f).width;if((d+h)<a||isPunctuation(f)){g+=f;d+=h}else{j.push(g);g=f;d=h}}if(g&&g.length>0){j.push(g)}}return}function layoutText(d,l,c){var h=0;var g=0;var o=0;var f=0;var m="";var b=new Array();var e=l.split("\n");for(h=0;h<e.length;h++){var p=e[h];var k=p.split(" ");f=0;m="";for(g=0;g<k.length;g++){var a=k[g];o=d.measureText(a+" ").width;if(f>0){if((f+o)<c){f+=o;m+=" ";m+=a}else{layoutLine(d,b,m,c);m=a;f=o}}else{f=o;m=a}}layoutLine(d,b,m,c)}return b}var C_ICON_SIZE=20;function x174(e,b,c,a,d){this.image_url=e;this.rows=b;this.cols=c;this.itemWidth=a;this.itemHeight=d;this.load(e);return}x174.prototype.fromImage=function(a){this.image=a;if(!this.itemWidth){this.itemWidth=this.image.width}if(!this.itemHeight){this.itemHeight=this.image.height}return};x174.prototype.load=function(b){var a=new x324(b);this.image_url=b;this.fromImage(a);return true};x174.prototype.x151=function(){if(this.image){return this.image.x151()}return null};Icon.prototype.x151=function(){return this.icon_info.x151()};Icon.prototype.x171=function(){return this.icon_info.itemWidth};Icon.prototype.x147=function(){return this.icon_info.itemHeight};Icon.prototype.getX=function(){return this.x};Icon.prototype.getY=function(){return this.y};function Icon(c,b){var d=Math.floor(b/c.cols);var a=b%c.cols;this.icon_info=c;this.x=a*c.itemWidth;this.y=d*c.itemHeight;this.width=c.itemWidth;this.height=c.itemHeight;return}Icon.prototype.draw=function(c,a,f,b,d){if(!b){b=this.width}if(!d){d=this.height}var e=this.icon_info.x151();if(e){c.drawImage(e,this.x,this.y,this.width,this.height,a,f,b,d)}return};wtkLog("load icon done.");function Command(){this.count=0;this.doit=function(){this.count=this.count+1;wtkLog("command: doit "+this.count);return};this.undo=function(){this.count=this.count-1;wtkLog("command: undo "+this.count);return}}function x62(){this.cmds=new Array();this.x2=function(a){this.cmds.push(a);return};this.clear=function(){this.cmds.clear();return};this.doit=function(){for(var a=0;a<this.cmds.length;a++){var b=this.cmds[a];b.doit()}return};this.undo=function(){for(var a=0;a<this.cmds.length;a++){var b=this.cmds[a];b.undo()}return}}function x61(){this.listeners=new Array();this.redos=new Array();this.undos=new Array();this.clear=function(){this.redos.clear();this.undos.clear();return};this.notify=function(){for(var a=0;a<this.listeners.length;a++){var b=this.listeners[a];b.onChanged(this.redos.length,this.undos.length)}return};this.exec=function(a){a.doit();this.undos.push(a);this.redos.clear();this.notify();return};this.redo=function(){if(this.redos.length>0){var a=this.redos.pop();a.doit();this.undos.push(a);this.notify()}return};this.undo=function(){if(this.undos.length>0){var a=this.undos.pop();a.undo();this.redos.push(a);this.notify()}return};this.x63=function(){return this.redos.length};this.x64=function(){return this.undos.length};this.x3=function(a){this.listeners.push(a);return};this.x266=function(a){this.listeners.remove(a);return};return}if(typeof KeyEvent==="undefined"){var KeyEvent={DOM_VK_CANCEL:3,DOM_VK_HELP:6,DOM_VK_BACK_SPACE:8,DOM_VK_TAB:9,DOM_VK_CLEAR:12,DOM_VK_RETURN:13,DOM_VK_ENTER:14,DOM_VK_SHIFT:16,DOM_VK_CONTROL:17,DOM_VK_ALT:18,DOM_VK_PAUSE:19,DOM_VK_CAPS_LOCK:20,DOM_VK_ESCAPE:27,DOM_VK_SPACE:32,DOM_VK_PAGE_UP:33,DOM_VK_PAGE_DOWN:34,DOM_VK_END:35,DOM_VK_HOME:36,DOM_VK_LEFT:37,DOM_VK_UP:38,DOM_VK_RIGHT:39,DOM_VK_DOWN:40,DOM_VK_PRINTSCREEN:44,DOM_VK_INSERT:45,DOM_VK_DELETE:46,DOM_VK_0:48,DOM_VK_1:49,DOM_VK_2:50,DOM_VK_3:51,DOM_VK_4:52,DOM_VK_5:53,DOM_VK_6:54,DOM_VK_7:55,DOM_VK_8:56,DOM_VK_9:57,DOM_VK_SEMICOLON:59,DOM_VK_EQUALS:61,DOM_VK_A:65,DOM_VK_B:66,DOM_VK_C:67,DOM_VK_D:68,DOM_VK_E:69,DOM_VK_F:70,DOM_VK_G:71,DOM_VK_H:72,DOM_VK_I:73,DOM_VK_J:74,DOM_VK_K:75,DOM_VK_L:76,DOM_VK_M:77,DOM_VK_N:78,DOM_VK_O:79,DOM_VK_P:80,DOM_VK_Q:81,DOM_VK_R:82,DOM_VK_S:83,DOM_VK_T:84,DOM_VK_U:85,DOM_VK_V:86,DOM_VK_W:87,DOM_VK_X:88,DOM_VK_Y:89,DOM_VK_Z:90,DOM_VK_CONTEXT_MENU:93,DOM_VK_NUMPAD0:96,DOM_VK_NUMPAD1:97,DOM_VK_NUMPAD2:98,DOM_VK_NUMPAD3:99,DOM_VK_NUMPAD4:100,DOM_VK_NUMPAD5:101,DOM_VK_NUMPAD6:102,DOM_VK_NUMPAD7:103,DOM_VK_NUMPAD8:104,DOM_VK_NUMPAD9:105,DOM_VK_MULTIPLY:106,DOM_VK_ADD:107,DOM_VK_SEPARATOR:108,DOM_VK_SUBTRACT:109,DOM_VK_DECIMAL:110,DOM_VK_DIVIDE:111,DOM_VK_F1:112,DOM_VK_F2:113,DOM_VK_F3:114,DOM_VK_F4:115,DOM_VK_F5:116,DOM_VK_F6:117,DOM_VK_F7:118,DOM_VK_F8:119,DOM_VK_F9:120,DOM_VK_F10:121,DOM_VK_F11:122,DOM_VK_F12:123,DOM_VK_F13:124,DOM_VK_F14:125,DOM_VK_F15:126,DOM_VK_F16:127,DOM_VK_F17:128,DOM_VK_F18:129,DOM_VK_F19:130,DOM_VK_F20:131,DOM_VK_F21:132,DOM_VK_F22:133,DOM_VK_F23:134,DOM_VK_F24:135,DOM_VK_NUM_LOCK:144,DOM_VK_SCROLL_LOCK:145,DOM_VK_COMMA:188,DOM_VK_PERIOD:190,DOM_VK_SLASH:191,DOM_VK_BACK_QUOTE:192,DOM_VK_OPEN_BRACKET:219,DOM_VK_BACK_SLASH:220,DOM_VK_CLOSE_BRACKET:221,DOM_VK_QUOTE:222,DOM_VK_META:224}}var x32=1;var x33=0;var x34=-1;var C_EVT_KEY_DOWN=2;var C_EVT_KEY_UP=3;var C_EVT_DOUBLE_CLICK=4;var C_EVT_CONTEXT_MENU=5;var gCancelDefaultAction=false;function x18(b,c){var a=getViewPort();b.style.position="absolute";b.style.top=0;b.style.left=0;if(c||isMobile()){b.width=a.width;b.height=a.height}else{b.width=a.width-20;b.height=a.height*1.2}wtkLog("canvas size:"+b.width+"x"+b.height);if(b.height<200){b.height=600}if(b.width<300){b.width=600}return}function x16(d,c,b){var a=null;if("string"===typeof d){a=document.getElementById(d)}else{a=d}if(!a){a=document.createElement("canvas");a.id="idraw_canvas";document.body.appendChild(a);x18(a,true)}else{if(c){x18(a,b)}}wtkLog("x16: id="+a.id);return a}function canvasAttachManager(b,c){b.manager=c;function a(d){return d?d:window.event}b.getAbsPoint=function(f){var d=f.clientX-this.offsetLeft+x271();var g=f.clientY-this.offsetTop+x272();return{x:d,y:g}};x320("keydown",function(f){f=a(f);var d=f.keyCode;if(!c.preprocessEvent(C_EVT_KEY_DOWN,f,d)){return true}if(targetIsEditor(f)){return true}c.x249(d);return returnDefaultAction(f)});x320("keyup",function(f){f=a(f);var d=f.keyCode;if(!c.preprocessEvent(C_EVT_KEY_UP,f,d)){return true}c.x250(d);return returnDefaultAction(f)});b.ondblclick=function(f){f=a(f);var d=this.getAbsPoint(f);if(c.preprocessEvent(C_EVT_DOUBLE_CLICK,f,d)){c.onDoubleClick(d)}return x15(f)};b.onmousedown=function(f){f=a(f);var d=this.getAbsPoint(f);if(x180(f)){wtkLog("Right mouse down");return true}if(c.preprocessEvent(x32,f,d)){c.x251(d)}return x15(f)};b.onmousemove=function(f){f=a(f);var d=this.getAbsPoint(f);if(c.preprocessEvent(x33,f,d)){c.x252(d)}return x15(f)};b.onmouseup=function(f){f=a(f);var d=this.getAbsPoint(f);if(x180(f)){wtkLog("Right mouse up");if(c.preprocessEvent(C_EVT_CONTEXT_MENU,f,d)){c.x248(d)}}else{if(c.preprocessEvent(x34,f,d)){c.x253(d)}}return x15(f)};b.lastX=0;b.lastY=0;b.ontouchstart=function(f){var g=f.touches[0];var d=this.getAbsPoint(g);b.lastX=d.x;b.lastY=d.y;if(c.preprocessEvent(x32,f,d)){c.x251(d)}wtkLog("ontouchstart x="+d.x+" y="+d.y);return x15(f)};b.ontouchend=function(f){var d={x:this.lastX,y:this.lastY};if(c.preprocessEvent(x34,f,d)){c.x253(d)}wtkLog("ontouchend x="+d.x+" y="+d.y);return x15(f)};b.ontouchmove=function(f){var g=f.touches[0];var d=this.getAbsPoint(g);b.lastX=d.x;b.lastY=d.y;if(c.preprocessEvent(x33,f,d)){c.x252(d)}wtkLog("ontouchmove x="+d.x+" y="+d.y);return x15(f)};b.ongesturechange=function(d){var g=d.scale;var f=d.rotation;wtkLog("scale: "+g+" angle:"+f)};wtkLog("canvasAttachManager");return}function x15(b){var a=b?b:window.event;if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}return false}function x109(d,b,a){var c=d?d:0;if(b&&(!c||(c>b))){c=b}return a&&(!c||(c>a))?a:c}function x271(){return x109(window.pageXOffset?window.pageXOffset:0,document.documentElement?document.documentElement.x271:0,document.body?document.body.x271:0)}function x272(){return x109(window.pageYOffset?window.pageYOffset:0,document.documentElement?document.documentElement.x272:0,document.body?document.body.x272:0)}function x180(b){var a=false;if(b.which===null){a=(b.button>2&&b.button!==4)}else{a=(b.which>2&&b.which!==2)}return a}function x278(a){gCancelDefaultAction=a;return}function returnDefaultAction(a){return(gCancelDefaultAction)?x15(a):true}function Rect(a,d,b,c){this.x=a;this.y=d;this.w=b;this.h=c;return this}Rect.prototype.dup=function(){return new Rect(this.x,this.y,this.w,this.h)};function Point(a,b){this.x=a;this.y=b;return this}Point.prototype.dup=function(){return new Point(this.x,this.y)};Point.prototype.copy=function(a){this.x=a.x;this.y=a.y;return};function x261(b,a){return b.x===a.x&&b.y===a.y}function Element(){this.element=null}Element.prototype.setElement=function(a){this.element=a;return};Element.prototype.show=function(){this.isVisibile=true;this.element.style.visibility="visible";this.element.focus();return};Element.prototype.hide=function(){this.isVisibile=false;this.element.style.visibility="hidden";this.element.blur();return};Element.prototype.move=function(a,b){this.element.style.position="absolute";this.element.style.left=a+"px";this.element.style.top=b+"px";return};Element.prototype.setFontSize=function(a){this.element.style.fontSize=a+"px";return};Element.prototype.resize=function(a,b){this.element.style.width=a+"px";this.element.style.height=b+"px";return};Element.prototype.getText=function(){return this.element.value};Element.prototype.x300=function(a){this.element.value=a;return};function createElement(c,g,a,f,b,d){var e=new Element();c.id=g;e.setElement(c);e.move(a,f);e.resize(b,d);e.setFontSize(14);e.show();return e}var gWtkInput=null;function wtkShowInput(a,e,b,c){var d="wtk_input";if(!gWtkInput){gWtkInput=x69(d,a,e,b,c)}else{gWtkInput.move(a,e);gWtkInput.resize(b,c);gWtkInput.show()}return gWtkInput}var gWtkTextArea=null;function wtkShowTextArea(a,e,b,c){var d="wtk_textarea";if(!gWtkTextArea){gWtkTextArea=x68(d,a,e,b,c)}else{gWtkTextArea.move(a,e);gWtkTextArea.resize(b,c);gWtkTextArea.show()}return gWtkTextArea}function wtkHideAllInput(){if(gWtkInput&&gWtkInput.isVisibile){gWtkInput.hide();gWtkInput.element.onchange()}if(gWtkTextArea&&gWtkTextArea.isVisibile){gWtkTextArea.hide();gWtkTextArea.element.onchange()}return}function x69(f,a,e,b,d){var c=document.getElementById(f);if(!c){c=document.createElement("input");document.body.appendChild(c)}return createElement(c,f,a,e,b,d)}function x68(f,a,e,b,d){var c=document.getElementById(f);if(!c){c=document.createElement("textarea");document.body.appendChild(c)}return createElement(c,f,a,e,b,d)}var x78=0;var x76=1;var x80=2;var x77=3;var x79=4;var x89=0;var x81=1;var x84=2;var x83=3;var x92=4;var x82=5;var x87=6;var C_WIDGET_TYPE_TOOL_BAR=7;var x88=8;var C_WIDGET_TYPE_MENU_BUTTON=9;var C_WIDGET_TYPE_CONTEXT_MENU_BAR=10;var x86=11;var x91=12;var x85=13;var x90=14;var C_MENU_ITEM_HEIGHT=40;function x316(d,a,e,b,c){this.id=0;this.text="";this.type=0;this.visible=0;this.focusable=1;this.insensitive=0;this.listener=0;this.parent=d;this.rect=new Rect(a,e,b,c);this.enable=1;this.state=x78;this.point=new Point(0,0);this.children=new Array();this.theme=x317(this.type);this.lastMousePoint=new Point(0,0);this.mouseDownPoint=new Point(0,0);if(this.parent!==null){d.appendChild(this)}this.setNeedRelayout=function(f){this.needRelayout=f;return};this.appendChild=function(f){f.parent=this;this.children.push(f);return};this.x155=function(){return this.x170().manager};this.isMouseDown=function(){return this.x155().isMouseDown()};this.isClicked=function(){return this.x155().isClicked()};this.x176=function(){return this.x155().x176()};this.x177=function(){return this.x155().x177()};this.getApp=function(){return this.x155().getApp()};this.x130=function(){return this.x155().x130()};this.x170=function(){if(this.parent){return this.parent.x170()}return this};this.x171=function(){return this.rect.w};this.x147=function(){return this.rect.h};this.x126=function(){var f=this.rect.x;var h=this.rect.y;for(var g=this.parent;g;g=g.parent){f=f+g.rect.x;h=h+g.rect.y}return{x:f,y:h}};this.x262=function(f){var g=this.x126();if(!f){f=new Rect(0,0,this.rect.w,this.rect.h)}f.x=g.x+f.x;f.y=g.y+f.y;this.x155().x262(f);return};this.x113=function(f,g){if(!this.visible){return null}if(!x179(f,this.rect)){return null}if(g&&this.children.length>0){var m=this.children.length-1;var k=this.point;k.x=f.x-this.rect.x;k.y=f.y-this.rect.y;for(var j=m;j>=0;j--){var l=this.children[j];var h=l.x112(k);if(h!==null){return h}}}return this};this.x112=function(f){return this.x113(f,1)};this.x264=function(f){this.children.remove(f);return};this.x300=function(f){this.text=f;return};this.x287=function(f){this.id=f;return};this.x283=function(f){this.enable=f;if(!f){this.state=x77}else{if(this.state===x77){this.state=x78}}return};this.x297=function(f){if(this.enable){this.state=f}return};this.measure=function(f){return};this.move=function(f,g){this.rect.x=f;this.rect.y=g;return};this.moveDelta=function(g,f){this.rect.x=this.rect.x+g;this.rect.y=this.rect.y+f;return};this.resize=function(f,g){this.rect.w=f;this.rect.h=g;this.setNeedRelayout(true);return};this.x292=function(f){this.listener=f;return};this.lookup=function(j){if(this.id===j){return this}if(this.children.length===0){return null}for(var f=0;f<this.children.length;f++){var h=this.children[f];var g=h.lookup(j);if(g!==null){return g}}return null};this.relayout=function(f,g){return};this.x255=function(f){var g=this.theme[this.state].image;if(g){x108(f,g,this.rect.x,this.rect.y,this.rect.w,this.rect.h)}else{if(this.theme[this.state].bg){f.fillStyle=this.theme[this.state].bg;f.fillRect(this.rect.x,this.rect.y,this.rect.w,this.rect.h)}}return};this.x259=function(f){return};this.x5=function(f){return};this.x4=function(f){return};this.draw=function(f){var h=null;if(!this.visible){return}f.lineWidth=1;f.fillStyle="White";f.strokeStyle="Black";f.beginPath();this.x5(f);this.relayout(f,0);this.x255(f);this.x259(f);if(this.children.length===0){return}f.save();f.translate(this.rect.x,this.rect.y);for(var g=0;g<this.children.length;g++){child=this.children[g];if(child.state===x80){h=child}else{child.draw(f)}}if(h){h.draw(f)}f.restore();this.x4(f);f.closePath()};this.show=function(f){this.visible=f};this.x303=function(g){this.show(g);for(var f=0;f<this.children.length;f++){this.children[f].x303(g)}this.relayout(this.x130(),false);if(!this.parent){this.x262()}return};this.onDoubleClick=function(f){return};this.x251=function(f){this.x170().grab(this);if(this.state!==x77){this.state=x76;this.x262()}wtkLog("x251 x316:"+this.id+" x="+f.x);return};this.x252=function(f){return};this.x253=function(f){if(this.state!==x77){this.state=x78}this.x170().x314();if(this.listener&&this.state!==x77){this.listener(this)}this.x262();wtkLog("x253 x316:"+this.id+" x="+f.x);return};this.x248=function(f){return};this.x249=function(f){wtkLog("x250 x316:"+this.id+" code="+f);return};this.x250=function(f){wtkLog("x250 x316:"+this.id+" code="+f);return}}function x324(b){this.image=new Image();this.image.src=b;this.imageLoaded=false;this.url=b;this.x151=function(){return this.imageLoaded?this.image:null};var a=this;this.image.onload=function(c){a.imageLoaded=true;wtkLog("load "+b+" ok.")};this.image.onerror=function(c){a.imageLoaded=false;wtkLog("load "+b+" failed.")};this.image.onabort=function(c){a.imageLoaded=false;wtkLog("load "+b+" failed(abort).")};return}var gWtkCursor=null;function wtkGetCursor(){if(!gWtkCursor){gWtkCursor=new x324("http://www.5idraw.com/diagram/images/cursor.png")}return gWtkCursor}function Gc(b,c,a,d){this.bg=c;this.fg=a;this.font=b;this.image=d;this.dup=function(){var e=new Gc(this.font,this.bg,this.fg,this.image);return e};return}function themeDup(b){var c=new Array();for(var a=0;a<b.length;a++){c.push(b[a].dup())}return c}function themeCreate(){var a=new Array();a.push(new Gc("18px sans-serif ","#FFFFFF","#000000",null));a.push(new Gc("18px sans-serif ","#FFFFFF","#000000",null));a.push(new Gc("18px sans-serif ","#FFFFFF","#000000",null));a.push(new Gc("18px sans-serif ","#FFFFFF","Gray",null));return a}var gTheme=null;function x313(){var b=null;if(gTheme!==null){return gTheme}gTheme=new Array();for(var a=0;a<x90;a++){gTheme.push(themeCreate())}b=gTheme[x92];b[x78].fg="#FFFF00";b=gTheme[C_WIDGET_TYPE_MENU_BUTTON];b[x78].font="14px sans-serif";b[x77].font="14px sans-serif";b[x80].font="14px sans-serif";b[x76].font="14px sans-serif";return gTheme}function x317(a){var b=x313()[a];return themeDup(b)}function toolbarPaintBackground(b,a){a.save();a.translate(b.rect.x,b.rect.y);if(!b.grad){b.grad=a.createLinearGradient(0,0,0,b.rect.h);b.grad.addColorStop(0,"#A0A0A0");b.grad.addColorStop(0.9,"#D0D0D0");b.grad.addColorStop(1,"#B8B8B8")}a.fillStyle=b.grad;a.shadowColor="Black";a.shadowOffsetX=0;a.shadowOffsetY=0;a.shadowBlur=10;a.beginPath();a.lineWidth=2;drawRoundRect(a,b.rect.w,b.rect.h,5);a.fill();a.restore();return true}function gridMenuPaintBackground(b,a){a.save();a.translate(b.rect.x,b.rect.y);if(!b.grad){b.grad=a.createLinearGradient(0,0,0,b.rect.h);b.grad.addColorStop(0,"#E0E0E0");b.grad.addColorStop(0.99,"#484848");b.grad.addColorStop(1,"#E0E0E0")}a.fillStyle=b.grad;a.shadowColor="Black";a.shadowOffsetX=0;a.shadowOffsetY=0;a.shadowBlur=10;a.beginPath();drawRoundRect(a,b.rect.w,b.rect.h,8);a.fill();a.restore();return true}function menuPaintBackground(b,a){a.save();a.translate(b.rect.x,b.rect.y);if(!b.grad){b.grad=a.createLinearGradient(0,0,0,b.rect.h*3);b.grad.addColorStop(0,"#E0E0E0");b.grad.addColorStop(0.95,"#484848");b.grad.addColorStop(1,"#E0E0E0")}a.fillStyle="#FFFFFF";a.shadowColor="Black";a.shadowOffsetX=0;a.shadowOffsetY=2;a.shadowBlur=5;a.beginPath();if(b.asPopup){drawRoundRect(a,b.rect.w,b.rect.h,5);a.fill()}else{a.fillRect(0,0,b.rect.w,b.rect.h)}a.restore();return true}function contextMenuBarPaintBackground(b,a){a.save();a.translate(b.rect.x,b.rect.y);a.fillStyle="White";a.strokeStyle="#E0E0E0";drawRoundRect(a,b.rect.w,b.rect.h,5);a.fill();a.stroke();a.restore();return true}function menuBarPaintBackground2(d,a){a.save();a.translate(d.rect.x,d.rect.y);if(!d.grad){d.grad=a.createLinearGradient(0,0,0,d.rect.h);d.grad.addColorStop(0,"#FFFFFF");d.grad.addColorStop(0.25,"#E0E0E0");d.grad.addColorStop(0.5,"#D0D0D0");d.grad.addColorStop(0.75,"#C0C0C0");d.grad.addColorStop(0.95,"gray");d.grad.addColorStop(1,"#D0D0D0");var c=d.children;for(var b=0;b<c.length;b++){var e=c[b];e.theme[0].fg="#000000"}}a.fillStyle=d.grad;a.shadowColor="Black";a.shadowOffsetX=0;a.shadowOffsetY=0;a.shadowBlur=10;a.beginPath();a.fillRect(0,0,d.rect.w,d.rect.h);a.restore();return true}function menuBarPaintBackground(d,a){a.save();a.translate(d.rect.x,d.rect.y);if(!d.grad){d.grad=a.createLinearGradient(0,0,0,d.rect.h);d.grad.addColorStop(0,"#3a3a38");d.grad.addColorStop(0.25,"#33322f");d.grad.addColorStop(0.5,"#2c2c26");d.grad.addColorStop(0.75,"#24231a");d.grad.addColorStop(0.9,"#1c1c11");d.grad.addColorStop(1,"gray");var c=d.children;for(var b=0;b<c.length;b++){var e=c[b];e.theme[0].fg="#F0F0F0"}}a.fillStyle=d.grad;a.shadowColor="Black";a.shadowOffsetX=0;a.shadowOffsetY=0;a.shadowBlur=10;a.beginPath();a.fillRect(0,0,d.rect.w,d.rect.h);a.restore();return true}function menuItemPaintBackground(b,a){if(b.state===x78||b.state===x77){return}a.save();a.translate(b.rect.x,b.rect.y);a.lineWidth=1;a.strokeStyle="Gray";if(b.state===x80){a.fillStyle="#E0E0E0"}else{a.fillStyle="#C0C0C0"}a.beginPath();drawRoundRect(a,b.rect.w,b.rect.h,8);a.fill();a.stroke();a.restore();return true}function toolbarPaintTitle(d,f,c,a,g,b,e){d.font=c;d.textAlign="left";d.textBaseline="middle";d.fillStyle="Black";d.fillText(f,a+5,g+e/2,b-30);return}function x318(d,a,f,b,e){var c=[null,a,f,b,e];x316.apply(this,c);this.grabWidget=0;this.focusWidget=0;this.center=0;this.manager=d;this.type=x92;this.theme=x317(this.type);this.x293=function(g){this.manager=g;return};this.grab=function(g){this.grabWidget=g};this.x314=function(){this.grabWidget=0};this.x280=function(g){this.center=g;return};this.x241=function(){var j=getViewPort();var h=Math.min(this.manager.w,j.width);var k=Math.min(this.manager.h,j.height);var g=(h-this.rect.w)/2;var l=(k-this.rect.h)/2;this.rect.x=g;this.rect.y=l;return};this.onDoubleClick=function(g){var h=this;if(this.grabWidget){h=this.grabWidget}else{h=this.x112(g)}if(h&&h!==this){h.onDoubleClick(g);this.focusWidget=h}return};this.x251=function(g){var h=this;if(this.grabWidget){h=this.grabWidget}else{h=this.x112(g)}if(h&&h!==this){h.x251(g);this.focusWidget=h}return};this.x252=function(g){var h=this;if(this.grabWidget){h=this.grabWidget}else{h=this.x112(g)}if(h&&h!==this){if(this.lastTarget&&h!=this.lastTarget){this.lastTarget.x252(g)}h.x252(g);this.lastTarget=h}return};this.x253=function(g){var h=this;if(this.grabWidget){h=this.grabWidget}else{h=this.x112(g)}if(h&&h!==this){h.x253(g)}return};this.x248=function(g){var h=this;if(this.grabWidget){h=this.grabWidget}else{h=this.x112(g)}if(h&&h!==this){h.x248(g)}return};this.x249=function(g){if(this.grabWidget){this.grabWidget.x249(g)}if(this.focusWidget!==0){this.focusWidget.x249(g)}return};this.x250=function(g){if(this.grabWidget){this.grabWidget.x250(g)}if(this.focusWidget!==0){this.focusWidget.x250(g)}return};this.manager.addWindow(this)}var C_GRID_ITEM_WIDTH=60;var C_GRID_ITEM_HEIGHT=60;function Grid(d,a,e,b,c){this.rows=4;this.cols=4;this.needRelayout=1;this.visibleStart=0;this.itemHeight=C_GRID_ITEM_WIDTH;this.itemWidth=C_GRID_ITEM_HEIGHT;Box.apply(this,arguments);this.x279=function(f,g){this.rows=Math.floor(f);this.cols=Math.floor(g);return};this.x289=function(f,g){this.itemWidth=f;this.itemHeight=g;return};this.x171=function(){return(this.itemWidth+1)*this.cols};this.x147=function(){return(this.itemHeight+1)*this.rows};this.reset=function(){this.visibleStart=0;this.children.clear();return};this.hasNextPrevPage=function(){var g=this.children.length;var f=this.rows*this.cols;if(g<=f){return false}return true};this.hasNextPage=function(){var g=this.children.length;var f=this.rows*this.cols;if(g<f){return false}if((this.visibleStart+f)>=g){return false}return true};this.hasPrevPage=function(){var g=this.children.length;var f=this.rows*this.cols;if(g<f){return false}if(this.visibleStart<=0){return false}return true};this.nextPage=function(){var g=this.children.length;var f=this.rows*this.cols;if(g<f){return}if((this.visibleStart+f*2)>=g){this.visibleStart=g-f}else{this.visibleStart=this.visibleStart+f}this.relayout(null,true);this.x262();return};this.prevPage=function(){var g=this.children.length;var f=this.rows*this.cols;var h=this.visibleStart-f;if(g<f){return}if(h>0){this.visibleStart=h}else{this.visibleStart=0}this.relayout(null,true);this.x262();return};this.x249=function(f){return};this.x250=function(f){if(f===KeyEvent.DOM_VK_PAGE_UP){this.prevPage()}else{if(f===KeyEvent.DOM_VK_PAGE_DOWN){this.nextPage()}}return};this.relayout=function(l,j){var g=0;var q=0;var t=0;var o=0;var m=0;if(!this.needRelayout&&!j){return}t=this.itemWidth;o=this.itemHeight;for(m=0;m<this.visibleStart;m++){var k=this.children[m];k.show(false)}for(var f=0;f<this.rows;f++){q=f*(this.itemHeight+1);for(var s=0;s<this.cols;s++){var p=this.visibleStart+f*this.cols+s;if(p>=this.children.length){break}var k=this.children[p];g=s*(this.itemWidth+1);k.move(g,q);k.measure(l);k.resize(t,o);k.show(true)}}for(m=this.visibleStart+this.rows*this.cols;m<this.children.length;m++){var k=this.children[m];k.show(false)}this.needRelayout=0;this.rect.w=this.x171();this.rect.h=this.x147();return};return}function x6(d){var a=1;var b=1;if(d<9){a=1;b=d}else{if(d<13){a=3;b=4}else{if(d<17){a=4;b=4}else{if(d<21){a=4;b=5}else{if(d<26){a=5;b=5}else{if(d<31){a=5;b=6}else{if(d<37){a=6;b=6}else{if(d<50){a=7;b=7}else{a=8;b=8}}}}}}}}var c=new Object();c.rows=a;c.cols=b;return c}function x319(b,a){this.app=b;this.canvas=a;this.w=a.width;this.h=a.height;this.last_point=0;this.mouseDown=0;this.target=null;this.windows=new Array();this.grabWindows=new Array();this.dirtyRegion=new Array();this.eventLogging=false;this.mouseDownPoint={x:0,y:0};this.lastMousePoint={x:0,y:0};return}x319.prototype.getApp=function(){return this.app};function targetIsEditor(c){var a=c.srcElement?c.srcElement:c.target;var b=a.localName?a.localName:a.tagName;b=b.toLowerCase();if(b==="input"||b==="textarea"){return true}return false}x319.prototype.logEvent=function(d,c,j){var g={t:d};var b=new Date();var f=b.getTime();var a=this.events.length>0?this.events[this.events.length-1]:null;if(!this.mouseDown&&a&&d===x33&&a.t===x33){var k=a.p.x-j.x;var h=a.p.y-j.y;if(Math.abs(k)<5&&Math.abs(h)<5){wtkLog("Skip move event");return}}g.tm=b.getTime()-f;this.lastEventTime=f;switch(d){case x32:wtkLog("Record: Mouse down:"+j.x+" x "+j.y);case x34:wtkLog("Record: Mouse up:"+j.x+" x "+j.y);case C_EVT_CONTEXT_MENU:case x33:case C_EVT_DOUBLE_CLICK:g.p=j;break;case C_EVT_KEY_DOWN:case C_EVT_KEY_UP:g.c=j;break;default:break}if(targetIsEditor(c)){g.other=true}this.events.push(g);return};x319.prototype.replayEvents=function(b){if(b){try{this.events=JSON.parse(b)}catch(d){return}}if(!this.events||this.events.length<1){return}var a=this;this.replayIndex=0;a.eventReplaying=true;wtkLog("replay events start.");function c(){var e=a.events[a.replayIndex];var f=e.t;if(e.other){if(f===C_EVT_KEY_DOWN){}else{if(f===C_EVT_KEY_UP){}}}else{switch(f){case C_EVT_CONTEXT_MENU:a.x248(e.p);wtkLog("Inject: Mouse down:"+e.p.x+" x "+e.p.y);break;case x32:a.x251(e.p);wtkLog("Inject: Mouse down:"+e.p.x+" x "+e.p.y);break;case x33:a.x252(e.p);break;case x34:a.x253(e.p);wtkLog("Inject: Mouse up:"+e.p.x+" x "+e.p.y);break;case C_EVT_DOUBLE_CLICK:a.onDoubleClick(e.p);break;case C_EVT_KEY_DOWN:a.x249(e.c);break;case C_EVT_KEY_UP:a.x250(e.c);break;default:break}}a.replayIndex++;if(a.replayIndex<a.events.length){e=a.events[a.replayIndex];setTimeout(c,e.t)}else{a.eventReplaying=false;wtkLog("replay events end.")}}setTimeout(c,0);return};x319.prototype.preprocessEvent=function(d,f,a){if(d===C_EVT_KEY_UP&&a===KeyEvent.DOM_VK_F4){if(this.eventLogging){var c=JSON.stringify(this.events);wtkLog(c.length+":\n"+c);this.replayEvents(c)}else{if(!this.events){this.events=new Array()}else{this.events.clear()}var b=new Date();this.lastEventTime=b.getTime();wtkLog("Start event loggin.")}this.eventLogging=!this.eventLogging;return true}if(d===C_EVT_KEY_DOWN&&a===KeyEvent.DOM_VK_F4){return true}if(this.eventLogging){this.logEvent(d,f,a)}if(this.eventReplaying){return false}if(d===x32||d===x33||d===x34){return true}if(targetIsEditor(f)){return false}return true};x319.prototype.x130=function(){return this.canvas.getContext("2d")};x319.prototype.findTargetWin=function(a){var e=null;var c=this.grabWindows.length;if(c>0){e=this.grabWindows[c-1]}else{c=this.windows.length;for(var b=c-1;b>=0;b--){var d=this.windows[b];if(!d.visible||d.insensitive||!d.focusable){continue}if(x179(a,d.rect)){e=d;break}}}return e};x319.prototype.resize=function(a,b){this.w=a;this.h=b;this.x262();return};x319.prototype.grab=function(a){this.grabWindows.push(a);return};x319.prototype.x314=function(a){this.grabWindows.remove(a);return};x319.prototype.onDoubleClick=function(a){this.target=this.findTargetWin(a);if(this.target){this.target.onDoubleClick(a)}else{wtkLog("x318 Manager: no target for x="+a.x+" y="+a.y)}return};x319.prototype.x251=function(a){wtkHideAllInput();this.target=this.findTargetWin(a);this.mouseDown=true;this.mouseDownPoint.x=a.x;this.mouseDownPoint.y=a.y;this.lastMousePoint.x=a.x;this.lastMousePoint.y=a.y;if(this.target){this.target.x251(a)}else{wtkLog("x318 Manager: no target for x="+a.x+" y="+a.y)}return};x319.prototype.x252=function(a){this.target=this.findTargetWin(a);this.lastMousePoint.x=a.x;this.lastMousePoint.y=a.y;if(this.target){this.target.x252(a)}return};x319.prototype.x253=function(a){this.target=this.findTargetWin(a);this.lastMousePoint.x=a.x;this.lastMousePoint.y=a.y;if(this.target){this.target.x253(a)}else{wtkLog("x318 Manager: no target for x="+a.x+" y="+a.y)}this.mouseDown=false;return};x319.prototype.isMouseDown=function(){return this.mouseDown};x319.prototype.isClicked=function(){var b=Math.abs(this.lastMousePoint.x-this.mouseDownPoint.x);var a=Math.abs(this.lastMousePoint.y-this.mouseDownPoint.y);return(b<5&&a<5)};x319.prototype.x177=function(){return this.ctrlDown};x319.prototype.x176=function(){return this.altDown};x319.prototype.x248=function(a){this.target=this.findTargetWin(a);if(this.target){this.target.x248(a)}else{wtkLog("x318 Manager: no target for x="+a.x+" y="+a.y)}return};x319.prototype.x249=function(a){switch(a){case KeyEvent.DOM_VK_SHIFT:this.shitfDown=true;break;case KeyEvent.DOM_VK_CONTROL:this.ctrlDown=true;break;case KeyEvent.DOM_VK_ALT:this.altDown=true;break;default:if(this.target!==null){this.target.x249(a)}}return};x319.prototype.x250=function(a){switch(a){case KeyEvent.DOM_VK_SHIFT:this.shitfDown=false;break;case KeyEvent.DOM_VK_CONTROL:this.ctrlDown=false;break;case KeyEvent.DOM_VK_ALT:this.altDown=false;break;default:if(this.target!==null){this.target.x250(a)}}return};x319.prototype.addWindow=function(a){this.windows.push(a);return};x319.prototype.removeWindow=function(a){this.windows.remove(a);wtkLog("remove nr="+this.windows.length);this.x262();return};x319.prototype.x262=function(a){if(!a){a=new Rect(0,0,this.w,this.h)}this.dirtyRegion.push(a);setTimeout(x263(this),1);return};x319.prototype.draw=function(){if(this.dirtyRegion.length===0){return}var b=this.x130();b.save();var d=this.windows.length;for(var c=0;c<d;c++){var e=this.windows[c];e.draw(b)}b.beginPath();b.strokeStyle="Black";if(this.eventLogging){b.fillStyle="Red";b.arc(30,30,10,0,2*Math.PI)}if(this.eventReplaying){var f=wtkGetCursor().x151();b.fillStyle="Gold";b.moveTo(25,20);b.lineTo(35,30);b.lineTo(25,40);b.lineTo(25,20);if(f){var a=this.lastMousePoint.x;var g=this.lastMousePoint.y;b.drawImage(f,a,g)}}b.fill();b.stroke();this.dirtyRegion.clear();b.restore();return};function x263(a){return function(){a.draw()}}function Box(d,a,e,b,c){this.image=null;this.point=new Point(0,0);x316.apply(this,arguments);this.vBorder=4;this.hBorder=6;this.spaceSize=1;this.autoSize=false;this.setAutoSize=function(f){this.autoSize=f;return};this.setSpaceSize=function(f){this.spaceSize=f;return};this.x277=function(f,g){this.vBorder=f;this.hBorder=g;return};this.relayout=function(f){return};this.x171=function(){return this.rect.w};this.x147=function(){return this.rect.h};this.x111=function(f){var h=this.x126();this.point.x=f.x-h.x;this.point.y=f.y-h.y;for(var g=0;g<this.children.length;g++){var j=this.children[g];if(!j.visible){continue}if(x179(this.point,j.rect)){return j}}return null};this.x112=function(f){return this.x113(f,false)};this.x288=function(f){this.image=f;return};this.x255=function(f){if(this.image){x108(f,this.image,this.rect.x,this.rect.y,this.rect.w,this.rect.h)}else{}return};this.x251=function(f){this.lastMousePoint.x=f.x;this.lastMousePoint.y=f.y;this.mouseDownPoint.x=f.x;this.mouseDownPoint.y=f.y;var g=this.x111(f);if(this.current){this.current.x297(x78)}if(g){g.x297(x76);g.x251(f)}this.x262();this.current=g;return true};this.moveSelf=function(g,f){return};this.isMouseOn=function(f){return this.mouseOver};this.x252=function(f){var g=this.x111(f);this.mouseOver=x179(f,this.rect);if(this.current){this.current.x297(x78)}if(g){if(this.isMouseDown()){g.x297(x76)}else{g.x297(x80)}}if(this.current!==g){this.x262();this.current=g}return true};this.x253=function(f){if(!this.isMouseDown()){return}if(this.current){this.current.x297(x78)}if(this.current&&this.current.state!==x77){if(this.current.listener){this.current.listener(this.current)}else{this.current.x253(f)}}this.x262();return true};this.x249=function(f){wtkLog("x250 x316:"+this.id+" code="+f);return};this.x250=function(f){wtkLog("x250 x316:"+this.id+" code="+f);return};return}function x173(d,a,e,b,c){this.needRelayout=1;Box.apply(this,arguments);this.relayout=function(g,l){var f=0;var k=0;var m=this.hBorder;var p=this.vBorder;if(!this.needRelayout&&!l){return}for(var j=0;j<this.children.length;j++){var o=this.children[j];if(!o.visible){continue}o.move(m,p);o.measure(g);f=o.rect.w;k=this.rect.h-this.vBorder-this.vBorder;o.resize(f,k);o.x303(true);if((m+f)>this.rect.w){if(!this.autoSize){o.x303(false);continue}}m+=f+this.spaceSize;if(this.autoSize){this.rect.w=m}}this.needRelayout=0;return};return}function x315(d,a,e,b,c){this.needRelayout=1;this.itemHeight=C_MENU_ITEM_HEIGHT;this.itemWidth=120;Box.apply(this,arguments);this.x289=function(f,g){this.itemWidth=f;this.itemHeight=g;return};this.x147=function(){return(this.itemHeight+2)*this.children.length+4};this.relayout=function(j,m){var f=2;var p=2;var g=0;var l=0;if(!this.needRelayout&&!m){return}for(var k=0;k<this.children.length;k++){var o=this.children[k];if(!o.visible){continue}o.move(f,p);o.measure(j);g=this.itemWidth-4;l=this.itemHeight;o.resize(g,l);p+=l+2}this.rect.h=p+2;this.needRelayout=0;return};return}function x187(d,a,e,b,c){x316.apply(this,arguments);this.icon=null;this.asSpace=false;this.type=x88;this.theme=x317(this.type);this.minWidth=32;this.minHeight=32;this.tips=null;this.enable=true;this.setTips=function(f){this.tips=f;return};this.x294=function(f,g){this.minWidth=f;this.minHeight=g;return};this.x274=function(f){this.rect.w=f;this.asSpace=true;this.draw=function(g){};return};this.checkEnable=function(){return this.enable};this.x275=function(f){this.rect.h=f;this.asSpace=true;this.draw=function(g){};return};this.x296=function(f){this.shortCut=f;return};this.x5=function(f){this.enable=this.checkEnable();this.x283(this.enable);return};this.x286=function(f,g){this.icon=f;this.iconDisable=g;return};this.x255=function(f){return menuItemPaintBackground(this,f)};this.x259=function(h){var j=this.enable?this.icon:this.iconDisable;var g=this.rect.x+2;var k=this.rect.y;if(j){var f=24;if(!this.text){g=this.rect.x+(this.rect.w-f)/2}k=this.rect.y+(this.rect.h-f)/2;j.draw(h,g,k,f,f)}h.fillStyle=this.theme[this.state].fg;if(this.text){if(j){h.textAlign="left";g=this.rect.x+j.width+4;k=this.rect.y+this.rect.h/2+4}else{h.textAlign="center";g=this.rect.x+this.rect.w/2;k=this.rect.y+this.rect.h/2+8}h.font=this.theme[this.state].font;h.fillText(this.text,g,k);if(this.shortCut){h.textAlign="right";h.fillStyle="#A0A0A0";h.fillText(this.shortCut,this.rect.w-5,k)}}if(this.tips&&this.state===x80){h.textAlign="center";h.textBaseline="top";h.fillStyle="gold";h.font="18px sans-serif";g=this.rect.x+this.rect.w/2;k=this.rect.y+this.rect.h;h.fillText(this.tips,g,k)}return};this.measure=function(f){if(this.asSpace){return}this.rect.w=0;this.rect.h=C_MENU_ITEM_HEIGHT;var g=this.enable?this.icon:this.iconDisable;if(g){this.rect.w=g.width;this.rect.h=g.height}if(this.text){f.font=this.theme[this.state].font;this.rect.w=this.rect.w+10+f.measureText(this.text).width}if(this.rect.w<this.minWidth){this.rect.w=this.minWidth}if(this.rect.h<this.minHeight){this.rect.h=this.minHeight}return};return}function x201(a){wtkLog(a.text);testCommandHistory();x305()}function x202(b){var a=b.rect.x;var d=b.parent.rect.h;var c=new x185(a,d,200,72);wtkLog("x202:"+a+" x "+d);var b=new x187(c.x138(),0,0,0,0);b.x300("Open");b.x292(x201);b=new x187(c.x138(),0,0,0,0);b.x300("Save");b.x292(x201);c.x303(1);return}function MenuButton(d,a,e,b,c){x187.apply(this,arguments);this.type=C_WIDGET_TYPE_MENU_BUTTON;this.theme=x317(this.type);this.x259=function(h){var g=this.rect.x;var l=this.rect.y;var k=12;var j=this.enable?this.icon:this.iconDisable;if(j){var f=C_ICON_SIZE;g=this.rect.x+(this.rect.w-f)/2;l=this.rect.y+(this.rect.h-k-f)/2;j.draw(h,g,l,f,f)}h.fillStyle=this.theme[this.state].fg;if(this.text){h.textAlign="center";h.textBase="button";g=this.rect.x+this.rect.w/2;l=this.rect.y+this.rect.h-2;h.font=this.theme[this.state].font;h.fillText(this.text,g,l,this.rect.w)}return};this.measure=function(g){if(this.asSpace){return}var j=0;var f=0;var h=this.enable?this.icon:this.iconDisable;this.rect.w=0;this.rect.h=C_MENU_ITEM_HEIGHT;if(h){j=h.width}if(this.text){g.font=this.theme[this.state].font;f=g.measureText(this.text).width}this.rect.w=Math.max(j,f)+10;return};return}function Popup(c,a,f,b,d,e){x318.apply(this,arguments);this.type=x91;this.theme=x317(this.type);this.closeWhenClick=e;this.onMouseDownParent=this.x251;this.onMouseUpParent=this.x253;this.x251=function(g){this.onMouseDownParent(g);return};this.x253=function(g){this.onMouseUpParent(g);if(this.closeWhenClick){this.manager.x314(this);this.manager.removeWindow(this)}return};if(e){this.manager.grab(this)}wtkLog("Popup:w="+this.rect.w+" h="+this.rect.h);return}function x172(d,e,c,f,b){var a=[d,0,0,0,0,true];Popup.apply(this,a);this.type=x86;this.theme=x317(this.type);this.border=0;this.box=new Grid(this,0,0,0,0);this.box.x279(e,c);this.box.x289(f,b);this.setOptions=function(j,h,g){this.asPopup=j;this.x277(h);if(g){this.x241()}return};this.x255=function(g){gridMenuPaintBackground(this,g);return};this.x277=function(g){this.border=g;this.box.move(g,g);this.resize(this.rect.w+2*g,this.rect.h+2*g);return};this.x138=function(){return this.box};this.relayout=function(g,h){this.rect.w=this.box.x171()+2*this.border;this.rect.h=this.box.x147()+2*this.border;return};this.relayout(null,true);return}function x186(d,a,e,b,c){x173.apply(this,arguments);this.type=x87;this.x255=function(f){return menuBarPaintBackground(this,f)};return}function ContextMenuBar(d,a,e,b,c){x173.apply(this,arguments);this.type=C_WIDGET_TYPE_CONTEXT_MENU_BAR;this.x277(4,5);this.setAutoSize(true);this.x5=function(f){f.save();this.globalAlpha=f.globalAlpha;if(this.isMouseOn()){f.globalAlpha=1}else{if(isMobile()){f.globalAlpha=0.7}else{f.globalAlpha=0.4}}return};this.x4=function(f){f.globalAlpha=this.globalAlpha;return};this.x255=function(f){return contextMenuBarPaintBackground(this,f)};return}ContextMenuBar.HEIGHT=52;function ToolBar(e,a,j,c,d){x316.apply(this,arguments);this.ITEM_SIZE=32;this.border=5;this.expanded=true;this.type=C_WIDGET_TYPE_TOOL_BAR;this.box=new Grid(this,a,j,c,d);this.box.show(true);var g=this.box;var f=this;var b=this.ITEM_SIZE;this.expandItem=new x187(this,0,0,b,b);this.expandItem.x255=function(h){};this.expandItem.x259=function(m){var k=this.rect.x;var p=this.rect.y;var l=this.rect.w;var o=this.rect.h;m.save();m.translate(k,p);if(f.expanded){m.rect(0,0.3*o,l,0.3*o)}else{m.rect(2,2,l-4,o-4)}m.lineWidth=3;if(this.state===x80||this.state===x76){m.strokeStyle="#F0F0F0"}else{m.strokeStyle="Gray"}m.stroke();m.restore();return};this.expandItem.listener=function(h){f.expand();return};this.prevItem=new x187(this,0,0,b,b);this.prevItem.x255=function(h){};this.prevItem.x259=function(m){var k=this.rect.x;var p=this.rect.y;var l=this.rect.w;var o=this.rect.h;m.beginPath();m.save();m.translate(k,p);m.strokeStyle="Gray";m.lineWidth=2;if(!g.hasPrevPage()){m.translate(l/2,o/2);m.scale(1,0.8);m.translate(-l/2,-o/2);m.fillStyle="#C0C0C0";m.strokeStyle="#D0D0D0"}else{if(this.state===x76){m.fillStyle="#D0D0D0"}else{m.translate(l/2,o/2);m.scale(1,0.8);m.fillStyle="Gray";m.translate(-l/2,-o/2)}}m.translate(-0.2*l,0);m.moveTo(l,0);m.lineTo(0.5*l,0.5*o);m.lineTo(l,o);m.lineTo(l,0);m.fill();m.stroke();m.restore();return};this.prevItem.listener=function(h){if(g.hasPrevPage()){g.prevPage()}return};this.nextItem=new x187(this,0,0,b,b);this.nextItem.x255=function(h){};this.nextItem.x259=function(m){var k=this.rect.x;var p=this.rect.y;var l=this.rect.w;var o=this.rect.h;m.beginPath();m.save();m.translate(k,p);m.strokeStyle="Gray";m.lineWidth=2;if(!g.hasNextPage()){m.translate(l/2,o/2);m.scale(1,0.8);m.translate(-l/2,-o/2);m.fillStyle="#C0C0C0";m.strokeStyle="#D0D0D0"}else{if(this.state===x76){m.fillStyle="#D0D0D0"}else{m.translate(l/2,o/2);m.scale(1,0.8);m.fillStyle="Gray";m.translate(-l/2,-o/2)}}m.translate(0.2*l,0);m.moveTo(0,0);m.lineTo(0.5*l,0.5*o);m.lineTo(0,o);m.lineTo(0,0);m.fill();m.stroke();m.beginPath();m.restore();return};this.nextItem.listener=function(h){if(g.hasNextPage()){g.nextPage()}return};this.x138=function(){return this.box};this.adjustSize=function(){var o=this.box.x171();var l=this.box.x147();var m=o+2*this.border;var k=l+2*this.border+this.getTitleHeight();var h=this.border;var p=this.border+this.getTitleHeight();this.box.move(h,p);this.box.resize(o,l);this.resize(m,k);return};this.x289=function(k,l){this.box.x289(k,l);this.adjustSize();return};this.x279=function(h,k){this.rows=h;this.cols=k;this.box.x279(h,k);this.adjustSize();return};this.x255=function(l){var m=this.getTitleHeight();toolbarPaintBackground(this,l);if(m>0){var h=this.rect.x;var o=this.rect.y;var k=this.theme[this.state].font;toolbarPaintTitle(l,this.text,k,h,o,this.rect.w,m)}return};this.moveSelf=function(k,h){this.moveDelta(k,h);this.x262();return};this.getTitleHeight=function(){return this.text?36:0};this.x277=function(h){this.border=h;this.adjustSize();return};this.relayout=function(h,m){this.prevItem.show(false);this.nextItem.show(false);if(this.expanded){this.box.relayout(h,m);this.rect.w=this.box.x171()+2*this.border;this.rect.h=this.box.x147()+2*this.border+this.getTitleHeight();if(this.box.hasNextPrevPage()){var k=0.5*this.border;var l=this.rect.w-this.border-2*b;this.nextItem.move(l,k);this.prevItem.move(l-b,k);this.prevItem.show(true);this.nextItem.show(true)}}else{this.rect.w=this.box.x171()+2*this.border;this.rect.h=this.getTitleHeight()}this.expandItem.move(this.rect.w-this.border-b,0.5*this.border);this.expandItem.show(true);return};this.x251=function(h){var k=this;if(this.grabWidget){k=this.grabWidget}else{k=this.x112(h)}if(k&&k!==this){k.x251(h);this.focusWidget=k}if(!k||k===this){this.x170().grab(this)}this.lastMousePoint.x=h.x;this.lastMousePoint.y=h.y;this.mouseDown=true;return};this.x252=function(h){var m=this;if(this.grabWidget){m=this.grabWidget}else{m=this.x112(h)}if(m&&m!==this){m.x252(h)}if(!m||m===this){if(this.mouseDown){var l=h.x-this.lastMousePoint.x;var k=h.y-this.lastMousePoint.y;this.moveSelf(l,k)}}this.lastMousePoint.x=h.x;this.lastMousePoint.y=h.y;return};this.x253=function(h){var k=this;if(this.grabWidget){k=this.grabWidget}else{k=this.x112(h)}if(this.focusWidget){k=this.focusWidget}if(k&&k!==this){k.x253(h)}this.mouseDown=false;this.x170().x314();return};this.expand=function(){this.expanded=!this.expanded;this.box.show(this.expanded);this.needRelayout=true;this.x262();return};this.x249=function(h){this.box.x249(h);return};this.x250=function(h){this.box.x250(h);return};this.box.x255=function(h){h.fillStyle="gray";h.fillRect(this.rect.x,this.rect.y,this.rect.w,this.rect.h);return};return}function ToolBarMobile(e,a,f,c,d){ToolBar.apply(this,arguments);this.getTitleHeight=function(){return 0};var b=this.ITEM_SIZE;this.relayout=function(g,j){this.prevItem.show(false);this.nextItem.show(false);this.expandItem.show(false);this.prevItem.resize(1,1);this.nextItem.resize(1,1);this.box.relayout(g,j);this.rect.h=this.box.x147()+2*this.border;if(this.expanded){var h=(this.rect.h-b)/2;if(this.box.hasNextPrevPage()){this.rect.w=this.box.x171()+2*this.border+b*2;this.prevItem.move(0,h+this.border);this.nextItem.move(this.rect.w-b,h);this.prevItem.show(true);this.nextItem.show(true);this.expandItem.move(this.border,0)}else{this.rect.w=this.box.x171()+2*this.border+b;this.expandItem.move(this.border,h)}this.expandItem.resize(b*0.8,b);this.box.move(this.border+b,this.border);this.prevItem.resize(b,b);this.nextItem.resize(b,b)}else{this.rect.w=2*this.border+b;this.expandItem.move(this.border,(this.rect.h-b)/2);this.expandItem.resize(b,b)}this.expandItem.show(true);return};return}function x185(d,a,f,b,e){var c=[d,a,f,b,e,true];Popup.apply(this,c);this.type=x86;this.theme=x317(this.type);this.border=0;this.box=new x315(this,0,0,b,e);this.box.x289(b,C_MENU_ITEM_HEIGHT);this.setOptions=function(j,h,g){this.asPopup=j;this.x277(h);if(g){this.x241()}return};this.x255=function(h){var j=this.getTitleHeight();menuPaintBackground(this,h);if(j>0){var g=this.rect.x;var k=this.rect.y;h.fillStyle="#A0A0A0";h.fillRect(g,k,this.rect.w,j);h.fillStyle="Black";h.font=this.theme[this.state].font;h.textAlign="left";h.textBaseline="middle";h.fillText(this.text,g+10,k+j/2,this.rect.w)}return};this.getTitleHeight=function(){return this.text?36:0};this.x277=function(h){var g=h;var j=h+this.getTitleHeight();this.box.move(g,j);this.border=h;this.resize(this.rect.w+2*h,this.rect.h+j+h);return};this.x138=function(){return this.box};this.relayout=function(g,h){this.rect.w=this.box.x171()+2*this.border;this.rect.h=this.box.x147()+2*this.border+this.getTitleHeight();return};this.setNeedRelayout=function(g){this.needRelayout=g;this.box.setNeedRelayout(g);return};return}var gSupportedColors=["White","Black","Red","Green","Blue","#6371d8","Brown","Gray","Orange","Purple","Yellow","Gold","#FF6600","#FF6633","#FF6666","#FF6699","#FF9900","#FF9933","#FF9966","#FF9999","#FFCC00","#FFCC33","#FFCC66","#FFCC99","#FFFF00","#FFFF33","#FFFF66","#FFFF99","#606060","#686868","#707070","#787878","#808080","#888888","#909090","#989898","#A0A0A0","#A8A8A8","#B0B0B0","#B8B8B8","#C0C0C0","#C8C8C8","#D0D0D0","#D8D8D8","#E0E0E0","#E8E8E8","#F0F0F0","#F8F8F8","#600000","#680000","#700000","#780000","#800000","#880000","#900000","#980000","#A00000","#A80000","#B00000","#B80000","#C00000","#C80000","#D00000","#D80000"];var gSupportedGradColors=[{x0:0,y0:0,x1:0,y1:-1,data:[{o:0,c:"#ffffff"},{o:0.25,c:"#e0e0e0"},{o:0.5,c:"#d0d0d0"},{o:0.75,c:"#c0c0c0"},{o:1,c:"#808080"}]},{x0:0,y0:0,x1:0,y1:-1,data:[{o:0,c:"#ffffff"},{o:0.25,c:"#d0d0d0"},{o:0.5,c:"#808080"},{o:0.75,c:"#d0d0d0"},{o:1,c:"#ffffff"}]},{x0:0,y0:0,x1:0,y1:-1,data:[{o:0,c:"#3a3a38"},{o:0.25,c:"#33322f"},{o:0.5,c:"#2c2c26"},{o:0.75,c:"#24231a"},{o:1,c:"#FFFFFF"}]},{x0:0,y0:0,x1:0,y1:-1,data:[{o:0,c:"#d3b3af"},{o:0.25,c:"#c6a399"},{o:0.5,c:"#b48d79"},{o:0.75,c:"#a67b61"},{o:1,c:"#966845"}]},{x0:0,y0:0,x1:0,y1:-1,data:[{o:0,c:"#cecece"},{o:0.25,c:"#bebebe"},{o:0.5,c:"#a9a9a9"},{o:0.75,c:"#969696"},{o:1,c:"#818181"}]},{x0:0,y0:0,x1:0,y1:-1,data:[{o:0,c:"#fae38e"},{o:0.25,c:"#fbd76b"},{o:0.5,c:"#fccc49"},{o:0.75,c:"#fdbf24"},{o:1,c:"#feb405"}]},{x0:0,y0:0,x1:0,y1:-1,data:[{o:0,c:"#faf58b"},{o:0.25,c:"#faf176"},{o:0.5,c:"#fce84d"},{o:0.75,c:"#fde024"},{o:1,c:"#feda07"}]},{x0:0,y0:0,x1:0,y1:-1,data:[{o:0,c:"#d5e5a0"},{o:0.25,c:"#c8df85"},{o:0.5,c:"#bad866"},{o:0.75,c:"#acd149"},{o:1,c:"#9eca29"}]},{x0:0,y0:0,x1:0,y1:-1,data:[{o:0,c:"#90d290"},{o:0.25,c:"#76c176"},{o:0.5,c:"#58ae58"},{o:0.75,c:"#3c9c3c"},{o:1,c:"#1d891d"}]},{x0:0,y0:0,x1:0,y1:-1,data:[{o:0,c:"#a0d1f7"},{o:0.25,c:"#89c4f1"},{o:0.5,c:"#6db3ea"},{o:0.75,c:"#52a4e4"},{o:1,c:"#3a95dd"}]},{x0:0,y0:0,x1:0,y1:-1,data:[{o:0,c:"#8da1d2"},{o:0.25,c:"#6985c2"},{o:0.5,c:"#4c6eb5"},{o:0.75,c:"#214da2"},{o:1,c:"#023595"}]},{x0:0,y0:0,x1:0,y1:-1,data:[{o:0,c:"#c5a1d5"},{o:0.25,c:"#af7cc4"},{o:0.5,c:"#9f62b7"},{o:0.75,c:"#924bac"},{o:1,c:"#7e2a9c"}]},{x0:0,y0:0,x1:0,y1:-1,data:[{o:0,c:"#e5d3e7"},{o:0.25,c:"#dbc2dd"},{o:0.5,c:"#d2b2d4"},{o:0.75,c:"#c7a0ca"},{o:1,c:"#bd8fc0"}]},{x0:0,y0:0,x1:0,y1:-1,data:[{o:0,c:"#f4f4f4"},{o:0.25,c:"#eeeeee"},{o:0.5,c:"#e6e6e6"},{o:0.75,c:"#dddddd"},{o:1,c:"#d8d8d8"}]},{x0:0,y0:0,x1:0,y1:-1,data:[{o:0,c:"#C00000"},{o:0.25,c:"#C80000"},{o:0.5,c:"#D80000"},{o:0.75,c:"#E00000"},{o:1,c:"#E80000"}]},{x0:0,y0:0,x1:0,y1:-1,data:[{o:0,c:"#606060"},{o:0.25,c:"#686868"},{o:0.5,c:"#707070"},{o:0.75,c:"#787878"},{o:1,c:"#808080"}]}];function x60(d,a,e,b,c){x187.apply(this,arguments);this.color="red";this.x281=function(f){this.color=f};this.x136=function(f){return this.color};this.x259=function(j){var r=this.rect.x;var p=this.rect.y;var t=this.rect.w;var o=this.rect.h;if("string"===typeof this.color){j.fillStyle=this.color;j.fillRect(r+5,p+5,t-10,o-10)}else{if(!this.gradientStyle){var k=this.color;var g=r;var s=p;var f=r+(k.x1<0?t:k.x1);var q=p+(k.y1<0?o:k.y1);this.gradientStyle=j.createLinearGradient(g,s,f,q);for(var m=0;m<k.data.length;m++){var l=k.data[m];this.gradientStyle.addColorStop(l.o,l.c)}}j.fillStyle=this.gradientStyle;j.fillRect(r+5,p+5,t-10,o-10)}return};this.measure=function(f){this.rect.w=32;this.rect.h=32;return};return}function x305(f,e,b){var j=null;var c=null;var h=64;c=x6(h);var d=new x172(f,c.rows,c.cols,40,40);var a=d.x138();for(var g=0;g<gSupportedColors.length;g++){j=new x60(a,0,0,0,0);j.x281(gSupportedColors[g]);j.x292(e);if(b&&g>=(h-gSupportedGradColors.length-1)){break}}if(b){for(var g=0;g<gSupportedGradColors.length;g++){j=new x60(a,0,0,0,0);j.x281(gSupportedGradColors[g]);j.x292(e)}}d.x277(10);d.x241();d.x303(1);return}function x103(){return window.atob("aHR0cDovL3d3dy41aWRyYXcuY29tCg==")}var gResHostName="";function idrawSetResHostName(a){gResHostName=a;return}function idrawGetHostName(){return gResHostName}function x101(){return idrawGetHostName()+"/diagram/images/"}function x102(a){return idrawGetHostName()+"/diagram/images/"+a}function drawingGetJsURL(a){return idrawGetHostName()+"/diagram/js/"+a}function x104(){return"Powered by 我爱画("+x103()+")"}var gEnableMultiPages=true;function idrawEnableMultiPages(a){gEnableMultiPages=a;return}function idrawGetEnableMultiPages(){return gEnableMultiPages}function milToPixel(a){return Math.floor(a*72/1000)}function milFromPixel(a){return Math.floor(a*1000/72)}function idrawLoadImages(){gGridImage=new x324(x102("grid.png"));gIDrawIconInfo=new x174(x102("idraw.png"),16,8,32,32);gImageIcon=new x324(x102("image.png"));return}function Storage(){this.openFile=function(a){return};this.saveFile=function(a){return};this.saveImage=function(a){return};return}function BrowserStorage(){this.openFile=function(e){var j="";if(isOldIE()){j=idrawGetText("You browser is too old, it does not support web storage, please paste content into the editor.")}var k='<form id="form_open" class="appnitro"  method="post" action=""> 			<p>'+j+'</p>			<label class="description" for="element_6">'+idrawGetText("Choose file name")+': </label> 			<select class="element select large" id="names" name="names"> </select> 			<textarea id="content" value="" rows="15" cols="48" ></textarea>			<center>			<input id="ok" class="button_ok" type="button" name="ok" value='+idrawGetText("OK")+' />			<input id="cancel" class="button_ok" type="button" name="cancel" value='+idrawGetText("Cancel")+" />			</center>			</form>";showDialog("Open...",k,480,480);var c=$("#form_open")[0];var l=c.names;if(localStorage.fileNames){var f=JSON.parse(localStorage.fileNames);var d=f.length;for(var h=0;h<d;h++){var a=f[h];var b=new Option(a,a);l.add(b)}a=f[0];var g=localStorage[a];c.content.value=g}c.names.onchange=function(p){var m=this.value;var o=localStorage[m];c.content.value=o;return};c.ok.onclick=function(m){var o=c.content.value;e.loadData(o);$("#idraw_dialog").dialog("close");return};c.cancel.onclick=function(m){$("#idraw_dialog").dialog("close");return};return};this.saveFile=function(d){var a="";if(isOldIE()){a=idrawGetText("You browser is too old, it does not support web storage, please copy the text and save it into file.")}var c='<form id="form_save" class="appnitro"  method="post" action="">			<p>'+a+'</p>			<label class="description" for="name">'+idrawGetText("Name")+':</label> 			<input id="name" name="name" class="element text large" type="text" maxlength="128" value="idraw.jso"/> 			<textarea id="content" value="" rows="15" cols="48" ></textarea>			<center>			<input id="ok" class="button_ok" type="button" name="ok" value='+idrawGetText("OK")+' />			<input id="cancel" class="button_ok" type="button" name="cancel" value='+idrawGetText("Cancel")+" />			</center>			</form>";showDialog("Save...",c,480,480);var b=$("#form_save")[0];b.content.value=d;b.ok.onclick=function(f){var g=b.name.value;if(!g){return}var e=null;if(!localStorage.fileNames){e=new Array()}else{e=JSON.parse(localStorage.fileNames)}e.remove(g);e.push(g);localStorage.fileNames=JSON.stringify(e);localStorage[g]=d;$("#idraw_dialog").dialog("close");return};b.cancel.onclick=function(e){$("#idraw_dialog").dialog("close");return};return};this.saveAsImage=function(a){window.open(a,"Save as image");return};return}function idrawUploadImage(b,e,a){var c=document.createElement("form");var f=document.createElement("input");var d=document.createElement("input");c.setAttribute("action",b);c.setAttribute("method","post");f.setAttribute("type","hidden");f.setAttribute("name","dataurl");f.setAttribute("value",e);d.setAttribute("type","hidden");d.setAttribute("name","filename");d.setAttribute("value",a);document.body.appendChild(c);c.appendChild(f);c.appendChild(d);c.submit();c.x264(f);c.x264(d);document.body.x264(c);return}function idrawGetLocalStorage(){if(!localStorage){localStorage=new Object()}return localStorage}function idrawLocalStorageSet(a,b){var c=idrawGetLocalStorage();c[a]=b;return}function idrawLocalStorageGet(a){var b=idrawGetLocalStorage();return b[a]}function idrawLocalStorageGetInt(a){var c=0;var b=idrawLocalStorageGet(a);if(b){c=parseInt(b)}return c}function FileStorage(){this.openFile=function(d){var c='<form id="form_open" class="appnitro"  method="post" action="">			<input id="fileselect" type="file"></input>			<textarea id="content" value="" rows="10" cols="45" ></textarea>			<center>			<input id="ok" class="button_ok" type="button" name="ok" value='+idrawGetText("OK")+' />			<input id="cancel" class="button_ok" type="button" name="cancel" value='+idrawGetText("Cancel")+" />			</center>			</form>";showDialog("Open...",c,460,320);var b=$("#form_open")[0];var a=new FileReader();a.onload=function(f){var e=f.target.result;b.content.value=e;return};a.onerror=function(e){b.content.value=idrawGetText("Read file failed. Please copy file content to here.");return};b.fileselect.onchange=function(){var e=b.fileselect.files[0];a.readAsText(e);return};b.ok.onclick=function(e){var f=b.content.value;d.loadData(f);$("#idraw_dialog").dialog("close");return};b.cancel.onclick=function(e){$("#idraw_dialog").dialog("close");return};return};this.saveFile=function(d){var c='<form id="form_save" class="appnitro"  method="post" action="">			<label class="description" for="name">'+idrawGetText("Name")+':</label> 			<input id="name" name="name" class="element text large" type="text" maxlength="128" value="idraw.jso"/> 			<textarea id="content" value="" rows="10" cols="45" ></textarea>			<center>			<input id="ok" class="button_ok" type="button" name="ok" value='+idrawGetText("OK")+' />			<input id="cancel" class="button_ok" type="button" name="cancel" value='+idrawGetText("Cancel")+" />			</center>			</form>";showDialog("Save...",c,460,320);var a=$("#form_save")[0];a.content.value=d;function b(){return window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder}a.ok.onclick=function(e){var g=b();var f=new g;f.append(d);saveAs(f.getBlob("text/plain;charset="+document.characterSet),a.name.value);$("#idraw_dialog").dialog("close");return};a.cancel.onclick=function(e){$("#idraw_dialog").dialog("close");return};return};this.saveAsImage=function(a){window.open(a,"Save as image");return};return}function idrawGetDefaultStorage(){if(browser.versions.webKit&&!isMobile()){return new FileStorage()}else{return new BrowserStorage()}}var x51=0;var x52=1;var x53=2;var x54=3;var x48=4;var x50=5;var x43=6;var x44=7;var x45=8;var x46=9;var x47=10;var x49=-1;var x9=1;var x11=2;var x12=3;var x7=4;var x8=5;var x10=6;var x14=7;var x13=8;var C_ALIGN_DIST_VER=9;var C_ALIGN_DIST_HOR=10;var x71=0;var x72=1;var x73=2;var x74=3;var C_SHAPE_TEXT_NONE=0;var C_SHAPE_TEXT_INPUT=1;var C_SHAPE_TEXT_TEXTAREA=2;function Shape(){this.textTitle="Text";return}Shape.prototype.findNear=function(a){return null};Shape.prototype.getTextCookie=function(a){return 0};Shape.prototype.editText=function(l){if(this.textType){var c=this.view.rect.x;var b=this.view.rect.y;var j=this.getX()+5+c;var k=this.x171();var d=this.x147();var a=this.getTextCookie(l);var f=this;var e=null;if(this.textType===C_SHAPE_TEXT_INPUT){var g=this.getY()+this.x147()/2+b;if(k>100){j=j+20;k=k-40}if(k<60){k=60}e=wtkShowInput(j,g,k,18)}else{var g=this.getY()+b;if(d<60){d=60}e=wtkShowTextArea(j,g,k,d)}e.x300(this.getText(a));e.element.onchange=function(){if(f.text!==this.value){f.exec(new x302(f,this.value,a));f.x262()}e.hide();return}}return};Shape.prototype.exec=function(a){if(this.app){this.app.exec(a)}return};Shape.prototype.setTextTitle=function(a){this.textTitle=a;return};Shape.prototype.initShape=function(a,e,b,c,d){this.w=b;this.h=c;this.dx=a;this.dy=e;this.x=0;this.y=0;this.id=d;this.text="";this.app=null;this.view=null;this.rotate=0;this.saveDx=0;this.saveDy=0;this.mouseDown=false;this.selected=false;this.hignlighted=false;this.state=x74;this.hitTestResult=x51;this.lastPosition=new Point(0,0);this.selectMarkPoint=new Point(0,0);this.style=new x105();this.setStyle(x93());this.textType=C_SHAPE_TEXT_INPUT;return};Shape.prototype.x297=function(a){this.state=a;return};Shape.prototype.setTextType=function(a){this.textType=a;return};Shape.prototype.isThisInRect=function(e){var c=false;var a=this.getX();var f=this.getY();var b=this.x171();var d=this.x147();if((a>=e.x&&a<(e.x+e.w))&&(f>=e.y&&f<(e.y+e.h))){c=true}return c};Shape.prototype.snapToGrid=function(a,d){var b=a;var c=d;if(this.view){return this.view.snapToGrid(a,d)}else{return{x:b,y:c}}};Shape.prototype.isClicked=function(){if(this.view){return this.view.isClicked()}return false};Shape.prototype.x176=function(){if(this.view){return this.view.x176()}return false};Shape.prototype.x177=function(){if(this.view){return this.view.x177()}return false};Shape.prototype.move=function(b,a){this.dx=b;this.dy=a;return};Shape.prototype.moveDelta=function(b,a){this.dx=this.dx+b;this.dy=this.dy+a;return};Shape.prototype.x171=function(){return this.w};Shape.prototype.x147=function(){return this.h};Shape.prototype.getX=function(){return this.dx};Shape.prototype.getY=function(){return this.dy};Shape.prototype.align=function(a,b){return};Shape.prototype.setRotatable=function(a){this.rotatable=a;return};Shape.prototype.setRotate=function(a){this.rotate=a%4;return};Shape.prototype.setStyle=function(a){this.style.copy(a);this.needRelayout=true;return};Shape.prototype.x300=function(b,a){a=a?a:0;switch(a){case 2:this.text2=b;break;case 3:this.text3=b;break;default:this.text=b}this.needRelayout=true;return};Shape.prototype.setText2=function(a){this.text2=a;return};Shape.prototype.setText3=function(a){this.text3=a;return};Shape.prototype.getText=function(a){a=a?a:0;switch(a){case 2:return this.text2;case 3:return this.text3;default:break}return this.text};Shape.prototype.setApp=function(a){this.app=a;return};Shape.prototype.setView=function(a){this.view=a;return};Shape.prototype.x262=function(a){if(this.view){}return};Shape.prototype.createSelectedMark=function(c,a,d,b){if(isMobile()){if(b){c.rect(a-20,d-20,40,40)}else{c.rect(a-15,d-15,30,30)}}else{if(b){c.rect(a-15,d-15,30,30)}else{c.rect(a-10,d-10,20,20)}}return};Shape.prototype.isInSelectedMark=function(c,b,d,a){c.beginPath();this.createSelectedMark(c,b,d);return c.isPointInPath(a.x,a.y)};Shape.prototype.paint=function(a){this.x259(a);if(this.near){var c=this.near.point;var b=isMobile()?20:8;a.beginPath();a.arc(c.x,c.y,4,0,Math.PI*2);a.fillStyle="Red";a.fill();a.beginPath();a.lineWidth=2;a.arc(c.x,c.y,b,0,Math.PI*2);a.strokeStyle="Black";a.stroke()}return};Shape.prototype.x259=function(a){return};Shape.prototype.setSelected=function(a){if(this.selected===a){return}this.selected=a;if(this.view){this.view.onShapeSelected(this)}return};Shape.prototype.isInNear=function(c){var d=null;var b={shape:this};for(var a=0;a<100;a++){d=this.getNearPoint(a);if(!d){break}if(x179(d,c)){b.point={x:d.x,y:d.y};return b}}return null};Shape.prototype.dup=function(){wtkLog("dup");return};Shape.prototype.hitTest=function(a){return x51};Shape.prototype.x251=function(a){this.mouseDown=true;this.hitTestResult=this.hitTest(a);if(!this.hitTestResult){return false}this.setSelected(true);this.lastPosition.x=a.x;this.lastPosition.y=a.y;this.handleMouseEvent(a,x32);return true};Shape.prototype.handleMouseEvent=function(a,b){return false};Shape.prototype.x252=function(a){if(this.hitTestResult){this.handleMouseEvent(a,x33);return true}return false};Shape.prototype.x253=function(a){if(this.hitTestResult){this.handleMouseEvent(a,x34);this.hitTestResult=x51;return true}this.mouseDown=false;return false};Shape.prototype.x249=function(a){wtkLog("x250 x316: code="+a);return};Shape.prototype.x250=function(a){wtkLog("x250 x316: code="+a);return};Shape.prototype.toJson=function(){return""};Shape.prototype.fromJson=function(a){return this};function splitText(a){a=a.replaceAll("\r\n","\n");a=a.replaceAll("\r","\n");return a.split("\n--\n")}function ShapeCreator(d,a,b,c){this.id=d;this.icon=b;this.name=a;this.visible=c;this.useCount=0;this.incUseCount=function(){this.useCount++;return};this.x182=function(){return this.visible};this.x150=function(){return this.id};this.x149=function(){return this.icon};this.x158=function(){return this.name};this.createIconShape=function(){if(!this.iconShape){this.iconShape=this.createShape()}return this.iconShape};this.createShape=function(e){return null};return}function ShapeFactory(){this.defaultCategory=null;this.creators=new Array();this.categories=new Object();this.categoryNames=new Array();this.diagramTypes=new Array();this.x282=function(a){this.defaultCategory=a;wtkLog("this.x282: defaultCategory="+a);return};this.getDiagramTypes=function(){return this.diagramTypes};this.addDiagramType=function(b,a){var c={name:b,defaultCategory:a};this.diagramTypes.push(c);return};this.removeCategoryName=function(a){this.categoryNames.remove(a);return};this.addShapeCreator=function(a,b){this.creators.push(a);if(b&&!this.defaultCategory){this.x282(b)}if(!b){if(b!==""){b="Generic"}}if(!this.categories[b]){this.categories[b]=new Array();this.categoryNames.push(b)}this.categories[b].push(a);return};this.x131=function(){return this.categoryNames};this.sortDefaultCategoryByUseCount=function(){var a=this.categories[this.defaultCategory];if(a&&a.length>30){a.sort(function(d,c){return c.useCount-d.useCount})}return};this.x139=function(){return this.categories[this.defaultCategory]};this.x110=function(a){return this.categories[a]};this.find=function(d){for(var a=0;a<this.creators.length;a++){var b=this.creators[a];if(b.x150()===d){return b}}return null};this.createShape=function(d,a){var b=this.find(d);if(b){b.incUseCount();return b.createShape(a)}else{return null}};return}var gShapeFactory=null;function ShapeFactoryGet(){if(!gShapeFactory){gShapeFactory=new ShapeFactory()}return gShapeFactory}function idrawSetDefaultCategory(a){return ShapeFactoryGet().x282(a)}function x239(c,b,a){this.dx=b;this.dy=a;this.shape=c;this.old_dx=c.dx;this.old_dy=c.dy;this.view=c.view;this.doit=function(){var d=c.snapToGrid(this.dx,this.dy);this.shape.move(d.x,d.y);this.view.x262();return};this.undo=function(){this.shape.move(this.old_dx,this.old_dy);this.view.x262();return};return}function MoveDeltaCommand(c,b,a){this.dx=b;this.dy=a;this.shape=c;this.view=c.view;this.doit=function(){this.shape.moveDelta(this.dx,this.dy);this.view.x262();return};this.undo=function(){this.shape.moveDelta(-this.dx,-this.dy);this.view.x262();return};return}function LineMoveCommand(b,c,a){this.shape=b;this.oldPoints=new Array();this.oldPoints.copy(c);this.newPoints=new Array();this.newPoints.copy(b.points);this.eanbleSnap=a;this.doit=function(){var f=null;for(var d=0;d<this.newPoints.length;d++){var e=this.newPoints[d];if(this.eanbleSnap){f=b.snapToGrid(e.x,e.y)}else{f=e}this.shape.updatePoint(d,f)}this.shape.x262();return};this.undo=function(){this.shape.points.copy(this.oldPoints);this.shape.x262();return};return}function x268(a,b){this.shape=a;this.rotate=b;this.old_rotate=a.rotate;this.view=a.view;this.doit=function(){this.shape.setRotate(this.rotate);this.view.x262();return};this.undo=function(){this.shape.setRotate(this.old_rotate);this.view.x262();return};return}function x267(b,a,c){this.shape=b;this.w=a;this.h=c;this.old_w=b.w;this.old_h=b.h;this.view=b.view;this.doit=function(){var d=b.snapToGrid(this.w,this.h);this.shape.resize(d.x,d.y);this.view.x262();return};this.undo=function(){this.shape.resize(this.old_w,this.old_h);this.view.x262();return};return}function x302(a,c,b){this.shape=a;this.text=c;this.cookie=b;this.old_text=a.getText(b);this.view=a.view;this.doit=function(){this.shape.x300(this.text,b);this.view.x262();return};this.undo=function(){this.shape.x300(this.old_text,b);this.view.x262();return};return}function x298(a,b){this.shape=a;this.style=b;this.old_style=a.style.dup();this.view=a.view;this.doit=function(){this.shape.setStyle(this.style);this.view.x262();return};this.undo=function(){this.shape.setStyle(this.old_style);this.view.x262();return};return}function x1(a,b){this.shape=b;this.view=a;this.doit=function(){this.view.addShape(this.shape);this.view.x262();return};this.undo=function(){this.view.removeShape(this.shape);this.view.x262();return};return}function x265(a,b){this.shape=b;this.view=a;this.doit=function(){this.view.removeShape(this.shape);this.view.x262();return};this.undo=function(){this.view.addShape(this.shape);this.view.x262();return};return}function x75(b,a){this.shapes=new Array();this.view=b;for(var c=0;c<a.length;c++){this.shapes.push(a[c])}this.doit=function(){for(var d=0;d<this.shapes.length;d++){this.view.removeShape(this.shapes[d])}this.view.x262();return};this.undo=function(){for(var d=0;d<this.shapes.length;d++){this.view.addShape(this.shapes[d])}this.view.x262();return};return}function x260(b,a){this.shapes=new Array();this.view=b;for(var c=0;c<a.length;c++){this.shapes.push(a[c].dup())}this.doit=function(){this.view.x273(false);for(var d=0;d<this.shapes.length;d++){var e=this.shapes[d];e.moveDelta(20,20);e.setSelected(true);this.view.addShape(e)}this.view.x262();return};this.undo=function(){for(var d=0;d<this.shapes.length;d++){this.view.removeShape(this.shapes[d])}this.view.x262();return};return}function CompositeShapeCommand(b,a){this.shapes=new Array();this.view=b;this.cg=null;for(var c=0;c<a.length;c++){var d=a[c];if(d.selected){this.shapes.push(d)}}this.doit=function(){this.cg=createCompositeShape();for(var e=0;e<this.shapes.length;e++){var f=this.shapes[e];this.cg.addShape(f);this.view.removeShape(f)}this.view.addShape(this.cg);this.view.x262();return};this.undo=function(){this.cg.removeAll();this.view.removeShape(this.cg);for(var e=0;e<this.shapes.length;e++){var f=this.shapes[e];this.view.addShape(f)}this.view.x262();return};return}function DecompositeShapeCommand(a,d){this.shapes=new Array();this.view=a;this.cg=d;for(var b=0;b<d.children.length;b++){var c=d.children[b];this.shapes.push(c)}this.doit=function(){this.cg.removeAll();this.view.removeShape(this.cg);for(var e=0;e<this.shapes.length;e++){var f=this.shapes[e];this.view.addShape(f)}this.view.x262();return};this.undo=function(){for(var e=0;e<this.shapes.length;e++){var f=this.shapes[e];this.cg.addShape(f);this.view.removeShape(f)}this.view.addShape(this.cg);this.view.x262();return};return}var gTextTable=null;var localeZH_CN={File:"文件",Edit:"编辑",Format:"格式",Insert:"插入",Arrange:"排列",Help:"帮助","More Help":"更多帮助","Wizard:":"使用向导:",Demo:"演示",Features:"介绍",New:"新建",Open:"打开",Save:"保存","Save As Image":"存为图片",Arrange:"排列",About:"关于",Copy:"拷贝",Cut:"剪切",Delete:"删除",Paste:"粘贴",Rotate:"旋转",Export:"导出",Undo:"撤销",Redo:"重做","Select All":"全选","Select None":"全不选",Generic:"通用","UML User Case Diagram":"UML用例图","UML Class Diagram":"UML类图","UML State Diagram":"UML状态图","UML Activity Diagram":"UML活动图","UML Sequence Diagram":"UML序列图","Align Left":"左对齐","Align Right":"右对齐","Align Top":"上对齐","Align Bottom":"下对齐","Align Middle":"上下居中","Align Center":"左右居中","To Same Width":"等宽","To Same Height":"等高","Distribute horizontally":"水平均匀分布","Distribute vertically":"垂直均匀分布","Move Up":"向上一层","Move Down":"向下一层",Group:"组合",Ungroup:"拆分",Content:"内容",Settings:"设置",Property:"属性","Line Style":"直线类型","First Arrow":"第一箭头类型","Second Arrow":"第二箭头类型","Arrow Size":"箭头大小",Introduction:"介绍",WeiBo:"微博","Home Page":"主页",Email:"邮件",Phone:"电话","About...":"关于...",OK:"确定",Cancel:"取消",Width:"宽度",Height:"高度","Grid Size":"网格大小","Show grid":"显示网格","Snap to grid":"吸附到网格",Bold:"粗体",Italic:"斜体",Underline:"下划线",Text:"文本",Expression:"表达式","Line Width":"线宽","Font Size":"字体大小","Fill Color":"背景颜色","Line Color":"线条颜色","Text Color":"文本颜色","Background Image URL":"图像URL","Do you want to save it before exit?":"退出前保存数据吗？","Settings...":"设置...","Property...":"属性...","Open...":"打开...","Save...":"保存...",Canvas:"画布",Shape:"图元","Maths Symbols":"数学公式",Chart:"统计图表",Numerator:"分子",Denominator:"分母",Subscript:"下标",Superscript:"指数",Blur:"模糊度",Color:"颜色","Enable gradient color":"启用渐变颜色","Enable shadow":"启用阴影效果","End Point":"结束位置",General:"常用",Gradient:"渐变效果",Offset:"偏移量","Package name":"包名","Class name":"类名",Shadow:"阴影","Start Point":"起始位置","X Offset":"X 偏移量","Y Offset":"Y 偏移量","Line color":"线条颜色","Fill color":"填充颜色","Text color":"文字颜色","Edit Text":"编辑文字",Name:"名称","Choose file name":"选择文件名称",Range:"范围",Unit:"单位",Data:"数据","X Grids":"X网格数","Y Grids":"Y网格数","X Title":"X标题","Y Title":"Y标题",Value:"数值",Title:"标题",Add:"增加",Exit:"退出","Exit...":"退出...",Yes:"是",No:"否","Zoom In":"放大","Zoom Out":"缩小","Flow Chart":"流程图",Arrows:"箭头",Page:"页面",Pages:"页面","New Page":"新建页面","Delete Page":"删除页面","Prev Page":"前一页","Next Page":"后一页","double click to edit text.":"双击编辑文字","Please select diagram type:":"请选择您想要画的图形:","5Idraw is a powerful, fast, free and easy to use web drawing tool.":"我爱画是一个功能强大、使用方便的Web画图工具，支持流程图、UML图、数学公式、统计图表和电路图等各种图形。而且您可以直接在博客、维基和论坛中绘制这些图形，不再需要截图上传的过程。","You browser is too old, it does not support web storage, please paste content into the editor.":"你的浏览器版本太老，不支持存储功能，请把文件内容粘贴到下面的编辑器中。","You browser is too old, it does not support web storage, please copy the text and save it into file.":"你的浏览器版本太老，不支持存储功能，请把编辑器中的内容保存到文件中。","eda basic":"基本元器件","3arrow-down":"箭头","3arrow-left":"箭头","3arrow-right":"箭头","3arrow-up":"箭头","4arrow":"箭头","arc-rect":"开始/结束","chart-xy-dot":"图表","chart-xy-fill":"图表","chart-xy-line":"图表","chart-xy-rect":"图表","chart-xy-vline":"图表",circle:"圆/椭圆",composite:"composite",curve:"曲线","dash-line-normal-arrow":"虚线箭头",diamond:"棱形","down-arrow":"箭头","hor-arrow":"水平箭头",image:"图像","left-arrow":"箭头","line-diamond-arrow":"箭头","line-fill-diamond-arrow":"箭头","h-line":"水平线","v-line":"垂直线",line:"直线","line-normal-arrow":"箭头","line-tri-arrow":"箭头","math-almost-equal":"约定符号","math-belong":"属于符号","math-division":"除号","math-ellipsis":"省略号","math-equal":"等号","math-exist":"存在符号","math-expr":"数学表达式","math-greate-equal":"大于等于符号","math-greate-greate":"远远大于符号","math-greate":"大于","math-hline":"水平线","math-infinite":"无穷符号","math-integral":"积分符号","math-intersection":"相交符号","math-l-brace":"中括号","math-l-bracket":"大括号","math-less-equal":"小于等于符号","math-less-less":"远远小于符号","math-less":"小于符号","math-line":"直线","math-l-parenthesis":"括号","math-multiplication":"求积符号","math-not-equal":"不等符号","math-r-brace":"中括号","math-r-bracket":"大括号","math-reason":"因为符号","math-result":"所以符号","math-r-parenthesis":"括号","math-sqrt":"根号","math-sub-script":"下标","math-sum":"求和","math-super-script":"上标","math-union":"并集","math-up-right":"垂直","math-vline":"垂直线","notes-callout":"标注","parall-rect":"平行四边形","rect-arrow-callout":"标注","rect-callout":"标注",rect:"长方形","right-arrow":"箭头","round-arrow-callout":"标注","round-callout":"标注","rounded-rect":"圆角四边形",segments:"线段","text-callout":"标注","tri-rect":"尖角四边形","uml-action":"动作","uml-activation":"激活","uml-active-object-killer":"销毁对象","uml-active-object":"活动对象","uml-activity-async-flow":"异步消息","uml-activity-flow":"活动流","uml-activity":"活动","uml-actor":"角色","uml-aggregation":"聚合","uml-assoc":"关联","uml-asyn-msg":"异步消息","uml-branch":"分支","uml-call":"调用","uml-class":"类","uml-composition":"组合","uml-dependency":"依赖","uml-direct_assoc":"直接关联","uml-final-activity":"活动结束","uml-generalization":"继承","uml-hour-glass":"定时器","uml-init-activity":"初始活动","uml-interface":"接口","uml-life-line":"生命线","uml-line-trans":"状态转换","uml-segments-trans":"状态转换","uml-segments-flow":"流","uml-curve-flow":"流","uml-object":"对象","uml-package":"包","uml-realization":"实现","uml-self-activation":"自我调用","uml-self-aggregation":"自我聚合","uml-signal-receipt":"信号接收","uml-signal-sending":"信号发送","uml-state-activity":"活动","uml-state-curve-trans":"状态转换","uml-state-end":"结束状态","uml-state-h-trans":"状态转换","uml-state-initial":"初始状态","uml-state":"状态","uml-state-v-trans":"状态转换","uml-swin-lane":"泳道","uml-sync-hbar":"同步","uml-sync-msg":"同步消息","uml-sync-vbar":"同步","uml-system-bounary":"系统边界","uml-user-case":"用例","up-arrow":"箭头","ver-arrow":"箭头","fc-process":"处理过程","fc-data":"数据","fc-decision":"分支","fc-start-end":"开始/结束","fc-stored-data":"数据库","fc-direct-data":"直接数据","fc-seq-access":"顺序访问","fc-manual-input":"手工输入","fc-document":"文档","Basic Shapes":"基本图形","uml-choice":"选择","uml-junction":"交汇点","uml-state-composite":"复合状态","uml-flow-end":"流结束","bus-vh":"Bus","net-hv":"Net","bus-hv":"Bus","net-vh":"Net"};var localeEn_US={"5Idraw is a powerful, fast, free and easy to use web drawing tool.":"5Idraw is a powerful, fast, free and easy to use web drawing tool.","About...":"About...",About:"About",Add:"Add","Align Bottom":"Align Bottom","Align Center":"Align Center","Align Left":"Align Left","Align Middle":"Align Middle","Align Right":"Align Right","Align Top":"Align Top","Distribute horizontally":"Distribute horizontally","Distribute vertically":"Distribute vertically",Arrange:"Arrange",Arrows:"Arrows","Arrow Size":"Arrow Size","Background Image URL":"Background Image URL",Blur:"Blur",Bold:"Bold",Cancel:"Cancel",Canvas:"Canvas",Chart:"Chart","Choose file name":"Choose file name","Class name":"Class name",Color:"Color",Content:"Content",Copy:"Copy",Cut:"Cut",Delete:"Delete",Data:"Data","Delete Page":"Delete Page",Demo:"Demo",Denominator:"Denominator","double click to edit text.":"double click to edit text.","Do you want to save it before exit?":"Do you want to save it before exit?","eda basic":"eda basic",Edit:"Edit","Edit Text":"Edit Text",Email:"Email","Enable gradient color":"Enable gradient color","Enable shadow":"Enable shadow","End Point":"End Point","Exit...":"Exit...",Exit:"Exit",Expression:"Expr",Features:"Features",File:"File","Fill color":"Fill color","Fill Color":"Fill Color","First Arrow":"First Arrow","Flow Chart":"Flow Chart","Font Size":"Font Size",Format:"Format",General:"General",Generic:"Generic",Shape:"Shape",Gradient:"Gradient","Grid Size":"Grid Size",Group:"Group",Height:"Height",Help:"Help","Home Page":"Home Page",Insert:"Insert",Introduction:"Introduction",Italic:"Italic","Line color":"Line color","Line Color":"Line Color","Line Style":"Line Style","Line Width":"Line Width","Maths Symbols":"Maths Symbols","More Help":"More Help","Move Down":"Move Down","Move Up":"Move Up",Name:"Name",New:"New","New Page":"New Page","Next Page":"Next Page",No:"No",Numerator:"Numerator",Offset:"Offset",OK:"OK","Open...":"Open...",Open:"Open","Package name":"Package name",Page:"Page",Pages:"Pages",Paste:"Paste",Rotate:"Rotate",Export:"Export",Phone:"Phone","Please select diagram type:":"Please select diagram type:","Prev Page":"Prev Page","Property...":"Property...",Property:"Property",Range:"Range",Redo:"Redo","Save As Image":"Save As Image","Save...":"Save...",Save:"Save","Second Arrow":"Second Arrow","Select All":"Select All","Select None":"Select None","Settings...":"Settings...",Settings:"Settings",Shadow:"Shadow","Show grid":"Show grid","Snap to grid":"Snap to grid","Start Point":"Start Point",Subscript:"Subscript",Superscript:"Superscript","Text color":"Text color","Text Color":"Text Color",Text:"Text",Title:"Title","To Same Height":"Same Height","To Same Width":"Same Width","UML Activity Diagram":"UML Activity Diagram","UML Class Diagram":"UML Class Diagram","UML Sequence Diagram":"UML Sequence Diagram","UML State Diagram":"UML State Diagram","UML User Case Diagram":"UML User Case Diagram",Underline:"Underline",Undo:"Undo",Ungroup:"Ungroup",Unit:"Unit",Value:"Value",WeiBo:"WeiBo",Width:"Width","Wizard:":"Wizard:","X Grids":"X Grids","X Offset":"X Offset","X Title":"X Title",Yes:"Yes","Y Grids":"Y Grids","Y Offset":"Y Offset","You browser is too old, it does not support web storage, please copy the text and save it into file.":"You browser is too old, it does not support web storage, please copy the text and save it into file.","You browser is too old, it does not support web storage, please paste content into the editor.":"You browser is too old, it does not support web storage, please paste content into the editor.","Y Title":"Y Title","Zoom In":"Zoom In","Zoom Out":"Zoom Out","3arrow-down":"Arrow","3arrow-left":"Arrow","3arrow-right":"Arrow","3arrow-up":"Arrow","4arrow":"Arrow","arc-rect":"Start/End","chart-xy-dot":"Chart","chart-xy-fill":"Chart","chart-xy-line":"Chart","chart-xy-rect":"Chart","chart-xy-vline":"Chart",circle:"Circle",composite:"composite",curve:"Curve","dash-line-normal-arrow":"Arrow",diamond:"Diamond","down-arrow":"Arrow","hor-arrow":"Arrow",image:"Image","left-arrow":"Arrow","line-diamond-arrow":"Arrow","line-fill-diamond-arrow":"Arrow",line:"Line","h-line":"Line","v-line":"Line","line-normal-arrow":"Arrow","line-tri-arrow":"Arrow","math-almost-equal":"Approximately Equal","math-belong":"Belong to","math-division":"Division","math-ellipsis":"Ellipsis","math-equal":"Equal","math-exist":"Exist","math-expr":"Expr","math-greate-equal":"Greate Equal","math-greate-greate":"Far Greate","math-greate":"Greate","math-hline":"Horizontal Line","math-infinite":"Infinite","math-integral":"Integral","math-intersection":"Intersection","math-l-brace":"Left Brace","math-l-bracket":"Left Bracket","math-less-equal":"Less Equal","math-less-less":"Far Less","math-less":"Less","math-line":"Line","math-l-parenthesis":"Left Parenthesis","math-multiplication":"Multiplication","math-not-equal":"Not Equal","math-r-brace":"Right Brace","math-r-bracket":"Right Bracket","math-reason":"Reason","math-result":"Result","math-r-parenthesis":"Right Parenthesis","math-sqrt":"Sqrt","math-sub-script":"Sub Script","math-sum":"Sum","math-super-script":"Super Script","math-union":"Union","math-up-right":"Up Right","math-vline":"Vertical Line","notes-callout":"Notes","parall-rect":"Parallelogram","rect-arrow-callout":"Callout","rect-callout":"Callout",rect:"Rectangle","right-arrow":"right-arrow","round-arrow-callout":"Callout","round-callout":"Callout","rounded-rect":"Rounded Rectangle",segments:"Segments","text-callout":"Callout","tri-rect":"tri-rect","uml-action":"Action","uml-activation":"Activation","uml-active-object-killer":"Destroy Object","uml-active-object":"Active Object","uml-activity-async-flow":"Async Flow","uml-activity-flow":"Flow","uml-activity":"Activity","uml-actor":"Actor","uml-aggregation":"Aggregation","uml-assoc":"Association","uml-asyn-msg":"Asyn Message","uml-branch":"Decision","uml-call":"uml-call","uml-class":"Class","uml-composition":"Composition","uml-dependency":"Dependency","uml-direct_assoc":"Direct Association","uml-final-activity":"Final Activity","uml-generalization":"Generalization","uml-hour-glass":"Hour Glass","uml-init-activity":"Initial Activity","uml-interface":"Interface","uml-life-line":"Life Line","uml-line-trans":"Transition","uml-segments-trans":"Transition","uml-segments-flow":"Flow","uml-curve-flow":"Flow","uml-object":"Object","uml-package":"Package","uml-realization":"Realization","uml-self-activation":"Self Activation","uml-self-aggregation":"Self Aggregation","uml-signal-receipt":"Signal Receipt","uml-signal-sending":"Signal Sending","uml-state-activity":"Activity","uml-state-curve-trans":"Transition","uml-state-end":"State End","uml-state-h-trans":"Transition","uml-state-initial":"State Initial","uml-state":"State","uml-state-v-trans":"Transition","uml-swin-lane":"Swin Lane","uml-sync-hbar":"Fork/Join","uml-sync-msg":"Sync Message","uml-sync-vbar":"Fork/Join","uml-system-bounary":"System Bounary","uml-user-case":"User Case","up-arrow":"Arrow","ver-arrow":"Arrow","fc-process":"Process","fc-data":"Data","fc-decision":"Decision","fc-start-end":"Start/End","fc-stored-data":"Stored Data","fc-direct-data":"Direct Data","fc-seq-access":"Sequencial Access","fc-manual-input":"Manual Input","fc-document":"Document","Basic Shapes":"Basic Shapes","uml-choice":"Choice","uml-junction":"Junction","uml-state-composite":"Composite State","uml-flow-end":"Flow End","bus-vh":"Bus","net-hv":"Net","bus-hv":"Bus","net-vh":"Net"};function dumpLocale(b){for(var a in b){wtkLog('"'+a+'":"'+a+'",')}return}function idrawGetText(b){var a=null;if(gTextTable){a=gTextTable[b]}if(!a){wtkLog('"'+b+'":"'+b+'",')}return a?a:b}function idrawSetLocale(a){gTextTable=a;return}function idrawGetLanguage(){var a="";if(navigator.language){a=navigator.language}else{if(navigator.userLanguage){a=navigator.userLanguage}}a=a.toLowerCase();wtkLog("Language:"+a);return a}function idrawGetDefaultLocale(){var a=idrawGetLanguage();if(a==="zh"||a==="zh-cn"){return localeZH_CN}return localeEn_US}idrawSetLocale(idrawGetDefaultLocale());function initColor(a,b){if(typeof b==="string"){a.value=b}else{a.value=JSON.stringify(b)}return}function x141(){return'<form id="form_exit" class="appnitro"  method="post" action="">		<p> '+idrawGetText("Do you want to save it before exit?")+'		<center>		<input id="myok" class="button_ok" type="button" name="myok" value='+idrawGetText("Yes")+' />		<input id="mycancel" class="button_ok" type="button" name="mycancel" value='+idrawGetText("No")+" />		</center>	</form>"}function x148(){return'		<table style="width: 400px; padding: 0; margin: 0;" cellspacing="0"> 		<tr> 		<td width="20%"class="title">'+idrawGetText("Ctrl+I")+"</td> 		<td >"+idrawGetText("Change the text of selected shapes to italic.")+'</td>		</tr> 		<tr> 		<td class="title">'+idrawGetText("Ctrl+B")+"</td> 		<td >"+idrawGetText("Change the text of selected shapes to blod.")+'</td>		</tr> 		<tr> 		<td class="title">'+idrawGetText("Ctrl+U")+"</td> 		<td >"+idrawGetText("Change the text of selected shapes to underline.")+'</td>		</tr> 		<tr> 		<td class="title">'+idrawGetText("Ctr++")+"</td> 		<td >"+idrawGetText("Increase line width of selected shapes.")+'</td>		</tr> 		<tr> 		<td class="title">'+idrawGetText("Ctr+-")+"</td> 		<td >"+idrawGetText("Decrease line width of selected shapes.")+'</td>		</tr> 		<tr> 		<td class="title">'+idrawGetText("+")+"</td> 		<td >"+idrawGetText("Increase font size of selected shapes.")+'</td>		</tr>		<tr> 		<td class="title">'+idrawGetText("-")+"</td> 		<td >"+idrawGetText("Decrease font size of selected shapes.")+'</td>		</tr> 		</table>		<center><a href="http://www.5idraw.com/category/doc/">'+idrawGetText("Visit out web site for more help.")+"</a></center>"}function x125(){return'		<table style="width: 400px; padding: 0; margin: 0;" cellspacing="0"> 		<tr> 		<td class="title">'+idrawGetText("Introduction")+'</td> 		<td width="100%">'+idrawGetText("5Idraw is a powerful, fast, free and easy to use web drawing tool.")+'</td>		</tr>		<tr> 		<td class="title">'+idrawGetText("Home Page")+'</td> 		<td><a href="http://www.5idraw.com">http://www.5idraw.com</a></td> 		</tr> 		<tr> 		<td class="title">'+idrawGetText("WeiBo")+'</td> 		<td><a href="http://weibo.com/u/2865463874">http://weibo.com/u/2865463874</a></td> 		</tr>		<tr> 		<td class="title">'+idrawGetText("Email")+'</td> 		<td><a href="mailto:5idraw.com@gmail.com">5idraw.com@gmail.com</a></td> 		</tr>		<tr> 		<td class="title">'+idrawGetText("Phone")+'</td>		<td><a href="call:15089120479">+86-15089120479</a></td> 		</tr>		</table><hr>		<center>		<input id="myok" class="button_ok" type="button" name="myok" value='+idrawGetText("OK")+" />		</center>"}function x166(){return'<form id="form_save" class="appnitro"  method="post" action="">		<textarea id="content" value="" rows="10" cols="45" ></textarea>		<center>		<input id="myok" class="button_ok" type="button" name="myok" value='+idrawGetText("OK")+' />		<input id="mycancel" class="button_ok" type="button" name="mycancel" value='+idrawGetText("Cancel")+" />		</center>	</form>"}function x159(){return'<form id="form_open" class="appnitro"  method="post" action="">		<input id="fileselect" type="file"></input>		<textarea id="content" value="" rows="10" cols="45" ></textarea>		<center>		<input id="myok" class="button_ok" type="button" name="myok" value='+idrawGetText("OK")+' />		<input id="mycancel" class="button_ok" type="button" name="mycancel" value='+idrawGetText("Cancel")+" />		</center>		</form>"}function x167(){return'<div id="tabs">		<ul>			<li><a href="#tabs-1">'+idrawGetText("Canvas")+'</a></li>			<li><a href="#tabs-2">'+idrawGetText("Shape")+'</a></li>			<li><a href="#tabs-3">'+idrawGetText("Shadow")+'</a></li>		</ul>		<div id="tabs-1">			<form id="form_settings" class="appnitro"  method="post" action="">					<label class="description" for="linewidth">'+idrawGetText("Width")+':</label>			<input id="width" name="width" class="element text small" type="number" maxlength="4" value="1024"/> 			<label class="description" for="fontsize">'+idrawGetText("Height")+':</label>					<input id="height" name="height" class="element text small" type="number" maxlength="4" value="768"/> 				<input id="showgrid" class="showgrid" name="showgrid" type="checkbox">'+idrawGetText("Show grid")+'</input>			<input id="snaptogrid" class="snaptogrid" name="snaptogrid" type="checkbox">'+idrawGetText("Snap to grid")+'</input>			<label class="description" for="element_7">'+idrawGetText("Fill Color")+' </label>			<select class="element select large" id="bg_color" name="bg_color" > </select> 			</form>			</div>		<div id="tabs-2">			<form id="form_shape_style" class="appnitro"  method="post" action="">					<label class="description" for="linewidth">'+idrawGetText("Line Width")+':</label>			<input id="linewidth" name="linewidth" class="element text small" type="number" maxlength="2" value="1"/> 			<label class="description" for="fontsize">'+idrawGetText("Font Size")+':</label>			<input id="fontsize" name="fontsize" class="element text small" type="number" maxlength="2" value="16"/> 			<label class="description" for="element_6">'+idrawGetText("Line Color")+':</label>			<input class="element large" id="fg_color" name="fg_color" /> 			<label class="description" for="element_7">'+idrawGetText("Fill Color")+':</label>			<input class="element large" id="bg_color" name="bg_color" /> 			<label class="description" for="element_8">'+idrawGetText("Text Color")+':</label>			<input class="element large" id="text_color" name="text_color" /> 			<input id="bold" class="checkbox_b" name="bold" type="checkbox" >'+idrawGetText("Bold")+'</input>			<input id="italic" class="checkbox_i" name="italic" type="checkbox" >'+idrawGetText("Italic")+'</input>			<input id="underline" class="checkbox_u" name="underline" type="checkbox">'+idrawGetText("Underline")+"</input>			</form>		</div>		"+x168(null,"tabs-3")+'	</div><form id="form_buttons"> 		<center>			<input id="myok" class="button_ok" type="button" name="myok" value='+idrawGetText("OK")+' />			<input id="mycancel" class="button_ok" type="button" name="mycancel" value='+idrawGetText("Cancel")+" />		</center>	</form>"}function x116(a,d,g,c,e){var b=parseInt(a.width.value);var k=parseInt(a.height.value);var j=a.bg_color.value;var h=a.showgrid.checked;var f=a.snaptogrid.checked;d.resizeView(b,k);g.x284(j);g.x285(h,f);d.saveCanvasSettings(j,h,f);return}function formShapeStyleSave(c,a){var d=c.linewidth.value;var g=c.fontsize.value;var m=c.fg_color.value;var k=c.bg_color.value;var e=c.text_color.value;var j=c.bold.checked;var l=c.underline.checked;var f=c.italic.checked;var h=c.view;var a=x93();a.setLineWidth(parseInt(d));a.setFontSize(parseInt(g));a.x291(m);a.x284(k);a.x301(e);a.setTextB(j);a.setTextI(f);a.setTextU(l);a.notify()}function x124(b,a){a.enableShadow=b.enable_shadow.checked;a.shadow.x=parseInt(b.xoffset.value);a.shadow.y=parseInt(b.yoffset.value);a.shadow.blur=parseInt(b.blur.value);a.shadow.color=b.color.value;return}function x115(c,a,b){x175(c.bg_color,a.fillColor);c.bg_color.value=a.fillColor;c.width.value=a.rect.w;c.height.value=a.rect.h;c.showgrid.checked=a.showGrid;c.snaptogrid.checked=a.snapGrid;return}function formShapeStyleLoad(b,a){initColor(b.fg_color,a.lineColor);initColor(b.bg_color,a.fillColor);initColor(b.text_color,a.textColor);b.fontsize.value=a.fontSize;b.linewidth.value=a.lineWidth;b.bold.checked=a.textB;b.underline.checked=a.textU;b.italic.checked=a.textI;return}function x123(c,b,a){c.enable_shadow.checked=b.enableShadow;c.xoffset.value=b.shadow.x;c.yoffset.value=b.shadow.y;c.blur.value=b.shadow.blur;c.color.value=b.shadow.color;x175(c.color,b.shadow.color);if(!a){return}c.enable_shadow.onchange=function(){a.style.enableShadow=this.checked;a.x262();return};c.xoffset.onchange=function(){a.style.shadow.x=parseInt(this.value);a.x262();return};c.yoffset.onchange=function(){a.style.shadow.y=parseInt(this.value);a.x262();return};c.blur.onchange=function(){a.style.shadow.blur=parseInt(this.value);a.x262();return};c.color.onchange=function(d){d.target.style.color=d.target.value;a.style.shadow.color=this.value;a.x262();return};return}function x312(f){showDialog("Settings...",x167(),600,500);$("#tabs").tabs();var a=f.view;var c=f.manager;var b=c.canvas;var d=x93();var e=$("#form_settings")[0];x115(e,a,b);e=$("#form_shape_style")[0];formShapeStyleLoad(e,d);e=$("#form_shadow")[0];x123(e,d);e=$("#form_buttons")[0];e.myok.onclick=function(h){var g=$("#form_settings")[0];x116(g,f,a,b,c);g=$("#form_shape_style")[0];formShapeStyleSave(g,d);g=$("#form_shadow")[0];x124(g,d);x270();$("#idraw_dialog").dialog("close");return};e.mycancel.onclick=function(g){$("#idraw_dialog").dialog("close");return};return}function x161(c,a,b){return x162(C_SHAPE_TEXT_INPUT,true,false)}function x169(d,c,a,e){a=a?a:"Text";var b='<label class="description" for="element_8">'+idrawGetText("Text Color")+' </label>	<input class="element large" id="text_color" name="text_color" /> 	<label class="description" for="fontsize">'+idrawGetText("Font Size")+':</label> 	<input id="fontsize" name="fontsize" class="element text small" type="number" maxlength="2" value="16"/> 	<label class="description" for="text">'+idrawGetText(a)+":</label>";if(d===C_SHAPE_TEXT_INPUT){b=b+'<input id="text" name="text" class="element text large" type="text" maxlength="128" value="Text"/>'}else{b=b+'<textarea cols="40" rows="4" id="text" name="text" >	</textarea>'}if(e){b=b+'<label class="description" for="text">'+idrawGetText(e)+":</label>";b=b+'<input id="text2" name="text2" class="element text large" type="text" maxlength="128" value="Text"/>'}if(c){b=b+'<input id="bold" class="checkbox_b" name="bold" type="checkbox" >'+idrawGetText("Bold")+'</input>		<input id="italic" class="checkbox_i" name="italic" type="checkbox" >'+idrawGetText("Italic")+'</input>		<input id="underline" class="checkbox_u" name="underline" type="checkbox">'+idrawGetText("Underline")+"</input>"}return b}function x153(){return'<label class="description" for="element_6">'+idrawGetText("Line Color")+': </label>		<input class="element large" id="fg_color" name="fg_color" />'}function x152(){return'<label class="description" for="text">'+idrawGetText("Background Image URL")+':</label>			<input id="imageUrl" name="imageUrl" class="element text large" type="text" maxlength="128" value=""/>'}function x143(){return'<form id="form_prop" class="appnitro"  method="post" action="">'}function x154(){return'<label class="description" for="linewidth">'+idrawGetText("Line Width")+':</label>		<input id="linewidth" name="linewidth" class="element text small" type="number" maxlength="2" value="1"/>'}function x142(){return'<label class="description" for="element_7">'+idrawGetText("Fill Color")+' </label>		<input class="element large" id="bg_color" name="bg_color"/>'}function x144(){return"</form>	"}function x145(e,b,c,a,f){var d=x143();d=d+x154();if(c){d=d+x152()}d=d+x153();if(b){d=d+x142()}if(e){d=d+x169(e,true,a,f)}d=d+x144();return d}function x162(e,b,c,a,f){var d='<div id="tabs">		<ul>			<li><a href="#tabs-1">'+idrawGetText("General")+'</a></li>			<li><a href="#tabs-2">'+idrawGetText("Shadow")+'</a></li>		</ul>		<div id="tabs-1">		'+x145(e,b,c,a,f)+" 		</div> 		"+x168(null,"tabs-2")+'	</div><form id="form_buttons"> 		<center>			<input id="myok" class="button_ok" type="button" name="myok" value='+idrawGetText("OK")+' />			<input id="mycancel" class="button_ok" type="button" name="mycancel" value='+idrawGetText("Cancel")+" />		</center>	</form>";return d}function x128(a){var b='<select class="element select large" name="'+a+'"> 			<option >arrow 1</option> 			<option >arrow 1</option> 			<option >arrow 1</option> 			</select>';return b}function x127(){var a='<select class="element select large" name="arrow_size"> 			<option >'+idrawGetText("Small")+"</option> 			<option >"+idrawGetText("Middle")+"</option> 			<option >"+idrawGetText("Large")+"</option> 			</select>";return a}function x163(c,a){var b=x143();b=b+x154();b=b+x153();if(c){b=b+x169(c,true,a)}b=b+'<form id="form_buttons"> 		<center>			<input id="myok" class="button_ok" type="button" name="myok" value='+idrawGetText("OK")+' />			<input id="mycancel" class="button_ok" type="button" name="mycancel" value='+idrawGetText("Cancel")+" />		</center>	</form>";b=b+x144();return b}function x160(){return x162(C_SHAPE_TEXT_TEXTAREA,true,false)}function x165(){return x162(C_SHAPE_TEXT_INPUT,true,false)}function x164(){return x162(C_SHAPE_TEXT_INPUT,true,true)}function showDialog(e,d,c,a){var b=getViewPort();var f=document.getElementById("idraw_dialog");if(c>b.width){c=b.width}if(a>b.height){a=b.height}if(!f){f=document.createElement("div");f.id="idraw_dialog";document.body.appendChild(f)}$("#idraw_dialog").dialog({title:idrawGetText(e),width:c,height:a});$("#idraw_dialog").dialog("open");if(f){f.innerHTML=d}return f}function x137(b){var c="<option>"+b+"</option>";var a=gSupportedColors;for(var d=0;d<a.length;d++){c=c+"<option >"+a[d]+"</option>"}return c}function x133(f,g,a,e){var j=f?f:"";var h=g?g:"";var c=a?a:"White";var b=e?e:"Black";var d='		<td><input style="width: 100px;" type="text" name="item_title" value="'+j+'"></input></td> 		<td><input style="width: 100px;" type="number" name="item_value" value="'+h+'"></input></td> 		<td> 			<select class="element select large" name="fill_color"> 			'+x137(c)+'			</select> 		</td> 		<td> 			<select class="element select large" name="line_color"> 			'+x137(b)+"			</select> 		</td> ";return d}function x134(b){var c=0;var e=0;var a="";var d=null;e=b.hasData()?b.data.items.length:0;for(c=0;c<e;c++){d=b.data.items[c];a=a+"<tr>"+x133(d.title,d.value,d.fillColor,d.lineColor)+"</tr>"}a=a+"<tr>"+x133(null,null,"White","Black")+"</tr>";return a}function x168(c,b){var d=0;var f=0;var a=2;var e='<div id="'+b+'">		<form id="form_shadow" class="appnitro"  method="post" action="">		<input id="enable_shadow" class="checkbox" name="enable_shadow" type="checkbox">'+idrawGetText("Enable shadow")+'</input>		<table id="table_shadow" style="width: 100%; padding: 0; margin: 0;" cellspacing="0">			<tr>				<td class="title">'+idrawGetText("X Offset")+':</td>				<td><input style="width: 100px;" type="number" name="xoffset" value="'+d+'"></input></td> 			</tr>			<tr>				<td class="title">'+idrawGetText("Y Offset")+':</td>				<td><input style="width: 100px;" type="number" name="yoffset" value="'+f+'"></input></td> 			</tr>			<tr>				<td class="title">'+idrawGetText("Blur")+':</td>				<td><input style="width: 100px;" type="number" name="blur" value="'+a+'"></input></td> 			</tr>			<tr>				<td class="title">'+idrawGetText("Color")+':</td>				<td> 					<select class="element select large" name="color"> 					</select> 				</td> 			</tr>		</table>		<br> 		</form>	</div>';return e}function x132(b){var a=b.yMin;var d=b.yMax;var c='<div id="tabs-2">		<form id="form_chart_data" class="appnitro"  method="post" action="">		<table id="table_range" style="width: 100%; padding: 0; margin: 0;" cellspacing="0">			<tr>				<td class="title">'+idrawGetText("Range")+':</td>				<td><input style="width: 100px;" type="number" name="y_min" value="'+a+'"></input></td> 				<td><input style="width: 100px;" type="number" name="y_max" value="'+d+'"></input></td> 			</tr>			<tr>				<td class="title">'+idrawGetText("Unit")+':</td>				<td><input style="width: 100px;" type="text" name="unit" value="'+b.unit+'"></input></td> 			</tr>		</table>		<br> 		<table id="table_data" border="2" style="width: 100%; padding: 0; margin: 0;" cellspacing="0">			<tr><td class="title">'+idrawGetText("Title")+'</td> 			<td class="title">'+idrawGetText("Value")+'</td> 			<td class="title">'+idrawGetText("Fill color")+'</td> 			<td class="title">'+idrawGetText("Line color")+"</td></tr>			"+x134(b)+'		</table>		<center>			<input id="add" class="button_ok" type="button" name="add" value='+idrawGetText("Add")+" />		</center>		</form>	</div>";return c}function x135(b){var d="";var c=false;var a=true;var e=C_SHAPE_TEXT_INPUT;d='<div id="chart_tabs">		<ul>			<li><a href="#tabs-1">'+idrawGetText("General")+'</a></li>			<li><a href="#tabs-2">'+idrawGetText("Data")+'</a></li>		</ul>		<div id="tabs-1">';d=d+x143()+x154();if(c){d=d+x152()}d=d+x153();if(a){d=d+x142()}if(e){d=d+x169(e)}d=d+'<label class="description" for="xgrids">'+idrawGetText("X Grids")+':</label>		<input id="xgrids" name="xgrids" class="element text small" type="number" maxlength="2" value="1"/> 		<label class="description" for="ygrids">'+idrawGetText("Y Grids")+':</label>         <input id="ygrids" name="ygrids" class="element text small" type="number" maxlength="2" value="1"/>';d=d+'<label class="description" for="xtitle">'+idrawGetText("X Title")+':</label> 		<input id="xtitle" name="xtitle" class="element text large" type="text" maxlength="128" value="X Title"/> 		<label class="description" for="ytitle">'+idrawGetText("Y Title")+':</label>         <input id="ytitle" name="ytitle" class="element text large" type="text" maxlength="128" value="Y Title"/>';d=d+x144();d=d+"</div>"+x132(b)+'	<form id="form_buttons"> 		<center>			<input id="myok" class="button_ok" type="button" name="myok" value='+idrawGetText("OK")+' />			<input id="mycancel" class="button_ok" type="button" name="mycancel" value='+idrawGetText("Cancel")+" />		</center>	</form> 	</div>";wtkLog(d);return d}function x309(b,c,a){x308(b,c,false,false,a);return}function formShapePropLoad(b,a){initColor(b.fg_color,a.style.lineColor);b.fg_color.onchange=function(c){a.style.x291(this.value);a.x262();c.target.style.color=c.target.value;return};if(b.bg_color){initColor(b.bg_color,a.style.fillColor);b.bg_color.onchange=function(c){a.style.x284(this.value);a.x262();c.target.style.color=c.target.value;return}}if(b.text_color){initColor(b.text_color,a.style.textColor);b.text_color.onchange=function(c){a.style.x301(this.value);a.x262();c.target.style.color=c.target.value;return}}if(b.imageUrl){b.imageUrl.value=a.imageUrl}b.view=a.view;b.shape=a;if(b.text){b.text.value=a.text;b.fontsize.value=a.style.fontSize;b.fontsize.onchange=function(){a.style.setFontSize(parseInt(this.value));a.x262();return};b.text.onchange=function(c){a.x300(this.value);a.x262();return}}if(b.underline){b.underline.checked=a.style.textU;b.underline.onchange=function(){a.style.setTextU(this.checked);a.x262();return}}if(b.italic){b.italic.checked=a.style.textI;b.italic.onchange=function(){a.style.setTextI(this.checked);a.x262();return}}if(b.bold){b.bold.checked=a.style.textB;b.bold.onchange=function(){a.style.setTextB(this.checked);a.x262();return}}if(b.text2){b.text2.value=a.text2}b.linewidth.value=a.style.lineWidth;b.linewidth.onchange=function(){a.style.setLineWidth(parseInt(this.value));a.x262();return};return}function formShapePropSave(d,h,a){var l=d.view;var e=d.linewidth.value;var r=d.fg_color.value;a.setLineWidth(parseInt(e));a.x291(r);if(d.text){var q=d.text.value;var j=d.fontsize.value;var f=d.text_color.value;var k=d.bold.checked;var p=d.underline.checked;var g=d.italic.checked;a.setFontSize(parseInt(j));a.x301(f);a.setTextB(k);a.setTextI(g);a.setTextU(p);d.shape.exec(new x302(d.shape,q))}if(d.text2){var c=d.text2.value;d.shape.setText2(c)}if(d.bg_color){var m=d.bg_color.value;a.x284(m)}if(d.imageUrl){var o=d.imageUrl.value;d.shape.x288(o)}return}function x308(g,j,e,d,c,f){var l=440;if(j===C_SHAPE_TEXT_INPUT){l+=60}else{if(j===C_SHAPE_TEXT_TEXTAREA){l+=100}}if(!c){c=g.textTitle}showDialog("Property...",x162(j,e,d,c,f),500,l);$("#tabs").tabs();var a=g.style;var k=JSON.stringify(g.toJson());var b=$("#form_prop")[0];var h=g.view;formShapePropLoad(b,g);b=$("#form_shadow")[0];x123(b,a,g);b=$("#form_buttons")[0];b.myok.onclick=function(q){var m=JSON.stringify(g.toJson());if(m!=k){var p=$("#form_prop")[0];var o=new x105();o.copy(g.style);g.fromJson(JSON.parse(k));formShapePropSave(p,g,o);p=$("#form_shadow")[0];x124(p,o);if(!g.style.equalTo(o)){g.view.x295(o)}}$("#idraw_dialog").dialog("close");return};b.mycancel.onclick=function(m){$("#idraw_dialog").dialog("close");g.fromJson(JSON.parse(k));g.x262()};return}function x118(a,h){var g=0;var c=0;var j=0;var k=0;var e=0;var m=0;var f=new Object();var d=a.elements.length;for(g=0;g<d;g++){var b=a.elements[g];if(b.name==="item_value"){if(b.value===null||b.value===""){break}c=c+1}}if(c<=0){return}f.items=new Array();f.yMin=parseInt(a.y_min.value);f.yMax=parseInt(a.y_max.value);f.unit=a.unit.value;for(g=0;g<c;g++){f.items[g]=new Object()}for(g=0;g<d;g++){var b=a.elements[g];if(b.name==="item_title"){if(j<c){f.items[j].title=b.value;j=j+1}}else{if(b.name==="item_value"){if(k<c){f.items[k].value=b.value;k=k+1}}else{if(b.name==="fill_color"){if(e<c){f.items[e].fillColor=b.value;e=e+1}}else{if(b.name==="line_color"){if(m<c){f.items[m].lineColor=b.value;m=m+1}}}}}}var l=JSON.stringify(f);h.setData(l);h.x262();return}function x120(b,f){var a=new x105();var h=b.view;a.copy(b.shape.style);var c=b.linewidth.value;var m=b.fg_color.value;a.setLineWidth(parseInt(c));a.x291(m);if(b.text){var l=b.text.value;var g=b.fontsize.value;var e=b.text_color.value;a.setFontSize(parseInt(g));a.x301(e)}if(b.bg_color){var j=b.bg_color.value;a.x284(j)}if(b.imageUrl){var k=b.imageUrl.value;b.shape.x288(k)}var d=new x62();d.x2(new x302(f,b.text.value,1));d.x2(new x302(f,b.xtitle.value,2));d.x2(new x302(f,b.ytitle.value,3));d.x2(new x298(f,a));f.exec(d);f.setGrids(parseInt(b.xgrids.value),parseInt(b.ygrids.value));f.x262();return}function x117(g,b){var e=0;var c=0;var h=g.elements.length;for(e=0;e<h;e++){var f=g.elements[e];if(f.localName==="select"){var a=f.options.length;for(c=0;c<a;c++){var d=f.options[c];d.style.backgroundColor=d.value}f.onchange=function(j){j.target.style.color=j.target.value}}}g.shape=b;g.add.onclick=function(l){var j=$("#table_data")[0];var k=document.createElement("tr");k.innerHTML=x133(null,null,"White","Black");j.appendChild(k)};return}function x119(b,a){formShapePropLoad(b,a);b.xgrids.value=a.xGrids;b.ygrids.value=a.yGrids;b.xtitle.value=a.getXTitle();b.ytitle.value=a.getYTitle();b.xgrids.onchange=function(f){var d=parseInt(this.value);var c=a.yGrids;a.setGrids(d,c);a.x262();return};b.ygrids.onchange=function(f){var c=parseInt(this.value);var d=a.xGrids;a.setGrids(d,c);a.x262();return};b.xtitle.onchange=function(c){a.setXTitle(this.value);a.x262();return};b.ytitle.onchange=function(c){a.setYTitle(this.value);a.x262();return};b.shape=a;return}function x304(a){showDialog("Property...",x135(a),600,640);$("#chart_tabs").tabs();var d=JSON.stringify(a.toJson());var b=a.style;var c=$("#form_prop")[0];x119(c,a);c=$("#form_chart_data")[0];x117(c,a);c=$("#form_buttons")[0];c.myok.onclick=function(f){c=$("#form_prop")[0];a.fromJson(JSON.parse(d));x120(c,a);c=$("#form_chart_data")[0];x118(c,a);$("#idraw_dialog").dialog("close");return};c.mycancel.onclick=function(f){$("#idraw_dialog").dialog("close");a.fromJson(JSON.parse(d));a.x262()};return}function DrawingApp(d,g,f){this.win=null;this.view=null;this.menu=null;idrawLoadImages();this.cmd_history=new x61();this.canvas=x16(d,g,f);this.manager=new x319(this,this.canvas);this.isInlineEdit=f?f:false;canvasAttachManager(this.canvas,this.manager);var c=this.canvas.getAttribute("data");var e=this.canvas.getAttribute("src");wtkLog("data:"+c);wtkLog("src:"+e);if(c){var b=c.value?c.value:c;wtkLog("json:"+b);this.display(b)}else{if(e){var a=e.value?e.value:e;wtkLog("url:"+a);this.loadURL(a)}}return}DrawingApp.prototype.onShapeSelected=function(a){return};DrawingApp.prototype.hideContextMenu=function(){if(this.singleShapeContextMenu){this.singleShapeContextMenu.show(false)}return};DrawingApp.prototype.updateContextMenu=function(){var b=this.view.countShape(true);if(this.multiShapeContextMenu){this.multiShapeContextMenu.show(b>1)}if(this.singleShapeContextMenu){if(b===1){var a=this.view.getSelectedShape();showSingleShapeContextMenu(this,this.singleShapeContextMenu,a)}else{this.singleShapeContextMenu.show(false)}}return};DrawingApp.prototype.resize=function(a,b){var c=this.menu?this.menu.rect.h:0;if(this.win){this.win.resize(a,b)}if(this.menu){this.menu.resize(a,c)}if(this.view){this.view.resize(a,b-c);this.view.x262()}return};DrawingApp.prototype.edit=function(a){var b=wtkShowInput(0,0,10,10);this.start(false,a);var c=this.manager;this.view.x248=function(d){setTimeout(x307(this,c.lastMousePoint),10);return false};document.oncontextmenu=function(d){return false};b.hide();return};DrawingApp.prototype.editInline=function(a,b){this.isInlineEdit=true;this.edit(a);this.setStorage(b);window.app=this;window.canvas=this.canvas;window.onresize=function(e){var d=this.canvas.width;var c=this.canvas.height;x18(this.canvas);this.app.resize(d,c);this.app.manager.resize(d,c);wtkLog("window.onresize: width="+d+" height="+c);return true};return};DrawingApp.prototype.display=function(a){this.start(true,a);var b=this.manager;this.view.x248=function(c){setTimeout(x306(this,b.lastMousePoint),10);wtkLog("x248");return false};document.oncontextmenu=function(c){c=c?c:window.event;canvas=c.target?c.target:c.srcElement;if(canvas.manager){return false}else{return true}};return};DrawingApp.prototype.start=function(e,c){var b=0;var j=0;var d=this.canvas.width;var f=this.canvas.height;this.win=new x318(this.manager,0,0,d,f);this.win.theme[0].bg="Gray";if(!e){var g=d;var a=f;this.menu=x65(this.win,this);j=this.menu.rect.h;g=d;a=f-this.menu.rect.h;if(!(this.isInlineEdit||isMobile())){if(g>800){g=g*0.8}if(a>600){a=a*0.9}}b=(d-g)/2;j=(f-this.menu.rect.h-a)/3+this.menu.rect.h;b=Math.floor(b/10)*10;j=Math.floor(j/10)*10;g=Math.floor(g/10)*10;a=Math.floor(a/10)*10;this.view=new DrawingEditView(this.win,b,j,g,a);this.toolbar=createDrawingToolbar(this.win,this);this.multiShapeContextMenu=createMultiShapeContextMenu(this.win,this,j+5);this.singleShapeContextMenu=createSingleShapeContextMenu(this.win,this);this.loadCanvasSettings();x183()}else{this.view=new DrawingView(this.win,b,j,d,f);this.view.x276(true)}this.storage=idrawGetDefaultStorage();this.win.x300("Lite Drawing");this.view.x184(c);this.win.x303(1);this.manager.x262();this.win.app=this;this.win.x5=function(l){var k=this.app.manager.w;var m=this.app.manager.h;if(k!==this.rect.w||m!==this.rect.h){this.app.resize(k,m);wtkLog("Canvas: width="+k)}};if(this.multiShapeContextMenu){this.multiShapeContextMenu.show(false)}if(this.singleShapeContextMenu){this.singleShapeContextMenu.show(false)}return};DrawingApp.prototype.resizeView=function(f,b){var a=0;var h=0;var c=0;var e=0;var g=getViewPort();wtkLog("resizeView: viewW="+g.width+" viewH="+g.height);f=f<100?100:f;b=b<100?100:b;f=f>2000?2000:f;b=b>2000?2000:b;c=f>g.width?f:g.width;e=b>g.height?b:g.height;if(e<(b+this.menu.rect.h)){e=b+this.menu.rect.h}a=(c-f)/2;var d=e-b;if(d>100){h=(d+this.menu.rect.h)/2}else{h=this.menu.rect.h}c=e>g.height?c-20:c;this.canvas.width=c;this.canvas.height=e;this.manager.resize(c,e);this.win.resize(c,e);this.view.move(a,h);this.view.resize(f,b);this.view.x262();wtkLog("resizeView: canvasW="+c+" canvasH="+e);return};DrawingApp.prototype.shouldFixPosition=function(){return this.manager.eventLogging||this.manager.eventReplaying};DrawingApp.prototype.prepareEventRecord=function(){if(this.manager.eventLogging){this.view.reset()}if(this.shouldFixPosition()){this.toolbar.defaultCategory=null;this.toolbar.reload()}return};DrawingApp.prototype.eventReplay=function(b,a){if(!b||!a){return}this.view.reset();this.manager.replayEvents(a);ShapeFactoryGet().x282(b);this.toolbar.defaultCategory=null;this.toolbar.reload();return};DrawingApp.prototype.loadCanvasSettings=function(){if(!localStorage.canvasBgColor){localStorage.canvasBgColor="white"}this.view.x284(localStorage.canvasBgColor);if(!localStorage.canvasShowGrid){localStorage.canvasShowGrid="true";localStorage.canvasSnapGrid="false"}this.view.x285(localStorage.canvasShowGrid==="true",localStorage.canvasSnapGrid==="true");return};DrawingApp.prototype.saveCanvasSettings=function(a,b,c){localStorage.canvasBgColor=null;localStorage.canvasShowGrid=null;localStorage.canvasSnapGrid=null;localStorage.canvasBgColor=a;localStorage.canvasShowGrid=b;localStorage.canvasSnapGrid=c;return};DrawingApp.prototype.exec=function(a){this.cmd_history.exec(a);return};DrawingApp.prototype.onNew=function(){this.view.reset();this.cmd_history.clear();showNormalWizard(this);this.updateContextMenu();return};DrawingApp.prototype.onOpen=function(){try{this.storage.openFile(this)}catch(a){wtkLog("Open file failed: "+a.message)}this.updateContextMenu();return};DrawingApp.prototype.saveTemp=function(){var a=this.view.x269();localStorage.tempSave=a;return};DrawingApp.prototype.loadTemp=function(){var a=localStorage.tempSave;if(isFirstTime()){if(gHadRegisterBasic&&!this.isInlineEdit){a=gIDrawFeatures}}this.view.x184(a);return};DrawingApp.prototype.onClose=function(){if(this.storage&&this.storage.close){this.storage.close()}return};DrawingApp.prototype.onSave=function(){var b=this.view.x269();try{if(this.storage.save){this.storage.save(b,this.getImageUrl())}else{if(this.storage.saveFile){this.storage.saveFile(b)}}}catch(a){wtkLog("Save data failed: "+a.message)}return};DrawingApp.prototype.getImageUrl=function(){var c=null;try{var d=1;var b=null;var o=this.view.rect.x;var l=this.view.rect.y;var p=this.view.rect.w;var f=this.view.rect.h;var k=p;var g=f;if(this.storage){if(this.storage.imageWidth){k=this.storage.imageWidth}if(this.storage.imageHeight){g=this.storage.imageHeight}}d=Math.min(k/p,g/f);if(isOldIE()){b=this.canvas}else{b=document.createElement("canvas")}b.width=p*d;b.height=f*d;var a=b.getContext("2d");this.view.x273(false);a.save();a.scale(d,d);a.translate(-o,-l);var m=this.view.showGrid;this.view.showGrid=false;this.view.draw(a);this.view.showGrid=m;a.restore();c=b.toDataURL("image/png");if(isOldIE()){this.canvas.width=p;this.canvas.height=f}this.view.x262();wtkLog("imageWidth: "+k+" imageHeight:"+g)}catch(j){wtkLog("Save as image failed: "+j.message)}return c};DrawingApp.prototype.onSaveAsImage=function(){try{var b=this.getImageUrl();this.storage.saveAsImage(b)}catch(a){wtkLog("Save as image failed: "+a.message)}return};DrawingApp.prototype.onPrint=function(){return};DrawingApp.prototype.onUndo=function(){this.cmd_history.undo();return};DrawingApp.prototype.onRedo=function(){this.cmd_history.redo();return};DrawingApp.prototype.onCut=function(){this.view.cut();this.updateContextMenu();return};DrawingApp.prototype.onDelete=function(){this.view.cut();this.updateContextMenu();return};DrawingApp.prototype.onEditText=function(){this.view.editText();return};DrawingApp.prototype.onShowProperty=function(){this.view.x310();return};DrawingApp.prototype.onShowSettings=function(){this.view.x311();return};DrawingApp.prototype.onPaste=function(){this.view.paste();return};DrawingApp.prototype.onCopy=function(){this.view.copy();return};DrawingApp.prototype.onSelectAll=function(){this.view.x273(true);this.updateContextMenu();return};DrawingApp.prototype.onSelectNone=function(){this.view.x273(false);this.updateContextMenu();return};DrawingApp.prototype.onDrawShape=function(c){this.view.lastShapeID=c;var a=this.view.lastMousePosition;var b=ShapeFactoryGet().createShape(c,null);this.cmd_history.exec(new x1(this.view,b));this.toolbar.reload();return};DrawingApp.prototype.onAlignDistVer=function(){this.view.align(C_ALIGN_DIST_VER);return};DrawingApp.prototype.onAlignDistHor=function(){this.view.align(C_ALIGN_DIST_HOR);return};DrawingApp.prototype.onAlignLeft=function(){this.view.align(x9);return};DrawingApp.prototype.onAlignRight=function(){this.view.align(x11);return};DrawingApp.prototype.onAlignTop=function(){this.view.align(x12);return};DrawingApp.prototype.onAlignBottom=function(){this.view.align(x7);return};DrawingApp.prototype.onAlignCenter=function(){this.view.align(x8);return};DrawingApp.prototype.onAlignMiddle=function(){this.view.align(x10);return};DrawingApp.prototype.onToSameWidth=function(){this.view.align(x14);return};DrawingApp.prototype.onToSameHeight=function(){this.view.align(x13);return};DrawingApp.prototype.onMoveUp=function(){this.view.x242();return};DrawingApp.prototype.foreachSelectedShapeStyle=function(a){this.view.foreachSelectedShapeStyle(a);return};DrawingApp.prototype.onMoveDown=function(){this.view.x240();return};DrawingApp.prototype.onGroup=function(){this.view.composite();this.updateContextMenu();return};DrawingApp.prototype.onUngroup=function(){this.view.decomposite();this.updateContextMenu();return};DrawingApp.prototype.setStorage=function(b){var a=this.storage;this.storage=b;if(a){if(!this.storage.openFile){this.storage.openFile=a.openFile}if(!this.storage.saveImage){this.storage.saveImage=a.saveImage}}return};DrawingApp.prototype.loadData=function(a){return this.view.x184(a)};DrawingApp.prototype.loadURL=function(a){var c=createXMLHTTTPRequest();var b=this;if(c){c.open("GET",a,true);c.send(null);if(!c.onprogress){c.onreadystatechange=function(){if(c.readyState===4){var d=c.responseText;wtkLog(d);b.display(d)}wtkLog("onreadystatechange:"+c.readyState);return}}else{c.onprogress=function(f){var d=f.total;wtkLog("get:"+d)};c.onload=function(f){var d=f.target.responseText;b.display(d);wtkLog(f)};c.onerror=function(d){wtkLog("error")}}}};function idrawView(a){var b=new DrawingApp(a,0);return b}var gDrawingAppEditor=null;function idrawEditJson(a,b){if(!gDrawingAppEditor){gDrawingAppEditor=new DrawingApp(a,1);x278(true)}gDrawingAppEditor.edit(b);return gDrawingAppEditor}function idrawEdit(a){if(!gDrawingAppEditor){gDrawingAppEditor=new DrawingApp(a,1,false);gDrawingAppEditor.edit();if(isFirstTime()){showFirstWizard(gDrawingAppEditor)}else{gDrawingAppEditor.loadTemp()}x278(true)}return gDrawingAppEditor}function idrawEditInline(a,b,d,c){if(!gDrawingAppEditor){gDrawingAppEditor=new DrawingApp(a,c,true);gDrawingAppEditor.editInline(b,d);x278(true)}return gDrawingAppEditor}var idrawViewAllCalled=false;function idrawViewAll(b){var d=b?b:"idraw_canvas";var e=document.getElementsByTagName("canvas");if(idrawViewAllCalled){wtkLog("idrawViewAllCalled");return}for(var c=0;c<e.length;c++){var a=e[c];if(a.getAttribute("name")===d){wtkLog("idrawViewAll: id="+a.id);idrawView(a)}}drawViewAllCalled=true;return}var x55=(255<<8)|0;var x56=(2<<8)|4;var x57=(4<<8)|4;var x58=(8<<8)|8;var x59=(10<<8)|10;function x105(){this.lineStyle=65280;this.lineWidth=2;this.lineColor="Orange";this.fillColor="White";this.textColor="Blue";this.fontSize=24;this.arrowSize=12;this.firstArrowType=0;this.secondArrowType=0;this.textB=0;this.textI=0;this.textU=0;this.enableShadow=false;this.shadow={x:2,y:2,blur:15,color:"black"};this.enableGradient=false;this.listener=null;return}x105.prototype.getFont=function(){var a="";if(this.textI){a="italic  "}if(this.textB){a=a+"bold "}a=a+this.fontSize+"px serif";return a};x105.prototype.x292=function(a){this.listener=a;return};x105.prototype.notify=function(){if(this.listener){this.listener.x295(this)}return};x105.prototype.setLineStyle=function(a){this.lineStyle=a;return};x105.prototype.setLineWidth=function(a){this.lineWidth=a>0?a:1;return};x105.prototype.x291=function(a){this.lineColor=a;return};x105.prototype.x284=function(a){if("string"!=typeof a){this.fillColor=a;this.enableGradient=true}else{if(a.length>7){this.fillColor=JSON.parse(a);this.enableGradient=true}else{this.fillColor=a}}return};x105.prototype.x301=function(a){this.textColor=a;return};x105.prototype.setFontSize=function(a){this.fontSize=a>6?a:6;return};x105.prototype.setFirstArrowType=function(a){this.firstArrowType=a;return};x105.prototype.setSecondArrowType=function(a){this.secondArrowType=a;return};x105.prototype.setArrowSize=function(a){this.arrowSize=a;return};x105.prototype.setTextB=function(a){this.textB=a;return};x105.prototype.setTextU=function(a){this.textU=a;return};x105.prototype.setTextI=function(a){this.textI=a;return};x105.prototype.setShadow=function(a,b){this.enableShadow=a;this.shadow=b;return};x105.prototype.getStrokeStyle=function(a){var b=this.strokeColor;return b};x105.prototype.getGradFillStyle=function(c,m,k,p,g){var d=this.fillColor;var b=m;var o=k;var a=m+(d.x1<0?p:d.x1);var l=k+(d.y1<0?g:d.y1);if(isNaN(a)||isNaN(l)||isNaN(b)||isNaN(o)){wtkLog("Illegal params.");return"White"}var j=c.createLinearGradient(b,o,a,l);for(var f=0;f<d.data.length;f++){var e=d.data[f];j.addColorStop(e.o,e.c)}return j};x105.prototype.copy=function(a){var b=a.toJson();this.fromJson(b);return};x105.prototype.toJson=function(){var a=new Object();a.ls=this.lineStyle;a.lw=this.lineWidth;a.lc=this.lineColor;a.fc=this.fillColor;a.tc=this.textColor;a.fs=this.fontSize;a.fat=this.firstArrowType;a.sat=this.secondArrowType;a.as=this.arrowSize;a.b=this.textB;a.i=this.textI;a.u=this.textU;a.es=this.enableShadow;if(this.enableShadow){a.shadow=this.shadow}a.eg=this.enableGradient;return a};x105.prototype.fromJson=function(a){this.lineStyle=a.ls;this.lineWidth=a.lw;this.lineColor=a.lc;this.fillColor=a.fc;this.textColor=a.tc;this.fontSize=a.fs;this.arrowSize=a.as;this.firstArrowType=a.fat;this.secondArrowType=a.sat;this.textB=a.b;this.textI=a.i;this.textU=a.u;this.enableShadow=a.es;if(this.enableShadow){this.shadow=a.shadow}this.enableGradient=a.eg;if(this.enableGradient){this.x284(this.fillColor)}return};x105.prototype.dup=function(){var a=new x105();a.copy(this);return a};x105.prototype.equalTo=function(c){var b=JSON.stringify(this.toJson());var a=JSON.stringify(c.toJson());return b===a};var gDrawingStyle=null;function x93(){if(gDrawingStyle){return gDrawingStyle}gDrawingStyle=new x105();return gDrawingStyle}function x270(){var a=x93();var b=a.toJson();localStorage.style=JSON.stringify(b);return}function x183(){var a=false;var b=x93();if(localStorage.style){var c=JSON.parse(localStorage.style);b.fromJson(c);a=true}return a}var gIconShapeStyle=null;function getIconShapeStyle(){if(!gIconShapeStyle){gIconShapeStyle=new x105();gIconShapeStyle.setLineWidth(1);gIconShapeStyle.setFontSize(12);gIconShapeStyle.x291("Black");gIconShapeStyle.x284("White");gIconShapeStyle.x301("Black")}return gIconShapeStyle}function LShape(){return}LShape.prototype=new Shape();LShape.prototype.initDefault=function(){return};LShape.prototype.isLine=true;LShape.prototype.setOptions=function(b,c,a,d){this.firstArrowUnchangable=b;this.secondArrowUnchangable=c;this.lineStyleUnchangable=a;this.arrowSizeUnchangable=d;return};LShape.prototype.setStyle=function(d){var e=this.style.firstArrowType;var c=this.style.secondArrowType;var a=this.style.lineStyle;var b=this.style.arrowSize;this.style.copy(d);this.needRelayout=true;if(this.firstArrowUnchangable){this.style.setFirstArrowType(e)}if(this.secondArrowUnchangable){this.style.setSecondArrowType(c)}if(this.lineStyleUnchangable){this.style.setLineStyle(a)}if(this.arrowSizeUnchangable){this.style.setArrowSize(b)}return};LShape.prototype.x171=function(){var c=this.points[0].x;var a=this.points[0].x;for(var b=0;b<this.points.length;b++){var d=this.points[b];if(c>d.x){c=d.x}if(a<d.x){a=d.x}}return a-c};LShape.prototype.x147=function(){var c=this.points[0].y;var a=this.points[0].y;for(var b=0;b<this.points.length;b++){var d=this.points[b];if(c>d.y){c=d.y}if(a<d.y){a=d.y}}return a-c};LShape.prototype.getX=function(){var a=this.points[0].x;for(var b=0;b<this.points.length;b++){var c=this.points[b];if(a>c.x){a=c.x}}return a};LShape.prototype.getY=function(){var c=this.points[0].y;for(var a=0;a<this.points.length;a++){var b=this.points[a];if(c>b.y){c=b.y}}return c};LShape.prototype.updatePoint=function(b,a){return false};LShape.prototype.isPointInThis=function(b,a){return false};LShape.prototype.saveState=function(){if(!this.savePoints){this.savePoints=new Array()}this.savePoints.copy(this.points);return};LShape.prototype.findNear=function(a){this.near=null;if(this.view){var b={x:a.x-20,y:a.y-20,w:40,h:40};this.near=this.view.findNear(this,b)}return this.near};LShape.prototype.getNearPoint=function(a){if(a<this.points.length){return this.points[a]}return null};LShape.prototype.initLShape=function(d,f){this.points=new Array();this.savePoints=new Array();this.initDefault();var a=this.getX();var e=this.getY();var b=this.x171();var c=this.x147();this.initShape(a,e,b,c,f);if(d){this.points.copy(d);this.state=x74}else{this.state=x71}this.style.setLineWidth(2);return};LShape.prototype.x251=function(a){this.mouseDown=true;this.lastPosition.copy(a);if(this.state===x74){this.hitTestResult=this.hitTest(a)}this.setSelected(this.hitTestResult);this.handleMouseEvent(a,x32);this.x262();this.saveState();return this.hitTestResult};LShape.prototype.move=function(a,d){var c=a-this.getX();var b=d-this.getY();this.moveDelta(c,b);return};LShape.prototype.moveDelta=function(b,a){for(var c in this.points){this.points[c].x+=b;this.points[c].y+=a}return};LShape.prototype.isPointInSegment=function(b,f,c,h){if(!f||!c){return}var g=false;var e=10;var k=c.x-f.x;var j=c.y-f.y;var a=Math.sqrt(k*k+j*j);var d=Math.atan(j/k);b.save();b.translate((f.x+c.x)/2,(f.y+c.y)/2);b.rotate(d);b.beginPath();b.rect(-a/2,-e,a,2*e);b.restore();g=b.isPointInPath(h.x,h.y);b.beginPath();return g};LShape.prototype.x252=function(a){var d=true;if(this.state===x74){if(this.hitTestResult){if(this.hitTestResult===x49){var c=a.x-this.lastPosition.x;var b=a.y-this.lastPosition.y;this.moveDelta(c,b)}else{this.findNear(a);this.updatePoint(this.hitTestResult-1,a)}this.x262()}}else{this.findNear(a)}this.handleMouseEvent(a,x33);this.lastPosition.copy(a);return this.hitTestResult};LShape.prototype.x253=function(a){this.handleMouseEvent(a,x34);this.lastPosition.copy(a);this.x262();this.mouseDown=false;if(this.hitTestResult>0&&this.near){this.updatePoint(this.hitTestResult-1,this.near.point)}this.hitTestResult=x51;this.exec(new LineMoveCommand(this,this.savePoints,!this.near));this.near=null;return this.hitTestResult};LShape.prototype.resize=function(a,b){return};LShape.prototype.translate=function(a){a.translate(this.dx,this.dy);return};LShape.prototype.drawSelectMarks=function(b){if(this.selected){b.beginPath();b.lineWidth=1;b.shadowColor=null;b.strokeStyle=this.style.lineColor;for(var c=0;c<this.points.length;c++){var d=this.points[c];var a=(c===(this.hitTestResult-1));this.createSelectedMark(b,d.x,d.y,a)}b.stroke();b.beginPath()}return};LShape.prototype.drawTips=function(a){if((this.selected&&this.mouseDown)){a.fillStyle=this.style.lineColor;for(var b=0;b<this.points.length;b++){var c=this.points[b];var d=Math.floor(c.x)+"x"+Math.floor(c.y);a.font="14px serif";a.textAlign="center";a.textBaseline="bottom";a.fillText(d,c.x,c.y,100)}}return};LShape.prototype.hitTest=function(a){var c=x51;var b=this.view.x130();b.save();this.translate(b);if(this.selected){for(var d=0;d<this.points.length;d++){var e=this.points[d];if(this.isInSelectedMark(b,e.x,e.y,a)){b.restore();return d+1}}if(this.isPointInThis(b,a)){c=x49}}else{if(this.isPointInThis(b,a)){c=x49}}b.restore();return c};LShape.prototype.dup=function(){var a=ShapeFactoryGet().createShape(this.id,this.points);a.setRotate(this.rotate);a.style.copy(this.style);a.x300(this.text);a.state=x74;return a};LShape.prototype.exec=function(a){this.app.cmd_history.exec(a);return};LShape.prototype.x249=function(a){return};LShape.prototype.x250=function(a){return};LShape.prototype.pointsToJson=function(){var b="";for(var a=0;a<this.points.length;a++){var c=this.points[a];if(a>0){b+=","}b+="{x:"+c.x+",y:"+c.y+"}"}return b};LShape.prototype.toJson=function(){var a=new Object();a.id=this.id;a.points=this.points;a.text=this.text;a.style=this.style.toJson();return a};LShape.prototype.pointsFromJson=function(c){for(var a=0;a<c.points.length;a++){var b=c.points[a];this.points.push(new Point(b.x,b.y))}return};LShape.prototype.fromJson=function(a){this.points.clear();this.text=a.text;this.style.fromJson(a.style);this.pointsFromJson(a);this.state=x74;return};LShape.prototype.drawText=function(c){if(this.text){var a=(this.points[0].x+this.points[1].x)/2;var d=(this.points[0].y+this.points[1].y)/2;c.beginPath();c.textAlign="center";c.textBaseline="bottom";var b=this.style.getFont();c.font=b;c.fillStyle=this.style.textColor;c.fillText(this.text,a,d);c.fill()}return};LShape.prototype.prepareStyle=function(a){var b=this.style;a.lineWidth=b.lineWidth;a.strokeStyle=b.lineColor;a.fillStyle=b.fillColor;if(b.enableGradient){a.strokeStyle=b.getStrokeStyle(a)}else{a.strokeStyle=b.lineColor}if(b.enableShadow){a.shadowColor=b.shadow.color;a.shadowOffsetX=b.shadow.x;a.shadowOffsetY=b.shadow.y;a.shadowBlur=b.shadow.blur}return};LShape.prototype.resetStyle=function(a){a.shadowColor=null;a.shadowOffsetX=0;a.shadowOffsetY=0;a.shadowBlur=0;a.strokeStyle=this.style.lineColor;a.beginPath();return};LShape.prototype.x310=function(){x309(this,this.textType);return};LShape.prototype.asIcon=function(){this.isIcon=true;this.setStyle(getIconShapeStyle());return};function RShape(){return}RShape.prototype=new Shape();RShape.prototype.MIN_SIZE=20;RShape.prototype.initRShape=function(a,e,b,c,d){this.initShape(a,e,b,c,d);this.saveWidth=0;this.saveHeight=0;this.image=null;this.imageUrl="";this.rect=new Rect(0,0,b,c);this.lastPosition=new Point(0,0);this.defWidth=200;this.defHeight=60;this.mouseDown=false;if(b===0||c===0){this.w=this.MIN_SIZE;this.h=this.MIN_SIZE;this.x297(x71);this.x251=function(f){this.mouseDown=true;if(this.state===x71){this.state=x72;this.move(f.x,f.y);this.lastPosition.x=f.x;this.lastPosition.y=f.y;this.x262()}else{this.hitTestResult=this.hitTest(f);if(!this.hitTestResult){return false}this.setSelected(true);this.lastPosition.x=f.x;this.lastPosition.y=f.y;this.handleMouseEvent(f,1)}return true};this.x252=function(f){if(this.state===x71){this.move(f.x,f.y);this.lastPosition.x=f.x;this.lastPosition.y=f.y;this.x262();return true}else{if(this.state===x72){var g=f.x-this.view.mouseDownPosition.x;var j=f.y-this.view.mouseDownPosition.y;this.resize(g,j);this.lastPosition.x=f.x;this.lastPosition.y=f.y;this.x262();return true}else{if(this.hitTestResult){this.handleMouseEvent(f,0);return true}}}return false};this.x253=function(f){if(this.state!==x74){var h=f.x-this.lastPosition.x;var g=f.y-this.lastPosition.y;if(this.isClicked()||!this.mouseDown){this.resize(this.defWidth,this.defHeight)}else{this.resizeDelta(h,g)}this.state=x74;this.setSelected(true);this.x262()}else{if(this.hitTestResult){this.handleMouseEvent(f,-1);this.hitTestResult=x51}}this.mouseDown=false;return false}}return};RShape.prototype.isRect=true;RShape.prototype.fixSize=function(){if(this.w<this.MIN_SIZE){this.w=this.MIN_SIZE}if(this.h<this.MIN_SIZE){this.h=this.MIN_SIZE}if(this.wMin&&this.w<this.wMin){this.w=this.wMin}if(this.wMax&&this.w>this.wMax){this.w=this.wMax}if(this.hMax&&this.h>this.hMax){this.h=this.hMax}if(this.hMin&&this.h<this.hMin){this.h=this.hMin}if(this.whRadio){if(this.whRadio>1){this.h=Math.floor(this.w/this.whRadio)}else{this.w=Math.floor(this.h*this.whRadio)}}return};RShape.prototype.setDefSize=function(a,b){this.defWidth=a;this.defHeight=b;return};RShape.prototype.setSizeLimit=function(d,e,b,c,a){this.wMin=d;this.wMax=b;this.hMin=e;this.hMax=c;this.whRadio=a;return};RShape.prototype.resizeDelta=function(a,b){this.resize(this.w+a,this.h+b);return};RShape.prototype.resize=function(a,b){this.w=a;this.h=b;this.needRelayout=true;if(!this.isIcon){this.fixSize()}return};RShape.prototype.afterSized=function(){return};RShape.prototype.translate=function(a){a.translate(this.dx+this.w/2,this.dy+this.h/2);a.rotate(this.rotate*Math.PI/2);a.translate(-this.w/2,-this.h/2);return};RShape.prototype.isPointInThis=function(b,a){b.beginPath();b.rect(0,0,this.w,this.h);return b.isPointInPath(a.x,a.y)};RShape.prototype.getMoreSelectMark=function(b,a){return false};RShape.prototype.getNearPoint=function(c){var a=this.getX();var f=this.getY();var b=this.x171();var d=this.x147();var e={x:0,y:0};switch(c){case 0:e.x=a;e.y=f;break;case 1:e.x=a+b/2;e.y=f;break;case 2:e.x=a+b;e.y=f;break;case 3:e.x=a+b;e.y=f+d/2;break;case 4:e.x=a+b;e.y=f+d;break;case 5:e.x=a+b/2;e.y=f+d;break;case 6:e.x=a;e.y=f+d;break;case 7:e.x=a;e.y=f+d/2;break;case 8:e.x=a+b/2;e.y=f+d/2;break;default:return null}return e};RShape.prototype.getSelectMark=function(c,a){var b=true;switch(c){case x52:a.x=0;a.y=0;break;case x53:a.x=this.w/2;a.y=0;break;case x54:a.x=this.w;a.y=0;break;case x48:a.x=0;a.y=this.h/2;break;case x50:a.x=this.w;a.y=this.h/2;break;case x43:a.x=0;a.y=this.h;break;case x44:a.x=this.w/2;a.y=this.h;break;case x45:a.x=this.w;a.y=this.h;break;default:b=this.getMoreSelectMark(c,a)}return b};RShape.prototype.drawImage=function(a){return};RShape.prototype.paintShape=function(a){a.rect(0,0,this.w,this.h);return};RShape.prototype.calcTextPosition=function(){this.textX=this.w/2;this.textY=this.h/2;this.textAlign="center";this.textBaseline="middle";return};RShape.prototype.layoutText=function(b){if(!this.needRelayout){return}var c=this.margin?this.margin:10;var a=this.w-2*c;this.lines=layoutText(b,this.text,a);this.needRelayout=false;return};RShape.prototype.drawTextUnderLine=function(e,d,b,g){var a=0;var j=0;var f=0;var c=0;if(!this.style.textU){return}c=e.measureText(g).width;if(this.textBaseline==="middle"){f=this.style.fontSize/2;if(this.textAlign==="center"){a=d-c/2}else{if(this.textAlign==="left"){a=d}else{a=d-c}}}else{if(this.textBaseline==="top"){f=this.style.fontSize;if(this.textAlign==="center"){a=d-c/2}else{if(this.textAlign==="left"){a=d}else{a=d-c}}}else{if(this.textAlign==="center"){a=d-c/2}else{if(this.textAlign==="left"){a=d}else{a=d-c}}}}j=b+f;e.moveTo(a,j);e.lineTo(a+c,j);e.lineWidth=1;e.stroke();return};RShape.prototype.drawEditTextTips=function(b){if(!this.text&&!this.isIcon&&this.w>150&&this.selected&&!isMobile()){var a=this.x171()/2;var c=this.x147()/2;b.textAlign="center";b.textBaseline="middle";b.font=this.style.getFont();b.fillStyle="#E0E0E0";b.fillText(idrawGetText("double click to edit text."),a,c,this.x171())}return};RShape.prototype.drawText=function(c){if(this.text){c.beginPath();this.calcTextPosition();c.textAlign=this.textAlign;c.textBaseline=this.textBaseline;c.font=this.style.getFont();c.fillStyle=this.style.textColor;if(c.measureText(this.text).width<1.2*this.w){this.drawTextUnderLine(c,this.textX,this.textY,this.text);c.fillText(this.text,this.textX,this.textY,this.w)}else{this.layoutText(c);var g=this.lines.length;var b=this.style.fontSize;var a=this.textX;var f=this.textY-g*b*0.5;if(f<0){f=0}for(var d=0;d<g;d++){var e=this.lines[d];this.drawTextUnderLine(c,a,f,e);c.fillText(e,a,f,this.w);f=f+this.style.fontSize+6;if(f>=this.h){break}}}}return};RShape.prototype.prepareStyle=function(a){var b=this.style;a.lineWidth=b.lineWidth;a.strokeStyle=b.lineColor;if(b.enableGradient){a.fillStyle=b.getGradFillStyle(a,0,0,this.w,this.h)}else{a.fillStyle=b.fillColor}if(b.enableShadow){a.shadowColor=b.shadow.color;a.shadowOffsetX=b.shadow.x;a.shadowOffsetY=b.shadow.y;a.shadowBlur=b.shadow.blur}return};RShape.prototype.resetStyle=function(a){a.shadowColor=null;a.shadowOffsetX=0;a.shadowOffsetY=0;a.shadowBlur=0;a.fillStyle="White";a.beginPath();return};RShape.prototype.strokeFill=function(a){if(this.style.enableShadow||isOldIE()){if(a.lineWidth>=1){a.stroke()}a.fill()}else{a.fill();if(a.lineWidth>=1){a.stroke()}}return};RShape.prototype.drawSizeTips=function(a){var b=Math.abs(this.w)+" x "+Math.abs(this.h);a.font="14px serif";a.textAlign="center";a.textBaseline="bottom";a.fillStyle=this.style.textColor;a.beginPath();a.fillText(b,this.w/2,0,this.w);a.fill();return};RShape.prototype.x259=function(b){b.save();this.translate(b);b.save();b.beginPath();this.prepareStyle(b);this.paintShape(b);b.closePath();this.strokeFill(b);b.restore();this.resetStyle(b);this.drawImage(b);if(this.drawText&&this.textType!==C_SHAPE_TEXT_NONE){this.drawText(b);this.drawEditTextTips(b)}if(this.hitTestResult!==x51||this.state!==x74){this.drawSizeTips(b)}if(this.selected){b.beginPath();b.lineWidth=1;b.strokeStyle=this.style.lineColor;for(var c=x51+1;c<x47;c++){if(this.getSelectMark(c,this.selectMarkPoint)){var a=(c===this.hitTestResult);this.createSelectedMark(b,this.selectMarkPoint.x,this.selectMarkPoint.y,a)}}b.closePath();b.stroke()}b.restore();return};RShape.prototype.hitTest=function(a){var c=x51;var b=this.view.x130();b.save();this.translate(b);if(this.selected){for(var d=x51+1;d<x47;d++){var e=this.selectMarkPoint;if(this.getSelectMark(d,e)){if(this.isInSelectedMark(b,e.x,e.y,a)){b.restore();return d}}}if(this.isPointInThis(b,a)){c=x49}}else{if(this.isPointInThis(b,a)){c=x49}}b.restore();return c};RShape.prototype.dup=function(){var a=[this.dx,this.dy,this.w,this.h];var c=ShapeFactoryGet().createShape(this.id);var b=this.toJson();c.fromJson(b);c.state=x74;return c};RShape.prototype.exec=function(a){this.app.cmd_history.exec(a);return};RShape.prototype.handleMouseEvent=function(l,g){if(g===x32){this.saveDx=this.dx;this.saveDy=this.dy;this.saveWidth=this.w;this.saveHeight=this.h;return}var o=l.x-this.lastPosition.x;var m=l.y-this.lastPosition.y;var b=o;var a=m;var f=0;var e=0;var j=this.w;var c=this.h;switch(this.hitTestResult){case x52:f=b;e=a;j=this.w-b;c=this.h-a;break;case x53:e=a;c=this.h-a;break;case x54:f=0;e=a;j=this.w+b;c=this.h-a;break;case x48:f=b;j=this.w-b;break;case x50:j=this.w+b;break;case x43:f=b;j=this.w-b;c=this.h+a;break;case x44:c=this.h+a;break;case x45:j=this.w+b;c=this.h+a;break;case x49:f=b;e=a;break;default:break}if(g===x34){if(this.dx!==this.saveDx||this.dy!==this.saveDy){var o=this.dx;var m=this.dy;this.dx=this.saveDx;this.dy=this.saveDy;this.exec(new x239(this,o,m))}if(this.w!==this.saveWidth||this.h!==this.saveHeight){var k=this.w;var d=this.h;this.w=this.saveWidth;this.h=this.saveHeight;this.exec(new x267(this,k,d))}this.afterSized();this.hitTestResult=x51}else{if(f||e){this.move(this.dx+f,this.dy+e)}if(this.w!==j||this.h!==c){this.resize(j,c)}}if(this.hitTestResult===x46){this.moveHandle(o,m)}this.x262();this.lastPosition.x=l.x;this.lastPosition.y=l.y;return true};RShape.prototype.x249=function(a){return};RShape.prototype.x250=function(a){return};RShape.prototype.toJsonMore=function(a){return};RShape.prototype.toJson=function(){var a=new Object();a.id=this.id;a.dx=this.dx;a.dy=this.dy;a.w=this.w;a.h=this.h;a.text=this.text;a.text2=this.text2;a.imageUrl=this.imageUrl;a.style=this.style.toJson();a.rotate=this.rotate;if(this.handle){a.handle=this.handle}this.toJsonMore(a);return a};RShape.prototype.fromJsonMore=function(a){return};RShape.prototype.fromJson=function(a){this.dx=a.dx;this.dy=a.dy;this.w=a.w;this.h=a.h;this.x300(a.text);this.setText2(a.text2);this.rotate=a.rotate?a.rotate:0;if(a.style){this.style.fromJson(a.style)}this.x288(a.imageUrl);this.state=x74;if(a.handle){this.handle=a.handle}this.fromJsonMore(a);return};RShape.prototype.setWtkImage=function(a){this.image=a;this.imageUrl=a.url;this.x262();return};RShape.prototype.x288=function(a){if(a===this.imageUrl){return}this.setWtkImage(new x324(a));return};RShape.prototype.asIcon=function(){this.isIcon=true;this.resize(36,36);this.setStyle(getIconShapeStyle());return};RShape.prototype.x310=function(){x308(this,this.textType,true,false);return};function RShapeInit(e,j,c){var a=0;var f=0;var b=0;var d=0;if(c&&c.length>=4){a=c[0];f=c[1];b=c[2];d=c[3]}e.initRShape(a,f,b,d,j);e.resize(40,40);return e}function LineShapeCreator(){var a=["line","Line",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=new LineShape();c.initLShape(b,this.id);return c};return}function LineShape(){return}LineShape.prototype=new LShape();LineShape.prototype.initDefault=function(){this.id="line";this.points_nr=0;this.points.push(new Point(0,0));this.points.push(new Point(50,50));this.state=x71;return};LineShape.prototype.updatePoint=function(e,b){if(e<this.points.length){this.points[e].copy(b);var a=e===1?0:1;var d=Math.abs(b.x-this.points[a].x);var c=Math.abs(b.y-this.points[a].y);if(this.x177()){if(d<c){this.points[e].x=this.points[a].x}else{this.points[e].y=this.points[a].y}}else{if(d<=5&&c>20){this.points[e].x=this.points[a].x}else{if(c<=5&&d>20){this.points[e].y=this.points[a].y}}}}return true};LineShape.prototype.getNearPoint=function(a){var b=null;switch(a){case 0:b=this.points[0];break;case 1:b=this.points[1];break;case 2:b={x:0,y:0};b.x=(this.points[0].x+this.points[1].x)/2;b.y=(this.points[0].y+this.points[1].y)/2;break}return b};LineShape.prototype.isPointInThis=function(b,a){return this.isPointInSegment(b,this.points[0],this.points[1],a)};LineShape.prototype.handleMouseEvent=function(a,c){if(this.state===x74){return true}if(c===x32){if(this.near){this.points[0].copy(this.near.point)}else{this.points[0].copy(a)}this.points[1].x=a.x+10;this.points[1].y=a.y+10}else{if(c===x33){var d=a.x-this.lastPosition.x;var b=a.y-this.lastPosition.y;if(this.mouseDown){this.updatePoint(1,a)}else{this.moveDelta(d,b)}this.x262()}else{if(c===x34){this.setSelected(true);this.state=x74;if(this.isClicked()){var e=new Point(this.points[0].x+100,this.points[0].y+100);this.updatePoint(1,e)}else{if(this.near){this.points[1].copy(this.near.point)}}}}}return true};LineShape.prototype.drawArrows=function(a){var b=this.style.arrowSize;var c=this.style.firstArrowType;if(c){x94(a,c,this.points[1],this.points[0],b)}var c=this.style.secondArrowType;if(c){x94(a,c,this.points[0],this.points[1],b)}a.beginPath();return};LineShape.prototype.drawLine=function(a){var b=(this.style.lineStyle>>8)&255;var c=(this.style.lineStyle)&255;x100(a,this.points[0],this.points[1],b,c);a.stroke();return};LineShape.prototype.x259=function(a){a.save();this.translate(a);a.beginPath();this.prepareStyle(a);this.drawLine(a);this.drawArrows(a);this.resetStyle(a);this.drawText(a);this.drawSelectMarks(a);this.drawTips(a);a.restore();return};LineShape.prototype.asIcon=function(){this.points[0].x=0;this.points[0].y=0;this.points[1].x=20;this.points[1].y=20;this.isIcon=true;this.setStyle(getIconShapeStyle());return};function VLineShapeCreator(b){var a=[b,b,null,1];ShapeCreator.apply(this,a);this.createShape=function(c){var d=new VLineShape();d.initLShape(c,this.id);return d};return}function VLineShape(){}VLineShape.prototype=new LineShape();VLineShape.prototype.updatePoint=function(b,a){if(b===0){this.points[0].x=this.points[1].x;this.points[0].y=a.y}else{this.points[1].x=this.points[0].x;this.points[1].y=a.y}return true};VLineShape.prototype.asIcon=function(){this.points[0].x=0;this.points[0].y=0;this.points[1].x=0;this.points[1].y=30;this.isIcon=true;this.setStyle(getIconShapeStyle());return};VLineShape.prototype.initDefault=function(){this.id="line";this.points_nr=0;this.points.push(new Point(0,0));this.points.push(new Point(0,50));this.state=x71;return};function HLineShapeCreator(b){var a=[b,b,null,1];ShapeCreator.apply(this,a);this.createShape=function(c){var d=new HLineShape();d.initLShape(c,this.id);return d};return}function HLineShape(){}HLineShape.prototype=new LineShape();HLineShape.prototype.updatePoint=function(b,a){if(b===0){this.points[0].y=this.points[1].y;this.points[0].x=a.x}else{this.points[1].y=this.points[0].y;this.points[1].x=a.x}return true};HLineShape.prototype.asIcon=function(){this.points[0].x=0;this.points[0].y=0;this.points[1].x=30;this.points[1].y=0;this.isIcon=true;this.setStyle(getIconShapeStyle());return};HLineShape.prototype.initDefault=function(){this.id="line";this.points_nr=0;this.points.push(new Point(0,0));this.points.push(new Point(50,0));this.state=x71;return};function ArrowShapeCreator(d,c,a){var b=[d,"Arrow",null,1];this.arrowType=c;this.lineStyle=a;ShapeCreator.apply(this,b);this.createShape=function(e){var f=new LineShape();f.initLShape(e,this.id);f.style.setFirstArrowType(x26);f.style.setSecondArrowType(this.arrowType);f.style.setLineStyle(this.lineStyle);f.setOptions(true,true,true,(this.arrowType==x26));return f};return}function SegmentsShapeCreator(b){b=b?b:"segments";var a=[b,"Segments",null,1];ShapeCreator.apply(this,a);this.createShape=function(c){var d=new SegmentsShape();d.initLShape(c,this.id);d.style.setSecondArrowType(x27);return d};return}function SegmentsShape(){return}SegmentsShape.prototype=new LShape();SegmentsShape.prototype.initDefault=function(){this.id="segments";this.points_nr=0;this.points.push(new Point(0,0));this.points.push(new Point(30,0));this.points.push(new Point(30,30));this.points.push(new Point(0,30));this.state=x71;return};SegmentsShape.prototype.updatePoint=function(d,a){var c=0;var b=0;if(d<this.points.length){this.points[d].copy(a)}if(this.state===x74){var e=(d===0)?1:(d-1);c=Math.abs(this.points[d].x-this.points[e].x);b=Math.abs(this.points[d].y-this.points[e].y);if(c<5&&b>10){this.points[d].x=this.points[e].x}if(b<5&&c>10){this.points[d].y=this.points[e].y}}else{if(d===3){this.points[1].x=this.points[0].x+100;this.points[1].y=this.points[0].y;this.points[2].x=this.points[1].x;this.points[2].y=this.points[3].y}}return true};SegmentsShape.prototype.isPointInThis=function(b,a){if(this.isPointInSegment(b,this.points[0],this.points[1],a)){return true}if(this.isPointInSegment(b,this.points[1],this.points[2],a)){return true}if(this.isPointInSegment(b,this.points[2],this.points[3],a)){return true}return false};SegmentsShape.prototype.handleMouseEvent=function(a,c){if(this.state===x74){return true}if(c===x32){if(this.near){this.points[0].copy(this.near.point)}else{this.points[0].copy(a)}this.points[1].x=a.x+30;this.points[1].y=a.y;this.points[2].x=a.x+30;this.points[2].y=a.y+30;this.points[3].x=a.x;this.points[3].y=a.y+30}else{if(c===x33){var d=a.x-this.lastPosition.x;var b=a.y-this.lastPosition.y;if(this.mouseDown){this.updatePoint(3,a)}else{this.moveDelta(d,b)}this.x262()}else{if(c===x34){this.setSelected(true);this.state=x74}}}return true};SegmentsShape.prototype.drawArrows=function(a){var b=this.style.arrowSize;var c=this.style.firstArrowType;if(c){x94(a,c,this.points[1],this.points[0],b)}var c=this.style.secondArrowType;if(c){x94(a,c,this.points[2],this.points[3],b)}a.beginPath();return};SegmentsShape.prototype.drawSegments=function(a){var b=(this.style.lineStyle>>8)&255;var c=(this.style.lineStyle)&255;x100(a,this.points[0],this.points[1],b,c);x100(a,this.points[1],this.points[2],b,c);x100(a,this.points[2],this.points[3],b,c);a.stroke();return};SegmentsShape.prototype.x259=function(a){a.save();this.translate(a);a.beginPath();this.prepareStyle(a);this.drawSegments(a);this.drawArrows(a);this.resetStyle(a);this.drawText(a);this.drawSelectMarks(a);this.drawTips(a);a.restore();return};SegmentsShape.prototype.asIcon=function(){this.points[0].x=0;this.points[0].y=0;this.points[1].x=20;this.points[1].y=0;this.points[2].x=20;this.points[2].y=20;this.points[3].x=0;this.points[3].y=20;this.isIcon=true;this.setStyle(getIconShapeStyle());this.style.setSecondArrowType(x27);return};function CurveShapeCreator(){var a=["curve","Curve",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=new CurveShape();c.initLShape(b,this.id);return c};return}function CurveShape(){return}CurveShape.prototype=new LShape();CurveShape.prototype.isCurve=true;CurveShape.prototype.initDefault=function(){this.id="curve";this.points_nr=0;this.points.push(new Point(0,0));this.points.push(new Point(0,30));this.points.push(new Point(30,15));this.state=x71;return};CurveShape.prototype.isPointsEnough=function(){return this.points_nr>=3};CurveShape.prototype.updatePoint=function(b,a){if(b<this.points.length){this.points[b].copy(a)}return true};CurveShape.prototype.isPointInThis=function(b,a){var d=this.points;b.beginPath();b.moveTo(d[0].x,d[0].y);for(var c=0;c<d.length;c++){b.lineTo(d[c].x,d[c].y)}b.lineTo(d[0].x,d[0].y);return b.isPointInPath(a.x,a.y)};CurveShape.prototype.handleMouseEvent=function(a,c){if(this.state===x74){return true}if(c===x32){if(this.near){this.points[0].copy(this.near.point)}else{this.points[0].copy(a)}this.points[1].x=a.x;this.points[1].y=a.y+30;this.points[2].x=a.x+30;this.points[2].y=a.y+15}else{if(c===x33){if(this.mouseDown){this.points[1].copy(a);var e=this.points[0].x-this.points[1].x;var b=this.points[0].y-this.points[1].y;var h=Math.atan(b/e);var g=Math.sqrt(e*e+b*b);var f=(this.points[0].x+this.points[1].x)/2;var d=(this.points[0].y+this.points[1].y)/2;if(h>Math.PI){h=h-Math.PI}this.points[2].x=f+Math.sin(Math.PI-h)*g/2;this.points[2].y=d+Math.cos(Math.PI-h)*g/2}else{var e=a.x-this.lastPosition.x;var b=a.y-this.lastPosition.y;this.moveDelta(e,b)}this.x262()}else{if(c===x34){this.setSelected(true);this.state=x74;if(this.near){this.points[1].copy(this.near.point)}}}}return true};CurveShape.prototype.drawArrows=function(a){var b=this.style.arrowSize;var c=this.style.firstArrowType;if(c){x94(a,c,this.points[2],this.points[0],b)}var c=this.style.secondArrowType;if(c){x94(a,c,this.points[2],this.points[1],b)}return};CurveShape.prototype.drawCurve=function(a){a.lineWidth=this.style.lineWidth;a.fillStyle=this.style.fillColor;a.strokeStyle=this.style.lineColor;var b=this.points;a.moveTo(b[0].x,b[0].y);a.quadraticCurveTo(b[2].x,b[2].y,b[1].x,b[1].y);a.stroke();return};CurveShape.prototype.x259=function(a){a.save();this.translate(a);this.prepareStyle(a);this.drawCurve(a);this.drawArrows(a);this.resetStyle(a);this.drawText(a);this.drawSelectMarks(a);this.drawTips(a);a.restore();return};function CircleShapeCreator(b){b=b?b:"circle";var a=[b,"Circle",null,1];ShapeCreator.apply(this,a);this.createShape=function(c){var d=RShapeInit(new CircleShape(),this.id,c);d.setDefSize(100,100);return d};return}function CircleShape(){return}CircleShape.prototype=new RShape();CircleShape.prototype.paintShape=function(b){var a=this.w/2;var d=this.h/2;var c=this.h/this.w;b.translate(a,d);b.scale(1,c);b.arc(0,0,this.w/2,0,2*Math.PI);return};function TriRectShapeCreator(){var a=["tri-rect","Tri Rect",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){return RShapeInit(new TriRectShape(),this.id,b)};return}function TriRectShape(){return}TriRectShape.prototype=new RShape();TriRectShape.prototype.paintShape=function(b){var c=this.h/2;var a=this.w/2;if(a>c){a=c}b.moveTo(0,c);b.lineTo(a,0);b.lineTo(this.w-a,0);b.lineTo(this.w,c);b.lineTo(this.w-a,this.h);b.lineTo(a,this.h);b.lineTo(0,c);return};TriRectShape.prototype.asIcon=function(){this.isIcon=true;this.resize(44,30);this.setStyle(getIconShapeStyle());return};var x30="composite";function CompositeShapeCreator(){var a=[x30,"Composite",null,0];ShapeCreator.apply(this,a);this.createShape=function(b){var c=new CompositeShape();c.initCompositeShape();return c};return}ShapeFactoryGet().addShapeCreator(new CompositeShapeCreator(),"");function CompositeShape(){return}CompositeShape.prototype=new RShape();CompositeShape.prototype.x310=function(){return};CompositeShape.prototype.initCompositeShape=function(){this.dx=0;this.dy=0;this.children=new Array();this.rect=new Rect(0,0,0,0);this.lastPosition=new Point(0,0);this.initShape(0,0,0,0,x30);this.setTextType(C_SHAPE_TEXT_NONE);return this};CompositeShape.prototype.addShape=function(d){var c=this.dx;var a=this.dy;if(this.children.length===0){this.dx=d.getX();this.dy=d.getY();this.w=d.x171();this.h=d.x147()}else{var f=0;var j=0;var e=this.dx+this.w;var b=this.dy+this.h;if(d.getX()<this.dx){this.dx=d.getX()}if(d.getY()<this.dy){this.dy=d.getY()}if((d.getX()+d.x171())>e){this.w=d.getX()+d.x171()-this.dx}else{this.w=e-this.dx}if((d.getY()+d.x147())>b){this.h=d.getY()+d.x147()-this.dy}else{this.h=b-this.dy}c=this.dx-c;a=this.dy-a;for(f=0;f<this.children.length;f++){var h=this.children[f];h.moveDelta(-c,-a)}}c=d.getX()-this.dx;a=d.getY()-this.dy;d.move(c,a);d.setSelected(false);this.children.push(d);return};CompositeShape.prototype.removeAll=function(){for(var b=0;b<this.children.length;b++){var a=this.children[b];a.move(a.getX()+this.dx,a.getY()+this.dy)}this.children.clear();return};CompositeShape.prototype.setStyle=function(c){for(var b=0;b<this.children.length;b++){var a=this.children[b];a.setStyle(c)}return};CompositeShape.prototype.hasChildren=true;CompositeShape.prototype.resize=function(a,b){return};CompositeShape.prototype.getSelectMark=function(c,a){var b=true;switch(c){case x52:a.x=0;a.y=0;break;case x54:a.x=this.w;a.y=0;break;case x43:a.x=0;a.y=this.h;break;case x45:a.x=this.w;a.y=this.h;break;default:b=false}return b};CompositeShape.prototype.x259=function(b){b.save();b.beginPath();this.translate(b);if(this.selected){b.beginPath();b.rect(0,0,this.w,this.h);b.closePath();b.lineWidth=1;b.fillStyle=this.style.fillColor;b.strokeStyle=this.style.lineColor;b.stroke();b.beginPath();b.lineWidth=1;for(var d=x51+1;d<x47;d++){if(this.getSelectMark(d,this.selectMarkPoint)){this.createSelectedMark(b,this.selectMarkPoint.x,this.selectMarkPoint.y)}}b.closePath();b.stroke()}for(var c=0;c<this.children.length;c++){var a=this.children[c];a.x259(b)}b.restore();return};CompositeShape.prototype.dup=function(){var c=new CompositeShape();c.initCompositeShape();c.w=this.w;c.h=this.h;c.dx=this.dx;c.dy=this.dy;c.rotate=this.rotate;c.style.copy(this.style);c.x300(this.text);for(var b=0;b<this.children.length;b++){var a=this.children[b].dup();c.children.push(a)}return c};CompositeShape.prototype.toJson=function(){var c=new Object();c.id=this.id;c.dx=this.dx;c.dy=this.dy;c.w=this.w;c.h=this.h;c.style=this.style.toJson();c.children=new Array();for(var b=0;b<this.children.length;b++){var a=this.children[b];c.children.push(a.toJson())}return c};CompositeShape.prototype.fromJson=function(c){if(c.children){for(var a=0;a<c.children.length;a++){var b=c.children[a];shape=ShapeFactoryGet().createShape(b.id,null);shape.fromJson(b);this.addShape(shape)}}this.dx=c.dx;this.dy=c.dy;return this};function createCompositeShape(){var a=new CompositeShape();a.initCompositeShape();return a}function DiamondShapeCreator(b){b=b?b:"diamond";var a=[b,"Diamond",null,1];ShapeCreator.apply(this,a);this.createShape=function(c){return RShapeInit(new DiamondShape(),this.id,c)};return}function DiamondShape(){return}DiamondShape.prototype=new RShape();DiamondShape.prototype.paintShape=function(a){a.moveTo(0,this.h/2);a.lineTo(this.w/2,0);a.lineTo(this.w,this.h/2);a.lineTo(this.w/2,this.h);a.lineTo(0,this.h/2);return};function RoundRectShapeCreator(b){b=b?b:"rounded-rect";var a=[b,"Rounded Rect",null,1];ShapeCreator.apply(this,a);this.createShape=function(c){return RShapeInit(new RoundRectShape(),this.id,c)};return}function RoundRectShape(){this.R=10;return}RoundRectShape.prototype=new RShape();RoundRectShape.prototype.paintShape=function(a){var b=this.R;if(b>this.w/2){b=this.w/2}if(b>this.h/2){b=this.h/2}if(this.isIcon){b=5}a.arc(b,b,b,Math.PI,1.5*Math.PI,false);a.lineTo(this.w-b,0);a.arc(this.w-b,b,b,1.5*Math.PI,2*Math.PI,false);a.lineTo(this.w,this.h-b);a.arc(this.w-b,this.h-b,b,0,0.5*Math.PI,false);a.lineTo(b,this.h);a.arc(b,this.h-b,b,0.5*Math.PI,Math.PI,false);a.lineTo(0,b);return};RoundRectShape.prototype.asIcon=function(){this.isIcon=true;this.resize(36,30);this.setStyle(getIconShapeStyle());return};function DrawingEditView(f,b,j,c,e){DrawingView.apply(this,arguments);this.copyShape=new Array();this.targetShape=null;this.creatingShape=null;var a=0;var d=1;var g=2;this.state=x74;this.selectingRect=new Rect(0,0,0,0);this.mouseDownPosition=new Point(0,0);this.lastMousePosition=new Point(0,0);this.exec=function(h){this.getApp().exec(h);this.x262();return};this.x295=function(l){var m=new x62();for(var k=0;k<this.allShapes.length;k++){var h=this.allShapes[k];if(h.selected){m.x2(new x298(h,l))}}this.exec(m);return};this.copy=function(){this.copyShape.clear();for(var k=0;k<this.allShapes.length;k++){var h=this.allShapes[k];if(h.selected){this.copyShape.push(h)}}return};this.paste=function(){if(this.copyShape.length){var h=new x260(this,this.copyShape);this.exec(h)}return};this.cut=function(){this.copy();if(this.copyShape.length){var h=new x75(this,this.copyShape);this.exec(h)}return};this.restack=function(m){var q=0;var p=0;var h=0;var k=null;var o=null;for(var l=0;l<this.allShapes.length;l++){k=this.allShapes[l];if(k.selected){q++;if(!o){o=k;p=l}}}if(q>1||!o){return}h=p+m;if(h<0||h>=this.allShapes.length){return}this.allShapes[p]=this.allShapes[h];this.allShapes[h]=o;this.x262()};this.x242=function(){this.restack(1);return};this.x240=function(){this.restack(-1);return};this.align=function(y){var p=65535;var D=65535;var k=65535;var z=65535;var B=0;var v=0;var m=0;var C=0;var A=65535;var q=0;var o=new x62();var u=[];B=this.firstSelectedShape.x171();v=this.firstSelectedShape.x147();for(var s=0;s<this.allShapes.length;s++){var x=this.allShapes[s];if(!x.selected||!x.isRect){continue}u.push(x);if(p>x.getX()||p===65535){p=x.getX()}if(D>x.getY()||D===65535){D=x.getY()}q=x.getX()+x.x171();if(k<q||k===65535){k=q}q=x.getY()+x.x147();if(z<q||z===65535){z=q}}if(y===C_ALIGN_DIST_VER){u.sort(function(l,h){return l.getY()-h.getY()})}if(y===C_ALIGN_DIST_HOR){u.sort(function(l,h){return l.getX()-h.getX()})}for(var s=0;s<u.length;s++){var x=u[s];m++;switch(y){case C_ALIGN_DIST_VER:if(m==2){C=x.getY()-D;if(C<0){C=5}}if(m===1){o.x2(new x239(x,x.getX(),D))}else{D=D+C;o.x2(new x239(x,x.getX(),D))}D=D+x.x147();break;case C_ALIGN_DIST_HOR:if(m==2){C=x.getX()-p;if(C<0){C=5}}if(m===1){o.x2(new x239(x,p,x.getY()))}else{p=p+C;o.x2(new x239(x,p,x.getY()))}p=p+x.x171();break;case x9:o.x2(new x239(x,p,x.getY()));break;case x12:o.x2(new x239(x,x.getX(),D));break;case x11:o.x2(new x239(x,k-x.x171(),x.getY()));break;case x7:o.x2(new x239(x,x.getX(),z-x.x147()));break;case x8:A=(p+k-x.x171())/2;o.x2(new x239(x,A,x.getY()));break;case x10:A=(D+z-x.x147())/2;o.x2(new x239(x,x.getX(),A));break;case x14:o.x2(new x267(x,B,x.x147()));break;case x13:o.x2(new x267(x,x.x171(),v));break;default:break}}this.exec(o);return};this.composite=function(){if(this.countShape(true)>1){var h=new CompositeShapeCommand(this,this.allShapes);this.exec(h)}return};this.decomposite=function(){if(this.countShape(true)===1){var l=new x62();for(var k=0;k<this.allShapes.length;k++){var h=this.allShapes[k];if(h.selected&&h.hasChildren){l.x2(new DecompositeShapeCommand(this,h))}}this.exec(l)}return};this.foreachSelectedShapeStyle=function(l){var k=0;var m=null;var o=new x62();for(k in this.allShapes){var h=this.allShapes[k];if(h.selected){if(l){m=new x105();m.copy(h.style);l(m);o.x2(new x298(h,m))}}}this.exec(o);return};this.x299=function(h){for(var k=this.allShapes.length-1;k>=0;k--){var l=this.allShapes[k];if(h!==l){l.setSelected(false)}}this.targetShape=h;return};this.updateFirstSelectedShape=function(){var h=0;var m=0;var k=null;var l=null;for(h in this.allShapes){k=this.allShapes[h];if(k.selected){m++;if(!l){l=k}}}if(m===0){this.firstSelectedShape=null}else{if(m===1){this.firstSelectedShape=l}}return};this.onDoubleClick=function(k){var h={x:(k.x-this.rect.x),y:(k.y-this.rect.y)};this.editText(h);return};this.x251=function(m){this.getApp().hideContextMenu();var h={x:(m.x-this.rect.x),y:(m.y-this.rect.y)};this.x170().grab(this);this.mouseDownPosition.x=h.x;this.mouseDownPosition.y=h.y;this.lastMousePosition.x=h.x;this.lastMousePosition.y=h.y;this.selectingRect.w=0;this.selectingRect.h=0;if(this.allShapes.length===0){return}if(this.creatingShape){if(this.creatingShape.state===x74){this.creatingShape=null}else{this.creatingShape.x251(h);this.x299(this.creatingShape);return}}if(this.x177()){for(var l=this.allShapes.length-1;l>=0;l--){var k=this.allShapes[l];if(k.hitTest(h)){k.setSelected(!k.selected);this.x262();this.targetShape=null;break}}this.updateFirstSelectedShape();return}this.targetShape=null;if(this.countShape(true)>1){this.state=g;return}for(var l=this.allShapes.length-1;l>=0;l--){var k=this.allShapes[l];if(k.x251(h)){this.x299(k);break}}this.state=this.targetShape?a:d;this.updateFirstSelectedShape();return};this.x252=function(h){var q={x:(h.x-this.rect.x),y:(h.y-this.rect.y)};if(this.allShapes.length===0){return}if(this.creatingShape){if(this.creatingShape.state===x74){this.creatingShape=null}else{this.x299(this.creatingShape)}this.getApp().hideContextMenu()}if(this.targetShape){this.targetShape.x252(q);this.drawSelf();return}if(this.state===d){var o=this.mouseDownPosition.x;var m=this.mouseDownPosition.y;this.selectingRect.w=Math.abs(q.x-o);this.selectingRect.h=Math.abs(q.y-m);this.selectingRect.x=q.x<o?q.x:o;this.selectingRect.y=q.y<m?q.y:m;this.firstSelectedShape=null;for(var k=this.allShapes.length-1;k>=0;k--){var l=this.allShapes[k];var r=l.isThisInRect(this.selectingRect);l.setSelected(r);if(r&&!this.firstSelectedShape){this.firstSelectedShape=l}}this.drawSelf()}else{if(this.state===g){var t=q.x-this.lastMousePosition.x;var s=q.y-this.lastMousePosition.y;for(var k=0;k<this.allShapes.length;k++){var l=this.allShapes[k];if(l.selected){l.moveDelta(t,s)}}this.drawSelf()}}this.lastMousePosition.x=q.x;this.lastMousePosition.y=q.y;return};this.x253=function(r){var h={x:(r.x-this.rect.x),y:(r.y-this.rect.y)};if(this.targetShape){this.targetShape.x253(h)}else{if(!this.x177()){if(this.isClicked()){this.x299(null);this.x273(false)}}}if(this.state===g){var q=new x62();var m=this.lastMousePosition.x-this.mouseDownPosition.x;var k=this.lastMousePosition.y-this.mouseDownPosition.y;for(var o=0;o<this.allShapes.length;o++){var l=this.allShapes[o];if(l.selected){l.moveDelta(-m,-k);q.x2(new MoveDeltaCommand(l,m,k))}}this.exec(q)}if(this.creatingShape){if(this.creatingShape.state===x74){this.creatingShape=null}}this.state=a;this.x262();this.updateFirstSelectedShape();this.x170().x314();this.getApp().updateContextMenu();return};this.x5=function(h){return};this.x4=function(h){if(this.state===d){h.strokeStyle="Gray";h.beginPath();h.rect(this.selectingRect.x,this.selectingRect.y,this.selectingRect.w,this.selectingRect.h);h.stroke()}return};this.moveResizeSelectShapes=function(k,h,l,p){var m=0;for(m in this.allShapes){var o=this.allShapes[m];if(o.selected){o.moveDelta(k,h);if(o.resizeDelta){o.resizeDelta(l,p)}}}this.x262();return};this.x249=function(h){if(this.targetShape){this.targetShape.x249(h)}return};this.x250=function(k){var h=0;if(this.x177()){switch(k){case 107:case 187:this.foreachSelectedShapeStyle(function(l){var m=l.lineWidth+1;l.setLineWidth(m)});break;case 109:case 189:this.foreachSelectedShapeStyle(function(l){var m=l.lineWidth-1;l.setLineWidth(m)});break;case KeyEvent.DOM_VK_I:this.foreachSelectedShapeStyle(function(l){l.setTextI(!l.textI)});break;case KeyEvent.DOM_VK_B:this.foreachSelectedShapeStyle(function(l){l.setTextB(!l.textB)});break;case KeyEvent.DOM_VK_U:this.foreachSelectedShapeStyle(function(l){l.setTextU(!l.textU)});break;case KeyEvent.DOM_VK_A:this.x273(true);break;case KeyEvent.DOM_VK_C:this.copy();break;case KeyEvent.DOM_VK_X:this.cut();break;case KeyEvent.DOM_VK_V:this.paste();break;case KeyEvent.DOM_VK_N:this.getApp().onNew();break;case KeyEvent.DOM_VK_O:this.getApp().onOpen();break;case KeyEvent.DOM_VK_S:this.getApp().onSave();break;case KeyEvent.DOM_VK_Z:this.getApp().onUndo();break;case KeyEvent.DOM_VK_Y:this.getApp().onRedo();break;case KeyEvent.DOM_VK_LEFT:this.moveResizeSelectShapes(0,0,-1,0);break;case KeyEvent.DOM_VK_RIGHT:this.moveResizeSelectShapes(0,0,1,0);break;case KeyEvent.DOM_VK_UP:this.moveResizeSelectShapes(0,0,0,-1);break;case KeyEvent.DOM_VK_DOWN:this.moveResizeSelectShapes(0,0,0,1);break;default:break}this.x262()}else{if(this.x176()){switch(k){case KeyEvent.DOM_VK_N:this.getApp().onNew();break;case KeyEvent.DOM_VK_S:this.getApp().onSaveAsImage();break;case KeyEvent.DOM_VK_P:this.getApp().onPrint();break;case KeyEvent.DOM_VK_L:this.align(x9);break;case KeyEvent.DOM_VK_R:this.align(x11);break;case KeyEvent.DOM_VK_T:this.align(x12);break;case KeyEvent.DOM_VK_B:this.align(x7);break;case KeyEvent.DOM_VK_C:this.align(x8);break;case KeyEvent.DOM_VK_M:this.align(x10);break;case KeyEvent.DOM_VK_W:this.align(x14);break;case KeyEvent.DOM_VK_H:this.align(x13);break;default:break}this.x262()}else{switch(k){case KeyEvent.DOM_VK_X:if(this.lastShapeID){this.getApp().onDrawShape(this.lastShapeID)}break;case 107:case 187:this.foreachSelectedShapeStyle(function(m){var l=m.fontSize+1;m.setFontSize(l)});break;case 109:case 189:this.foreachSelectedShapeStyle(function(m){var l=m.fontSize-1;m.setFontSize(l)});break;case KeyEvent.DOM_VK_PAGE_UP:this.gotoPrevPage();break;case KeyEvent.DOM_VK_PAGE_DOWN:this.gotoNextPage();break;case KeyEvent.DOM_VK_SPACE:this.x310();break;case KeyEvent.DOM_VK_DELETE:this.cut();break;case KeyEvent.DOM_VK_ESCAPE:this.x273(false);break;case KeyEvent.DOM_VK_LEFT:this.moveResizeSelectShapes(-1,0,0,0);break;case KeyEvent.DOM_VK_RIGHT:this.moveResizeSelectShapes(1,0,0,0);break;case KeyEvent.DOM_VK_UP:this.moveResizeSelectShapes(0,-1,0,0);break;case KeyEvent.DOM_VK_DOWN:this.moveResizeSelectShapes(0,1,0,0);break;case KeyEvent.DOM_VK_F2:this.x311();break;case KeyEvent.DOM_VK_F4:this.getApp().prepareEventRecord();break;case KeyEvent.DOM_VK_F7:this.composite();break;case KeyEvent.DOM_VK_F8:this.decomposite();break}}}if(this.targetShape){this.targetShape.x250(k)}this.getApp().updateContextMenu();return};this.x311=function(){x312(this.getApp());return};this.editText=function(h){var k=this.firstSelectedShape;if(k){k.editText(h)}return};this.x310=function(){var l=null;var k=0;var h=this.firstSelectedShape;for(var m=0;m<this.allShapes.length;m++){l=this.allShapes[m];if(l.selected){k++}}if(k===0){return}if(k===1){h.x310()}else{x308(h,C_SHAPE_TEXT_INPUT,true,false)}return};return}function ArcRectShapeCreator(b){b=b?b:"arc-rect";var a=[b,"Arc Rect",null,1];ShapeCreator.apply(this,a);this.createShape=function(c){return RShapeInit(new ArcRectShape(),this.id,c)};return}function ArcRectShape(){return}ArcRectShape.prototype=new RShape();ArcRectShape.prototype.paintShape=function(a){var b=this.h/2;if(b>this.w/2){b=this.w/2}if(b>this.h/2){b=this.h/2}a.arc(b,b,b,Math.PI,1.5*Math.PI,false);a.lineTo(this.w-b,0);a.arc(this.w-b,b,b,1.5*Math.PI,2*Math.PI,false);a.lineTo(this.w,this.h-b);a.arc(this.w-b,this.h-b,b,0,0.5*Math.PI,false);a.lineTo(b,this.h);a.arc(b,this.h-b,b,0.5*Math.PI,Math.PI,false);a.lineTo(0,b);return};ArcRectShape.prototype.asIcon=function(){this.isIcon=true;this.resize(40,30);this.setStyle(getIconShapeStyle());return};var gImageIcon=null;function RectShapeCreator(b){b=b?b:"rect";var a=[b,"Rect",null,1];ShapeCreator.apply(this,a);this.createShape=function(c){var d=RShapeInit(new RectShape(),this.id,c);return d};return}function RectShape(){return}RectShape.prototype=new RShape();function ImageRectShapeCreator(){var a=["image","Image",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=RShapeInit(new ImageRectShape(),this.id,b);c.setDefSize(200,200);return c};return}function ImageRectShape(){return}ImageRectShape.prototype=new RShape();ImageRectShape.prototype.x310=function(){x308(this,this.textType,true,true);return};ImageRectShape.prototype.drawImage=function(a){if(!this.image){this.x288(x102("earth.jpg"));return}var c=this.image.x151();if(!c){return}var l=c.width;var b=c.height;if(l<=0||b<=0){return}if(l>this.w&&b>this.h){a.drawImage(c,0,0,l,b,0,0,this.w,this.h);return}var o=0;var m=0;var j=0;var f=0;var k=0;var d=0;var g=(this.w-l)/2;var e=(this.h-b)/2;if(g<0){o=0;j=-g;k=this.w}else{o=g;j=0;k=l}if(e<0){m=0;f=-e;d=this.h}else{m=e;j=0;d=b}a.drawImage(c,j,f,k,d,o,m,k,d);return};ImageRectShape.prototype.paintShape=function(a){a.rect(0,0,this.w,this.h);return};ImageRectShape.prototype.asIcon=function(a){this.isIcon=true;this.resize(36,36);this.setStyle(getIconShapeStyle());this.setWtkImage(gImageIcon);return};function CubeShapeCreator(){var a=["cube","Cube",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){return RShapeInit(new CubeShape(),this.id,b)};return}function CubeShape(){return}CubeShape.prototype=new RShape();CubeShape.prototype.paintShape=function(b){var c=this.R;var d=0.25*this.h;var a=0.25*this.w;b.beginPath();b.rect(0,d,this.w-a,this.h-d);b.stroke();b.fill();b.beginPath();b.moveTo(0,d);b.lineTo(a,0);b.lineTo(this.w,0);b.lineTo(this.w-a,d);b.lineTo(0,d);b.stroke();b.fill();b.beginPath();b.moveTo(this.w-a,d);b.lineTo(this.w-a,this.h);b.lineTo(this.w,this.h-d);b.lineTo(this.w,0);return};function CylinderShapeCreator(){var a=["cylinder","Cylinder",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){return RShapeInit(new CylinderShape(),this.id,b)};return}function CylinderShape(){return}CylinderShape.prototype=new RShape();CylinderShape.prototype.paintShape=function(b){var d=this.R;var c=0.5*this.h;var a=this.w/2;var f=c/2;var e=c/this.w;b.save();b.translate(a,f);b.scale(1,e);b.arc(0,0,this.w/2,0,2*Math.PI);b.restore();b.stroke();b.fill();b.beginPath();b.save();b.translate(a,f);b.scale(1,e);b.arc(0,0,this.w/2,0,Math.PI);b.restore();b.moveTo(0,c/2);b.lineTo(0,this.h-c/2);b.save();f=this.h-c/2;b.translate(a,f);b.scale(1,e);b.arc(0,0,this.w/2,0,Math.PI);b.restore();b.moveTo(this.w,c/2);b.lineTo(this.w,this.h-c/2);b.stroke();b.fill();b.beginPath();return};function FourArrowShapeCreator(e,b){var d=100;var c=80;switch(b){case C_SHAPE_THREE_LEFT_ARROW:d=0;c=120;break;case C_SHAPE_THREE_RIGHT_ARROW:d=80;c=80;break;case C_SHAPE_THREE_DOWN_ARROW:d=20;c=120;break;case C_SHAPE_THREE_UP_ARROW:d=40;c=120;break;default:break}this.type=b;var a=[e,"Four arrow",null,1];ShapeCreator.apply(this,a);this.createShape=function(f){var l=1;var k=1;var m=1;var j=1;switch(this.type){case C_SHAPE_THREE_LEFT_ARROW:k=0;break;case C_SHAPE_THREE_RIGHT_ARROW:j=0;break;case C_SHAPE_THREE_DOWN_ARROW:l=0;break;case C_SHAPE_THREE_UP_ARROW:m=0;break;default:break}var h=RShapeInit(new FourArrowShape(),this.id,f);h.setAttr(l,k,m,j);return h};return}var C_SHAPE_FOUR_ARROW=50;var C_SHAPE_THREE_LEFT_ARROW=60;var C_SHAPE_THREE_RIGHT_ARROW=70;var C_SHAPE_THREE_DOWN_ARROW=80;var C_SHAPE_THREE_UP_ARROW=90;function FourArrowShape(){return}FourArrowShape.prototype=new RShape();FourArrowShape.prototype.setAttr=function(c,b,d,a){this.has_left=a;this.has_right=b;this.has_up=c;this.has_down=d;return};FourArrowShape.prototype.paintShape=function(a){var b=Math.min(this.w/4,this.h/4);if(b>30){b=30}if(this.has_up){a.moveTo(this.w/2-0.5*b,(this.h/2)-0.5*b);a.lineTo(this.w/2-0.5*b,b);a.lineTo(this.w/2-1.5*b,b);a.lineTo(this.w/2,0);a.lineTo(this.w/2+1.5*b,b);a.lineTo(this.w/2+0.5*b,b)}if(this.has_right){a.lineTo(this.w/2+0.5*b,(this.h-b)/2);a.lineTo(this.w-b,(this.h-b)/2);a.lineTo(this.w-b,(this.h-b)/2-b);a.lineTo(this.w,(this.h/2));a.lineTo(this.w-b,(this.h/2)+1.5*b);a.lineTo(this.w-b,(this.h/2)+0.5*b);a.lineTo(this.w/2+0.5*b,(this.h/2)+0.5*b)}if(this.has_down){a.lineTo(this.w/2+0.5*b,this.h-b);a.lineTo(this.w/2+1.5*b,this.h-b);a.lineTo(this.w/2,this.h);a.lineTo(this.w/2-1.5*b,this.h-b);a.lineTo(this.w/2-0.5*b,this.h-b);a.lineTo(this.w/2-0.5*b,(this.h/2)+0.5*b)}if(this.has_left){a.lineTo(b,(this.h/2)+0.5*b);a.lineTo(b,(this.h/2)+1.5*b);a.lineTo(0,(this.h/2));a.lineTo(b,(this.h/2)-1.5*b);a.lineTo(b,(this.h/2)-0.5*b)}return};FourArrowShape.prototype.asIcon=function(a){this.isIcon=true;this.resize(36,36);this.setStyle(getIconShapeStyle());if(!this.has_up||!this.has_down){this.resize(20,36)}if(!this.has_left||!this.has_right){this.resize(20,36)}return};function LeftArrowShapeCreator(){var a=["left-arrow","Left Arrow",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=RShapeInit(new RShape(),this.id,b);c.paintShape=function(e){var d=this.w/4;var f=this.h/2;e.beginPath();e.moveTo(d,0.5*f);e.lineTo(d,0);e.lineTo(0,f);e.lineTo(d,2*f);e.lineTo(d,1.5*f);e.lineTo(this.w,1.5*f);e.lineTo(this.w,0.5*f);e.lineTo(d,0.5*f);this.strokeFill(e);e.beginPath()};return c};return}function RightArrowShapeCreator(){var a=["right-arrow","Right Arrow",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=RShapeInit(new RShape(),this.id,b);c.paintShape=function(e){var d=this.w/4;var f=this.h/2;e.beginPath();e.moveTo(0,0.5*f);e.lineTo(this.w-d,0.5*f);e.lineTo(this.w-d,0);e.lineTo(this.w,this.h/2);e.lineTo(this.w-d,this.h);e.lineTo(this.w-d,this.h-0.5*f);e.lineTo(0,1.5*f);e.lineTo(0,0.5*f);e.lineTo(this.w-d,0.5*f);this.strokeFill(e);e.beginPath()};return c};return}function UpArrowShapeCreator(){var a=["up-arrow","Up Arrow",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=RShapeInit(new RShape(),this.id,b);c.setDefSize(60,200);c.oldDrawText=c.drawText;c.drawText=function(d){d.save();d.translate(this.w/2,this.h/2);d.rotate(Math.PI*1.5);d.translate(-this.w/2,-this.h/2);this.oldDrawText(d);d.restore();return};c.paintShape=function(e){var f=this.h/4;var d=this.w/2;e.beginPath();e.moveTo(0.5*d,f);e.lineTo(0,f);e.lineTo(d,0);e.lineTo(this.w,f);e.lineTo(this.w-0.5*d,f);e.lineTo(this.w-0.5*d,this.h);e.lineTo(0.5*d,this.h);e.lineTo(0.5*d,f);this.strokeFill(e);e.beginPath()};return c};return}function DownArrowShapeCreator(){var a=["down-arrow","Down Arrow",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=RShapeInit(new RShape(),this.id,b);c.setDefSize(60,200);c.oldDrawText=c.drawText;c.drawText=function(d){d.save();d.translate(this.w/2,this.h/2);d.rotate(Math.PI*0.5);d.translate(-this.w/2,-this.h/2);this.oldDrawText(d);d.restore();return};c.paintShape=function(e){var f=this.h/4;var d=this.w/2;e.beginPath();e.moveTo(this.w-0.5*d,this.h-f);e.lineTo(this.w,this.h-f);e.lineTo(d,this.h);e.lineTo(0,this.h-f);e.lineTo(0.5*d,this.h-f);e.lineTo(0.5*d,0);e.lineTo(this.w-0.5*d,0);e.lineTo(this.w-0.5*d,this.h-f);this.strokeFill(e);e.beginPath()};return c};return}function HorArrowShapeCreator(){var a=["hor-arrow","Hor Arrow",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=RShapeInit(new RShape(),this.id,b);c.paintShape=function(e){var d=this.w/4;var f=this.h/2;e.beginPath();e.moveTo(d,0.5*f);e.lineTo(d,0);e.lineTo(0,f);e.lineTo(d,2*f);e.lineTo(d,1.5*f);e.lineTo(this.w-d,1.5*f);e.lineTo(this.w-d,2*f);e.lineTo(this.w,f);e.lineTo(this.w-d,0);e.lineTo(this.w-d,0.5*f);e.lineTo(d,0.5*f);this.strokeFill(e);e.beginPath()};return c};return}function VerArrowShapeCreator(){var a=["ver-arrow","Ver Arrow",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=RShapeInit(new RShape(),this.id,b);c.setDefSize(60,200);c.oldDrawText=c.drawText;c.drawText=function(d){d.save();d.translate(this.w/2,this.h/2);d.rotate(Math.PI*1.5);d.translate(-this.w/2,-this.h/2);this.oldDrawText(d);d.restore();return};c.paintShape=function(e){var f=this.h/4;var d=this.w/2;e.beginPath();e.moveTo(0.5*d,f);e.lineTo(0,f);e.lineTo(d,0);e.lineTo(this.w,f);e.lineTo(this.w-0.5*d,f);e.lineTo(this.w-0.5*d,this.h-f);e.lineTo(this.w,this.h-f);e.lineTo(d,this.h);e.lineTo(0,this.h-f);e.lineTo(0.5*d,this.h-f);e.lineTo(0.5*d,f);this.strokeFill(e);e.beginPath()};return c};return}function ParallRectShapeCreator(b){b=b?b:"parall-rect";var a=[b,"Parall Rect",null,1];ShapeCreator.apply(this,a);this.createShape=function(c){var d=RShapeInit(new ParallRectShape(),this.id,c);d.resize(80,40);return d};return}function ParallRectShape(){return}ParallRectShape.prototype=new RShape();ParallRectShape.prototype.getNearPoint=function(c){var b=this.getX();var d=this.getY();var a={x:0,y:0};switch(c+1){case x52:a.x=this.h;a.y=0;break;case x53:a.x=(this.h+this.w)/2;a.y=0;break;case x54:a.x=this.w;a.y=0;break;case x48:a.x=this.h/2;a.y=this.h/2;break;case x50:a.x=this.w-this.h/2;a.y=this.h/2;break;case x43:a.x=0;a.y=this.h;break;case x44:a.x=(this.w-this.h)/2;a.y=this.h;break;case x45:a.x=this.w-this.h;a.y=this.h;break;default:return null}a.x=a.x+b;a.y=a.y+d;return a};ParallRectShape.prototype.getSelectMark=function(c,a){var b=true;switch(c){case x52:a.x=this.h;a.y=0;break;case x53:a.x=(this.w)/2;a.y=0;break;case x54:a.x=this.w;a.y=0;break;case x48:a.x=this.h/2;a.y=this.h/2;break;case x50:a.x=this.w-this.h/2;a.y=this.h/2;break;case x43:a.x=0;a.y=this.h;break;case x44:a.x=(this.w)/2;a.y=this.h;break;case x45:a.x=this.w-this.h;a.y=this.h;break;default:b=false}return b};ParallRectShape.prototype.paintShape=function(a){if(this.isIcon){var b=10;a.moveTo(0,this.h);a.lineTo(b,0);a.lineTo(this.w,0);a.lineTo(this.w-b,this.h);a.lineTo(0,this.h)}else{a.moveTo(0,this.h);a.lineTo(this.h,0);a.lineTo(this.w,0);a.lineTo(this.w-this.h,this.h);a.lineTo(0,this.h)}return};ParallRectShape.prototype.asIcon=function(){this.resize(40,32);if(!this.isIcon){this.setStyle(getIconShapeStyle())}this.isIcon=true;return};function ScriptableShapeCreator(a,c,d){var b=[d,"Arrow",c,1];ShapeCreator.apply(this,b);this.script=a;this.createShape=function(e){var f=new ScriptableShape();RShapeInit(f,this.id,e);f.setScript(this.script);return f};return}function ScriptableShape(){return}ScriptableShape.prototype=new RShape();var ScriptActions={moveTo:function(a,c,b){c.moveTo(b.x,b.y);wtkLog("moveTo: x="+b.x+" y="+b.y);return},lineTo:function(a,c,b){c.lineTo(b.x,b.y);wtkLog("lineTo: x="+b.x+" y="+b.y);return},translate:function(a,c,b){c.translate(b.x,b.y);wtkLog("translate: x="+b.x+" y="+b.y);return},rotate:function(a,c,b){c.rotate(b.angle);wtkLog("rotate: angle="+b.angle);return},scale:function(a,c,b){c.scale(b.x,b.y);wtkLog("scale: x="+b.x+" y="+b.y);return},rect:function(a,c,b){c.rect(b.x,b.y,b.width,b.height);wtkLog("rect: x="+b.x+" y="+b.y+" w="+b.width+" h="+b.height);return},arcTo:function(a,c,b){c.arcTo(b.x1,b.y1,b.x2,b.y2,b.radius);wtkLog("arc: x="+b.x1+" y="+b.y1+" x2="+b.x2+" y2="+b.y2+" radius="+b.radius);return},arc:function(a,c,b){c.arc(b.x,b.y,b.radius,b.start_angle,b.end_angle,b.anti_clock);wtkLog("arc: x="+b.x+" y="+b.y+" r="+b.radius+" start_angle="+b.start_angle+" end_angle="+b.end_angle);return},setTextPosition:function(a,c,b){a.textX=b.textX*a.w;a.textY=b.textY*a.h;a.textAlign=b.textAlign?b.textAlign:"center";a.textBaseline=b.textBaseline?b.textBaseline:"middle";return},fillText:function(a,c,b){c.fillText(b.text,b.x,b.y,b.max_width);wtkLog("fillText: x="+b.x+" y="+b.y+" text="+b.text,+" w="+b.max_width);return},curve:function(a,c,b){c.bezierCurveTo(b.x1,b.y1,b.x2,b.y2,b.x,b.y);wtkLog("curve: x="+b.x+" y="+b.y+" x1="+b.x1,+" y1="+b.y1);return},image:function(a,c,b){var d=new Image();d.src=b.url;c.drawImage(d,b.x,b.y,b.w,b.h);return},fill:function(b,d,c){var a=c.color;if(c.color){d.fillStyle=c.color}else{d.fillStyle=b.style.fillColor}d.fill();d.fillStyle=a;wtkLog("fill color="+d.fillStyle);return},stroke:function(b,d,c){var a=d.lineWidth;var e=d.strokeStyle;if(c.lineWidth){d.lineWidth=c.lineWidth}else{d.lineWidth=b.style.lineWidth}if(c.color){d.strokeStyle=c.color}else{d.strokeStyle=b.style.lineColor}d.stroke();d.lineWidth=a;d.strokeStyle=e;wtkLog("stroke color="+d.strokeStyle);return},save:function(a,c,b){c.save();a.save++;wtkLog("save");return},restore:function(a,c,b){c.restore();a.save--;wtkLog("restore");return},beginPath:function(a,c,b){c.beginPath();wtkLog("beginPath");return},closePath:function(a,c,b){c.closePath();wtkLog("closePath");return}};ScriptableShape.prototype.setScript=function(b){var a=0;var c=0;this.textX=0.5;this.textY=0.5;this.textAlign="center";this.textBaseline="middle";this.script=b;try{this.shape=JSON.parse(b);wtkLog(this.id+"='");wtkLog(JSON.stringify(this.shape));wtkLog("'")}catch(d){wtkLog("parse error: "+b)}if(this.shape){a=this.shape.width;c=this.shape.height}this.initRShape(100,100,0,0,this.id);this.resize(a,c);this.setDefSize(a,c);wtkLog("ScriptableShape: name="+this.shape.name+" id="+this.shape.id);return};ScriptableShape.prototype.draw=function(e){if(!this.shape||!this.shape.actions){wtkLog("wrong script for ScriptableShape");return}var h=this.shape.actions;e.save();this.save=0;if(this.shape.width&&this.shape.height){var d=this.w/this.shape.width;var b=this.h/this.shape.height;e.scale(d,b)}for(var f=0;f<h.length;f++){var c=h[f];var g=ScriptActions[c.name];if(g){g(this,e,c.args)}}for(var f=0;f<this.save;f++){e.restore()}this.save=0;e.restore();return};ScriptableShape.prototype.paintShape=function(a){this.draw(a);if(this.selected){this.resetStyle(a);a.rect(0,0,this.w,this.h);a.stroke()}a.beginPath();return};ScriptableShape.prototype.toJson=function(){var a=new Object();a.id=this.id;a.dx=this.dx;a.dy=this.dy;a.w=this.w;a.h=this.h;a.text=this.text;a.style=this.style.toJson();a.script=this.script;return a};ScriptableShape.prototype.fromJson=function(a){this.text=a.text;this.style.fromJson(a.style);this.setScript(a.script);this.state=x74;this.dx=a.dx;this.dy=a.dy;this.w=a.w;this.h=a.h;return};ScriptableShape.prototype.asIcon=function(){var a=28;var b=28;if(this.shape.icon_w){a=this.shape.icon_w}if(this.shape.icon_h){b=this.shape.icon_h}this.isIcon=true;this.resize(a,b);this.setStyle(getIconShapeStyle());return};function ScriptableShapeTest(c){var a='({name:"dummy", id:1234, width:100, height:100,	actions:[ {name:"rect", args:{x:100, y:100, width:100, height:100}}, {name:"stroke", args:{color:"red", lineWidth:2}}]})';var b=new ScriptableShape();b.setScript(a);b.draw(c);return}var gGridImage=null;function DrawingView(d,a,e,b,c){x316.apply(this,arguments);this.grid=10;this.showGrid=0;this.snapGrid=false;this.fillColor="white";this.autoResize=false;this.allShapes=new Array();this.theme=new Array();this.xscale=1;this.yscale=1;this.theme.push(new Gc("18px sans-serif","#FFFFFF","#000000",null));this.theme.push(new Gc("18px sans-serif","#FFFFFF","#000000",null));this.theme.push(new Gc("18px sans-serif","#FFFFFF","#000000",null));this.theme.push(new Gc("18px sans-serif","#FFFFFF","#D0D0D0",null));this.onShapeSelected=function(f){this.getApp().onShapeSelected(f);return};this.x284=function(g){this.fillColor=g;for(var f=0;f<this.theme.length;f++){this.theme[f].bg=g}return};this.x285=function(f,g){this.showGrid=f;this.snapGrid=g;return};this.snapToGrid=function(f,j){var g=f;var h=j;if(this.snapGrid){g=Math.floor((f+this.grid/2)/this.grid)*this.grid;h=Math.floor((j+this.grid/2)/this.grid)*this.grid}return{x:g,y:h}};this.x276=function(){this.autoResize=true;return};this.initPage=function(g,f){var h=new Object();h.index=g?g:0;h.shapes=f?f:(new Array());return h};this.newPage=function(){var j=this.getPageNr();var g=this.currentPage+1;var h=this.initPage(g,null);this.pages.push(h);this.saveCurrentPage();if(j>1){for(var f=j;f>g;f--){this.pages[f]=this.pages[f-1]}this.pages[g]=h}this.currentPage=g;this.showCurrentPage();this.getApp().updateContextMenu();return};this.removeCurrentPage=function(){var f=this.getPageNr();if(f>1){this.removePage(this.currentPage)}else{this.allShapes.clear()}this.getApp().updateContextMenu();return};this.removePage=function(f){var h=this.getPageNr();if(f<0||f>=h){f=this.currentPage}var g=this.pages[f];if(this.pages.length>1){this.pages.remove(g)}if(f<=this.currentPage&&this.currentPage>=0){this.currentPage--}this.showCurrentPage();this.getApp().updateContextMenu();return};this.saveCurrentPage=function(){var f=new Array();for(var h=0;h<this.allShapes.length;h++){var g=this.allShapes[h];f.push(g.toJson())}this.pages[this.currentPage]=this.initPage(this.currentPage,f);return};this.x269=function(){var j=new Object();var g=null;var f=ShapeFactoryGet().getDiagramTypes();this.saveCurrentPage();j.w=this.rect.w;j.h=this.rect.h;j.fillColor=this.fillColor;j.version=1;j.magic="5idraw";j.type=this.type?this.type:f[0].name;j.pages=this.pages;var h=JSON.stringify(j);return h};this.parseJson=function(f){var j=null;var g=null;try{if(f){j=JSON.parse(f);this.reset()}}catch(h){ret=false;wtkLog("JSON.parse failed:"+h.message);wtkLog("JSON.parse failed:"+f)}if(!j){return null}if(!j.magic||j.magic!=="5idraw"){wtkLog("Not supported type");return null}return j};this.loadJson=function(g){var f=null;if(!g||!g.pages){this.pages=new Array();this.pages.push(this.initPage(0,null));this.currentPage=0;this.showCurrentPage();return}if(this.autoResize){this.xscale=this.rect.w/g.w;this.yscale=this.rect.h/g.h;this.xscale=this.xscale<this.yscale?this.xscale:this.yscale;this.yscale=this.xscale}else{this.xscale=1;this.yscale=1}this.pages=g.pages;this.currentPage=0;this.fillColor=g.fillColor;this.showCurrentPage();return};this.x184=function(f){var h=this.parseJson(f);var g=this;if(h&&h.type==="EDA"){setTimeout(function(){g.loadJson(h)},1500)}else{this.loadJson(h);setTimeout(function(){g.x262()},1500)}return};this.showCurrentPage=function(){var g=null;var f=this.pages[this.currentPage].shapes;if(!f){f=this.pages[this.currentPage].glyphs}this.allShapes.clear();if(f){for(var h=0;h<f.length;h++){var j=f[h];g=ShapeFactoryGet().createShape(j.id,null);if(g){g.fromJson(j);this.addShape(g)}else{wtkLog("createShape "+j.id+" fail.")}}}this.x262();this.getApp().updateContextMenu();return};this.getPageNr=function(){return this.pages?this.pages.length:0};this.gotoPrevPage=function(){var f=this.pages.length;var g=this.currentPage-1;if(g<0){g=g+f}this.gotoPage(g);return};this.getPages=function(){return this.pages.length};this.gotoNextPage=function(){var f=this.pages.length;var g=this.currentPage+1;if(g>=f){g=g-f}this.gotoPage(g);return};this.gotoPage=function(f){if(f<0||f>=this.getPageNr()){return}if(f===this.currentPage){return}this.saveCurrentPage();this.currentPage=f;this.showCurrentPage();return};this.reset=function(){this.allShapes.clear();this.x262();this.pages=new Array();this.pages.push(this.initPage(0,null));this.currentPage=0;return};this.x326=function(){this.xscale=this.xscale*1.25;this.yscale=this.yscale*1.25;this.x262();return};this.x327=function(){this.xscale=this.xscale*0.75;this.yscale=this.yscale*0.75;this.x262();return};this.addShape=function(f){this.allShapes.push(f);f.setView(this);f.setApp(this.getApp());if(this.creatingShape){this.removeShape(this.creatingShape);this.creatingShape=null}if(f.state!==x74){this.creatingShape=f}return};this.removeShape=function(f){this.allShapes.remove(f);f.setView(null);return};this.countShape=function(g){var j=this.allShapes.length;if(g){j=0;for(var h=0;h<this.allShapes.length;h++){var f=this.allShapes[h];if(f.selected){j++}}}return j};this.getSelectedShape=function(){for(var g=0;g<this.allShapes.length;g++){var f=this.allShapes[g];if(f.selected){return f}}return null};this.countCompositeShape=function(g){var j=0;for(var h=0;h<this.allShapes.length;h++){var f=this.allShapes[h];if(g&&!f.selected){continue}if(f.hasChildren){j++}}return j};this.x273=function(h){for(var g=0;g<this.allShapes.length;g++){var f=this.allShapes[g];if(g===0){this.firstSelectedShape=f}f.setSelected(h)}this.x262();return};this.x5=function(f){return};this.x4=function(f){return};this.drawSelf=function(f){if(isMobile()&&this.isMouseDown()){this.draw(this.canvas)}else{this.x262()}return};this.x255=function(f){this.canvas=f;if(!this.showGrid){f.fillStyle=this.fillColor}else{f.fillStyle="White"}f.fillRect(this.rect.x,this.rect.y,this.rect.w,this.rect.h);f.beginPath();return};this.drawGrid=function(g){if(this.showGrid&&this.grid){var H=0;var F=0;var q=0;var p=0;var A=0;var E=0;var v=this.rect.w;var I=this.rect.h;var m=this.rect.x;var l=this.rect.y;var f=this.grid;var B=f-1;var C=I/f;var K=v/f;var J=5;var G=gGridImage.x151();if(G){var k=G.width;var z=G.height;var D=0;var L=0;preDrawGrids=k/this.grid;var o=K/preDrawGrids;var u=C/preDrawGrids;for(H=0;H<o;H++){q=H*preDrawGrids*f;D=Math.min(k,m+v-q);for(F=0;F<u;F++){p=F*preDrawGrids*f;L=Math.min(z,l+I-p);g.drawImage(G,q,p)}}}}return};this.x259=function(j){var f=this.rect.w;var l=this.rect.h;var q=this.x126();j.save();j.beginPath();j.rect(q.x,q.y,f,l);j.clip();j.scale(this.xscale,this.yscale);j.beginPath();j.save();this.x5(j);j.translate(this.rect.x,this.rect.y);j.shadowColor=null;if(!isOldIE()){this.drawGrid(j)}for(var k=0;k<this.allShapes.length;k++){var g=this.allShapes[k];g.paint(j)}this.x4(j);j.restore();j.restore();var o=l/30;if(o>10){o=10}if(o>8){j.beginPath();j.textAlign="right";j.textBaseline="bottom";j.font=o+"px sans";j.fillStyle="Gold";a=f-20+this.rect.x;e=this.rect.y+l-5;j.fillText(x104(),a,e)}if(this.getPageNr()>1){var m=idrawGetText("Page")+" "+(this.currentPage+1)+"/"+this.getPageNr();j.beginPath();j.textAlign="right";j.textBaseline="top";j.font="24px sans";j.fillStyle="Gold";a=this.parent.rect.w-20;e=10;j.fillText(m,a,e)}return};this.findNear=function(f,l){var h=0;var j=null;var m=this.allShapes.length;if(m>0){for(h=m-1;h>=0;h--){var k=this.allShapes[h];if(f===k){continue}j=k.isInNear(l);if(j){break}}}return j};return}var IDrawIcon={EMPTY:0,LINE_COLOR:1,SETTINGS:2,TEXT_COLOR:3,CUT:4,ZOOMOUT:5,REDO:6,UNDO:7,OPEN:8,FILL_COLOR:9,HELP:10,DELETE:11,PROPERTY:12,ZOOMIN:13,PREV_PAGE:14,NEXT_PAGE:15,IMAGE:16,COPY:17,NEW:18,SAVE_AS_IMAGE:19,ABOUT:20,GROUP:21,DELETE_PAGE:22,NEW_PAGE:23,ALIGN_BOTTOM:24,SAVE:25,ALIGN_DIST_VER:26,ALIGN_CENTER:27,PASTE:28,UNGROUP:29,SECOND_ARROW:30,ARROW_SIZE:31,ALIGN_TOP:32,ALIGN_RIGHT:33,ALIGN_DIST_HOR:34,ALIGN_LEFT:35,ALIGN_MIDDLE:36,FIRST_ARROW:37,LINE_STYLE:38,EDIT_TEXT:39,MOVE_UP:40,SELECT_ALL:41,SAME_WIDTH:42,MOVE_DOWN:43,SAME_HEIGHT:44,EXIT:45,ROTATE:46};var ICON_DISABLE_OFFSET=56;var gIDrawIconInfo=null;function x129(){return gIDrawIconInfo}function idrawCreateIcon(a){return new Icon(x129(),a)}function idrawCreateDisableIcon(a){return new Icon(x129(),a+ICON_DISABLE_OFFSET)}function x217(a){a.getApp().onNew();return}function x218(a){a.getApp().onOpen();return}function x223(a){a.getApp().onSave();return}function x222(a){a.getApp().onSaveAsImage();return}function x235(a){a.getApp().onUndo();return}function x221(a){a.getApp().onRedo();return}function x199(a){a.getApp().onCut();return}function x219(a){a.getApp().onPaste();return}function x198(a){a.getApp().onCopy();return}function menuItemRotateOnClicked(b){var a=b.shape;if(a){b.getApp().exec(new x268(a,a.rotate+1))}return}function x225(a){a.getApp().onSelectAll();return}function x226(a){a.getApp().onSelectNone();return}function menuItemDrawShapeOnClicked(a){a.getApp().onDrawShape(a.shape.id);return}function x191(a){a.getApp().onAlignLeft();return}function x193(a){a.getApp().onAlignRight();return}function x194(a){a.getApp().onAlignTop();return}function x189(a){a.getApp().onAlignBottom();return}function x190(a){a.getApp().onAlignCenter();return}function x192(a){a.getApp().onAlignMiddle();return}function menuItemAlignDistHorOnClicked(a){a.getApp().onAlignDistHor();return}function menuItemAlignDistVerOnClicked(a){a.getApp().onAlignDistVer();return}function x234(a){a.getApp().onToSameWidth();return}function x233(a){a.getApp().onToSameHeight();return}function x216(a){a.getApp().onMoveUp();return}function x215(a){a.getApp().onMoveDown();return}function x210(a){a.getApp().onGroup();return}function x236(a){a.getApp().onUngroup();return}function menuItemFeaturesOnClicked(e){idrawRegisterBasicForDemo();var b=e.getApp().view;var f=b.parseJson(gIDrawFeatures);if(!f){return}var d=0;var a=f.pages[0].shapes;var h=a.length;var c=300;if(a){function g(){var j=null;var k=a[d];j=ShapeFactoryGet().createShape(k.id,null);if(j){j.fromJson(k);b.addShape(j);b.x262()}else{wtkLog("createShape "+k.id+" fail.")}d=d+1;if(d<h){setTimeout(g,c)}return}setTimeout(g,c)}return}function menuItemDemoOnClicked(a){var b=null;if(gHasDemoData){b=idrawGetDemoData(null)}if(!b){b=gFlowchartDemo}idrawRegisterBasicForDemo();a.getApp().eventReplay(b.category,b.events);return}function x197(a){window.open("http://www.5idraw.com/category/doc/","_blank");return}function x188(a){showDialog(idrawGetText("About..."),x125(),480,420);var b=$("#myok")[0];b.onclick=function(c){$("#idraw_dialog").dialog("close");return};return}function createMenuButton(e,a,d,b,f){var c=new MenuButton(e,0,0,0,0);c.x287(f);c.x292(b);c.x300(idrawGetText(d));c.x286(idrawCreateIcon(a),idrawCreateDisableIcon(a));return c}function createIconMenuItem(f,b,e,c,g,a){var d=new x187(f.x138(),0,0,0,0);if(e){d.x300(idrawGetText(e))}d.x286(idrawCreateIcon(b),idrawCreateDisableIcon(b));if(g){d.x287(g)}if(a){d.setTips(idrawGetText(a))}d.x292(c);return d}function x67(e,b,d,a,f){var c=new x187(e.x138(),0,0,0,0);if(d){c.x300(idrawGetText(d))}if(b){c.x286(b)}if(f){c.x287(f)}c.x292(a);return c}function x70(c,b){var a=c.rect.x;var e=c.parent.rect.h;var d=new x185(c.x155(),a,e,240,C_MENU_ITEM_HEIGHT*b);return d}function x205(b){showDialog("Exit...",x141(),300,200);var a=$("#form_exit")[0];a.app=b.getApp();a.myok.onclick=function(c){a.app.onSave();a.app.onSaveAsImage();a.app.onClose();$("#idraw_dialog").dialog("close");window.close();return};a.mycancel.onclick=function(c){$("#idraw_dialog").dialog("close");a.app.onClose();window.close();return};return}function menuItemShapeCategoryOnClicked(d){var g=d.getApp();ShapeFactoryGet().x282(d.id);g.toolbar.reload();return;var f=null;var b=ShapeFactoryGet().x110(d.id);var e=x6(b.length);ShapeFactoryGet().x282(d.id);f=new x172(d.x155(),e.rows,e.cols,60,60);for(var a=0;a<b.length;a++){var h=b[a];if(h.x182()){var d=x67(f,null,null,menuItemDrawShapeOnClicked,h.id);d.shape=h.createShape();d.shape.x297(x74);d.x294(50,50);if(d.shape.asIcon){d.shape.asIcon()}d.x259=function(j){var c=(this.rect.w-this.shape.x171())/2;var k=(this.rect.h-this.shape.x147())/2;if(this.shape.asIcon){this.shape.asIcon()}this.shape.move(this.rect.x+c,this.rect.y+k);this.shape.paint(j)}}}f.setOptions(true,10,true);f.x303(1);return}function x175(g,b){var d=null;var a=gSupportedColors;var f=b;var e=b;if(b&&(typeof b!="string")){e="Gray";f=idrawGetText("Gradient")}g.style.color=e;g.value=f;if(b){d=new Option(f,f);d.style.backgroundColor=e;g.add(d)}for(var c=0;c<a.length;c++){d=new Option(a[c],a[c]);d.style.backgroundColor=a[c];g.add(d)}g.onchange=function(h){h.target.style.color=h.target.value};return}function x231(b){var a=b.getApp().view;a.x311();return}function x220(b){var a=b.getApp().view;a.x310();return}function x229(a){a.getApp().foreachSelectedShapeStyle(function(b){b.setLineStyle(a.id)});x93().setLineStyle(a.id);return}function x257(c){var a=this.rect.x+this.rect.w/2-50;var j=this.rect.y+this.rect.h/2;var b=a+100;var d=this.id;var g=d>>8;var h=d&255;x100(c,new Point(a,j),new Point(b,j),g,h);c.stroke();return}function x214(b){var c=new x185(b.x155(),0,0,200,C_MENU_ITEM_HEIGHT*4);var a=x67(c,null,null,x229,x55);a.x259=x257;a=x67(c,null,null,x229,x56);a.x259=x257;a=x67(c,null,null,x229,x57);a.x259=x257;a=x67(c,null,null,x229,x58);a.x259=x257;c.setOptions(true,10,true);c.x303(1);return}function x228(a){a.getApp().foreachSelectedShapeStyle(function(b){b.setFirstArrowType(a.id)});x93().setFirstArrowType(a.id);return}function x256(c){var a=this.rect.x+this.rect.w/2-50;var e=this.rect.y+this.rect.h/2;var b=a+100;var d=this.id;c.moveTo(a,e);c.lineTo(b,e);c.stroke();x94(c,d,new Point(b,e),new Point(a,e),10);return}function x258(c){var a=this.rect.x+this.rect.w/2-50;var e=this.rect.y+this.rect.h/2;var b=a+100;var d=this.id;c.moveTo(a,e);c.lineTo(b,e);c.stroke();x94(c,d,new Point(a,e),new Point(b,e),10);return}function x208(b){var c=new x185(b.x155(),0,0,200,C_MENU_ITEM_HEIGHT*10);var a=x67(c,null,null,x228,x26);a.x259=x256;a=x67(c,null,null,x228,x27);a.x259=x256;a=x67(c,null,null,x228,x20);a.x259=x256;a=x67(c,null,null,x228,x28);a.x259=x256;a=x67(c,null,null,x228,x21);a.x259=x256;a=x67(c,null,null,x228,x29);a.x259=x256;a=x67(c,null,null,x228,x22);a.x259=x256;a=x67(c,null,null,x228,x24);a.x259=x256;a=x67(c,null,null,x228,x23);a.x259=x256;a=x67(c,null,null,x228,x25);a.x259=x256;c.setOptions(true,10,true);c.x303(1);return}function x230(a){a.getApp().foreachSelectedShapeStyle(function(b){b.setSecondArrowType(a.id)});x93().setSecondArrowType(a.id);return}function x224(b){var c=new x185(b.x155(),0,0,200,C_MENU_ITEM_HEIGHT*10);var a=x67(c,null,null,x230,x26);a.x259=x258;a=x67(c,null,null,x230,x27);a.x259=x258;a=x67(c,null,null,x230,x20);a.x259=x258;a=x67(c,null,null,x230,x28);a.x259=x258;a=x67(c,null,null,x230,x21);a.x259=x258;a=x67(c,null,null,x230,x29);a.x259=x258;a=x67(c,null,null,x230,x22);a.x259=x258;a=x67(c,null,null,x230,x24);a.x259=x258;a=x67(c,null,null,x230,x23);a.x259=x258;a=x67(c,null,null,x230,x25);a.x259=x258;c.setOptions(true,10,true);c.x303(1);return}function x254(c){var a=this.rect.x+this.rect.w/2-50;var d=this.rect.y+this.rect.h/2;var b=a+100;c.moveTo(a,d);c.lineTo(b,d);c.stroke();x94(c,x29,new Point(a,d),new Point(b,d),this.id);return}function x227(a){a.getApp().foreachSelectedShapeStyle(function(b){b.setArrowSize(a.id)});x93().setArrowSize(a.id);return}function x196(b){var c=new x185(b.x155(),0,0,200,C_MENU_ITEM_HEIGHT*3);var a=x67(c,null,null,x227,6);a.x259=x254;a=x67(c,null,null,x227,12);a.x259=x254;a=x67(c,null,null,x227,18);a.x259=x254;a=x67(c,null,null,x227,24);a.x259=x254;c.setOptions(true,10,true);c.x303(1);return}function x284(a){a.getApp().foreachSelectedShapeStyle(function(b){b.enableGradient=false;b.x284(a.x136())});x93().x284(a.x136());return}function x207(a){x305(a.x155(),x284,true);return}function x291(a){a.getApp().foreachSelectedShapeStyle(function(b){b.x291(a.x136())});x93().x291(a.x136());return}function x213(a){x305(a.x155(),x291);return}function x301(a){a.getApp().foreachSelectedShapeStyle(function(b){b.x301(a.x136())});x93().x301(a.x136());return}function x232(a){x305(a.x155(),x301);return}function x220(a){a.getApp().onShowProperty();return}function menuItemEditTextOnClicked(a){a.getApp().onEditText();return}function x200(a){a.getApp().onDelete();return}function x237(a){a.view.x326();return}function x238(a){a.view.x327();return}function x140(a){return'<html>	<head>	  <meta charset="utf-8">	  <meta name="viewport" content="width=800" height="600"> 	  <title>UML.FlowChart.Chart.Diagrams</title>	  <link rel="stylesheet" type="text/css" href="http://www.5idraw.com/diagram/css/drawing.css" media="all">  	  <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.21/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>	  <script type="text/javascript" src="http://www.5idraw.com/diagram/js/idraw.js"><\/script>	  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"><\/script>	  <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.21/jquery-ui.min.js"><\/script>		<script type="text/javascript">		$("#idraw_dialog").dialog({ autoOpen: false, width: 400, height:400 });		var gApp = null;		setTimeout(function() { 			if(!gApp)			{				idrawRegisterAll(); 				gApp = idrawEditJson("idraw_canvas", \''+a+'\');			}		}, 100);		<\/script>	</head>	<body >	<canvas width="400" height="400" id="idraw_canvas">	</canvas>	<div id="idraw_dialog" />	</body>	</html>'}function x203(c){var a=c.view;var d=window.open("http://www.5idraw.com/edit_json.htm");var b=a.x269();var e=x140(b);wtkLog(e);d.document.write(e);return}function x306(b,a){return function(){var e=0;var j=200;var l=true;var c=null;var m=a.x;var k=a.y;var o=b.x171();var g=b.x147();var p=b.countShape(true);var f=p>=1;m=(m+j)<o?m:o-j;var d=new x185(b.x155(),m,k,j,C_MENU_ITEM_HEIGHT*8);c=createIconMenuItem(d,IDrawIcon.ZOOMIN,"Zoom In",x237);c.view=b;c=createIconMenuItem(d,IDrawIcon.ZOOMOUT,"Zoom Out",x238);c.view=b;c=createIconMenuItem(d,IDrawIcon.NEW,"Edit",x203);c.view=b;c=createIconMenuItem(d,IDrawIcon.SAVE_AS_IMAGE,"Save As Image",x222);c.view=b;if(l){b.menu=d;d.relayout(null,false);e=d.x147();if((k+e)>g){k=g-e+b.x126().x}d.move(m,k);d.x303(1)}else{b.menu=null;d.manager.removeWindow(d)}wtkLog("x306")}}function x307(b,a){return function(){var f=0;var l=200;var o=a.x;var m=a.y;var c=null;var e=b.getApp();var p=b.x171();var j=b.x147();var q=b.countShape(true);var k=b.firstSelectedShape;var g=q>=1;o=(o+l)<p?o:p-l;var d=new x185(b.x155(),o,m,l,C_MENU_ITEM_HEIGHT*8);if(q<1){if(e.cmd_history.x64()>0){c=createIconMenuItem(d,IDrawIcon.UNDO,"Undo",x235)}if(e.cmd_history.x63()>0){c=createIconMenuItem(d,IDrawIcon.REDO,"Redo",x221)}c=createIconMenuItem(d,IDrawIcon.NEW,"New",x217);c=createIconMenuItem(d,IDrawIcon.OPEN,"Open",x218);c=createIconMenuItem(d,IDrawIcon.SAVE,"Save",x223);c=createIconMenuItem(d,IDrawIcon.SETTINGS,"Settings",x231);if(b.getPages()>1){c=createIconMenuItem(d,IDrawIcon.PREV_PAGE,"Prev Page",menuItemPrevPageOnClicked);c=createIconMenuItem(d,IDrawIcon.NEXT_PAGE,"Next Page",menuItemNextPageOnClicked)}}if(q===1){c=createIconMenuItem(d,IDrawIcon.PROPERTY,"Property",x220);if(k.textType!==C_SHAPE_TEXT_NONE){c=createIconMenuItem(d,IDrawIcon.PROPERTY,"Edit Text",menuItemEditTextOnClicked)}c=createIconMenuItem(d,IDrawIcon.MOVE_UP,"Move Up",x216);c=createIconMenuItem(d,IDrawIcon.MOVE_DOWN,"Move Down",x215);if(k&&k.children){c=createIconMenuItem(d,IDrawIcon.UNGROUP,"Ungroup",x236)}if(k&&k.isLine){if(!k.isCurve&&!k.lineStyleUnchangable){c=createIconMenuItem(d,IDrawIcon.LINE_STYLE,"Line Style",x214)}if(!k.firstArrowUnchangable){c=createIconMenuItem(d,IDrawIcon.FIRST_ARROW,"First Arrow",x208)}if(!k.secondArrowUnchangable){c=createIconMenuItem(d,IDrawIcon.SECOND_ARROW,"Second Arrow",x224)}if(!k.arrowSizeUnchangable){c=createIconMenuItem(d,IDrawIcon.ARROW_SIZE,"Arrow Size",x196)}}}if(q>1){c=createIconMenuItem(d,IDrawIcon.PROPERTY,"Property",x220);c=createIconMenuItem(d,IDrawIcon.GROUP,"Group",x210)}if(q>0){c=createIconMenuItem(d,IDrawIcon.CUT,"Delete",x199)}c=createIconMenuItem(d,IDrawIcon.SELECT_ALL,"Select All",x225);b.menu=d;d.relayout(null,false);f=d.x147();if((m+f)>j){m=j-f+b.x126().x}d.move(o,m);d.x303(1);return}}function menuItemWizardOnClicked(b){var c=b.getApp();var a=b.id;c.view.type=a.name;ShapeFactoryGet().x282(a.defaultCategory);c.toolbar.reload();return}function fixMenuItemBackgroud(a){a.x255=function(b){if(this.state===x78){b.beginPath();b.fillStyle="#F0F0F0";b.fillRect(this.rect.x,this.rect.y,this.rect.w,this.rect.h)}else{menuItemPaintBackground(this,b)}return};return}function isFirstTime(){if(localStorage.notFirstTime){return false}localStorage.notFirstTime=true;return true}function showWizard(a){if(isFirstTime()){showFirstWizard(a)}else{showNormalWizard(a)}return}function showFirstWizard(c){var a=null;var b=new x185(c.manager,0,0,300,C_MENU_ITEM_HEIGHT*3);b.x300(idrawGetText("Wizard:"));a=x67(b,null,"New",x217);fixMenuItemBackgroud(a);if(gHadRegisterBasic){a=x67(b,null,"Features",menuItemFeaturesOnClicked);fixMenuItemBackgroud(a)}a=x67(b,null,"More Help",x197);fixMenuItemBackgroud(a);b.setOptions(true,10,true);b.x303(1);return}function showNormalWizard(h){var f=null;var d=ShapeFactoryGet().getDiagramTypes();h.view.type=d[0].name;if(d.length>2){var g=new x185(h.manager,0,0,300,C_MENU_ITEM_HEIGHT*d.length);g.x300(idrawGetText("Please select diagram type:"));for(var c=0;c<d.length;c++){var e=d[c];var a=e.name;var b=e.defaultCategory;f=x67(g,null,a,menuItemWizardOnClicked,e);fixMenuItemBackgroud(f)}g.setOptions(true,10,true);g.x303(1)}return}function menuItemNewPageOnClicked(b){var a=b.getApp().view;a.newPage();return}function menuItemDeletePageOnClicked(b){var a=b.getApp().view;a.removeCurrentPage();return}function menuItemPrevPageOnClicked(b){var a=b.getApp().view;a.gotoPrevPage();return}function menuItemNextPageOnClicked(b){var a=b.getApp().view;a.gotoNextPage();return}function createMultiShapeContextMenu(e,c,g){var j=0;var b=12;var d=ContextMenuBar.HEIGHT;var l=null;var k=b*32+2;var f=getViewPort();var a=new ContextMenuBar(e,0,0,k,d);a.x138=function(){return this};l=createIconMenuItem(a,IDrawIcon.DELETE,null,x199,null,"Delete");l=createIconMenuItem(a,IDrawIcon.COPY,null,x198,null,"Copy");l=createIconMenuItem(a,IDrawIcon.ALIGN_LEFT,null,x191,null,"Align Left");l=createIconMenuItem(a,IDrawIcon.ALIGN_RIGHT,null,x193,null,"Align Right");l=createIconMenuItem(a,IDrawIcon.ALIGN_TOP,null,x194,null,"Align Top");l=createIconMenuItem(a,IDrawIcon.ALIGN_BOTTOM,null,x189,null,"Align Bottom");l=createIconMenuItem(a,IDrawIcon.ALIGN_CENTER,null,x190,null,"Align Center");l=createIconMenuItem(a,IDrawIcon.ALIGN_MIDDLE,null,x192,null,"Align Middle");l=createIconMenuItem(a,IDrawIcon.SAME_WIDTH,null,x234,null,"To Same Width");l=createIconMenuItem(a,IDrawIcon.SAME_HEIGHT,null,x233,null,"To Same Height");l=createIconMenuItem(a,IDrawIcon.ALIGN_DIST_HOR,null,menuItemAlignDistHorOnClicked,null,"Distribute horizontally");l=createIconMenuItem(a,IDrawIcon.ALIGN_DIST_VER,null,menuItemAlignDistVerOnClicked,null,"Distribute vertically");l=createIconMenuItem(a,IDrawIcon.GROUP,null,x210,null,"Group");a.setSpaceSize(6);k=b*(32+a.spaceSize)+8;j=(f.width-k)/2-10;a.move(j,g);a.show(false);return a}function showSingleShapeContextMenu(f,e,d){var h=6;var c=f.view;var g=0;var a=0;var b=0;if(d.getY()>60){g=c.rect.y+d.getY()-ContextMenuBar.HEIGHT-10}else{g=c.rect.y+d.getY()+d.x147()+10}e.del.show(true);e.cut.show(true);e.copy.show(true);e.property.show(true);e.x242.show(true);e.x240.show(true);e.rotate.show(false);e.editText.show(false);e.lineStyle.show(false);e.firstArrow.show(false);e.secondArrow.show(false);e.arrowSize.show(false);e.ungroup.show(false);e.paste.show(false);if(f.cmd_history.x64()>0){e.undo.show(true)}else{e.undo.show(false)}if(f.view.copyShape.length>0){h+=1;e.paste.show(true)}if(d.textType!=C_SHAPE_TEXT_NONE){h+=1;e.editText.show(true)}if(d.rotatable){h+=1;e.rotate.shape=d;e.rotate.show(true)}if(d.isLine){if(!d.firstArrowUnchangable){h++;e.firstArrow.show(true)}if(!d.secondArrowUnchangable){h++;e.secondArrow.show(true)}if(!d.arrowSizeUnchangable){h++;e.arrowSize.show(true)}if(!d.isCurve&&!d.lineStyleUnchangable){h+=1;e.lineStyle.show(true)}}if(d.hasChildren){e.property.show(false);e.ungroup.show(true)}b=h*(32+e.spaceSize)+8;a=c.rect.x+d.getX()-(b-d.x171())/2;if(a<0){a=0}if((a+b)>=(c.rect.x+c.rect.w)){a=(c.rect.x+c.rect.w)-b}e.needRelayout=true;e.move(a,g);e.show(true);return}function createSingleShapeContextMenu(e,c){var j=0;var g=0;var b=12;var d=ContextMenuBar.HEIGHT;var l=null;var k=b*32+2;var f=getViewPort();var a=new ContextMenuBar(e,0,0,k,d);a.x138=function(){return this};a.undo=createIconMenuItem(a,IDrawIcon.UNDO,null,x235,null,"Undo");a.undo.checkEnable=function(){return c.cmd_history.x64()>0};a.del=createIconMenuItem(a,IDrawIcon.DELETE,null,x199,null,"Delete");a.cut=createIconMenuItem(a,IDrawIcon.CUT,null,x199,null,"Cut");a.copy=createIconMenuItem(a,IDrawIcon.COPY,null,x198,null,"Copy");a.paste=createIconMenuItem(a,IDrawIcon.PASTE,null,x219,null,"Paste");a.rotate=createIconMenuItem(a,IDrawIcon.ROTATE,null,menuItemRotateOnClicked,null,"Rotate");a.editText=createIconMenuItem(a,IDrawIcon.EDIT_TEXT,null,menuItemEditTextOnClicked,null,"Edit Text");a.property=createIconMenuItem(a,IDrawIcon.PROPERTY,null,x220,null,"Property");a.lineStyle=createIconMenuItem(a,IDrawIcon.LINE_STYLE,null,x214,null,"Line Style");a.firstArrow=createIconMenuItem(a,IDrawIcon.FIRST_ARROW,null,x208,null,"First Arrow");a.secondArrow=createIconMenuItem(a,IDrawIcon.SECOND_ARROW,null,x224,null,"Second Arrow");a.arrowSize=createIconMenuItem(a,IDrawIcon.ARROW_SIZE,null,x196,null,"Arrow Size");a.ungroup=createIconMenuItem(a,IDrawIcon.UNGROUP,null,x236,null,"Ungroup");a.x242=createIconMenuItem(a,IDrawIcon.MOVE_UP,null,x216,null,"Move Up");a.x240=createIconMenuItem(a,IDrawIcon.MOVE_DOWN,null,x215,null,"Move Down");a.setSpaceSize(6);a.move(j,g);a.show(false);return a}var gCustomMenu={};function idrawAddCustomMenu(b,a){if(!gCustomMenu[b]){gCustomMenu[b]=new Array()}gCustomMenu[b].push(a);return}function customMenuCreator(b,a){return null}function idrawGetCustomMenu(a){return gCustomMenu[a]}function x65(a,b){if(isMobile()){return createDrawingMenuMobile(a,b)}else{return createDrawingMenuPc(a,b)}}function createDrawingToolbar(a,b){if(isMobile()){return createDrawingToolbarMobile(a,b)}else{return createDrawingToolbarPc(a,b)}}function x206(f){var h=f.getApp();var g=x70(f,4);var e=h.isInlineEdit;var c=createIconMenuItem(g,IDrawIcon.NEW,"New",x217);c.x296("Alt+N");c=createIconMenuItem(g,IDrawIcon.OPEN,"Open",x218);c.x296("Ctrl+O");c=createIconMenuItem(g,IDrawIcon.SAVE,"Save",x223);c.x296("Ctrl+S");if(!isOldIE()&&!e){c=createIconMenuItem(g,IDrawIcon.SAVE_AS_IMAGE,"Save As Image",x222)}var d=idrawGetCustomMenu("File");if(d&&d.length>0){for(var b=0;b<d.length;b++){var a=d[b];c=a(h,g)}}if(f.getApp().isInlineEdit){c=createIconMenuItem(g,IDrawIcon.EXIT,"Exit",x205)}g.x303(1);return}function x204(b){var d=b.getApp();var c=x70(b,7);var a=createIconMenuItem(c,IDrawIcon.UNDO,"Undo",x235);a.x283(d.cmd_history.x64()>0);a.x296("Ctrl+Z");a=createIconMenuItem(c,IDrawIcon.REDO,"Redo",x221);a.x283(d.cmd_history.x63()>0);a.x296("Ctrl+Y");a=createIconMenuItem(c,IDrawIcon.CUT,"Cut",x199);a.x283(d.view.countShape(true)>0);a.x296("Ctrl+X");a=createIconMenuItem(c,IDrawIcon.COPY,"Copy",x198);a.x283(d.view.countShape(true)>0);a.x296("Ctrl+C");a=createIconMenuItem(c,IDrawIcon.PASTE,"Paste",x219);a.x283(d.view.copyShape.length>0);a.x296("Ctrl+V");a=createIconMenuItem(c,IDrawIcon.SELECT_ALL,"Select All",x225);a.x283(d.view.countShape(0)>0);a.x296("Ctrl+A");c.x303(1);return}function x212(c){var f=ShapeFactoryGet().x131();if(f.length<12){var g=x70(c,f.length)}else{var d=5;var e=4;var h=f.length;if(h<=20){d=4;e=4}else{if(h<=20){d=5;e=4}else{if(h<=30){d=6;e=5}else{if(h<=36){d=6;e=6}else{if(h<=49){d=7;e=7}else{d=8;e=8}}}}}g=new x172(c.x155(),d,e,100,60);g.x300(idrawGetText("Please select category:"));g.setOptions(true,10,true)}for(var b=0;b<f.length;b++){var a=f[b];if(a!==""){x67(g,null,a,menuItemShapeCategoryOnClicked,a)}}g.x303(1);return}function menuItemPageOnClicked(b){var c=x70(b,4);var a=createIconMenuItem(c,IDrawIcon.NEW_PAGE,"New Page",menuItemNewPageOnClicked);a=createIconMenuItem(c,IDrawIcon.DELETE_PAGE,"Delete Page",menuItemDeletePageOnClicked);a=createIconMenuItem(c,IDrawIcon.PREV_PAGE,"Prev Page",menuItemPrevPageOnClicked);a=createIconMenuItem(c,IDrawIcon.NEXT_PAGE,"Next Page",menuItemNextPageOnClicked);c.x303(1);return}function x209(c){var b=null;var d=x70(c,5);b=createIconMenuItem(d,IDrawIcon.SETTINGS,"Settings",x231);b.x296("F2");b=createIconMenuItem(d,IDrawIcon.PROPERTY,"Property",x220);var a=c.getApp().view.countShape(true)>0;b.x283(a);b.x296("Space");d.x303(1);return}function x195(d){var e=x70(d,6);var a=d.getApp().view.countShape(true);var b=a>1;var c=createIconMenuItem(e,IDrawIcon.ALIGN_LEFT,"Align Left",x191);c.x283(b);c.x296("Alt+L");c=createIconMenuItem(e,IDrawIcon.ALIGN_RIGHT,"Align Right",x193);c.x283(b);c.x296("Alt+R");c=createIconMenuItem(e,IDrawIcon.ALIGN_TOP,"Align Top",x194);c.x283(b);c.x296("Alt+T");c=createIconMenuItem(e,IDrawIcon.ALIGN_BOTTOM,"Align Bottom",x189);c.x283(b);c.x296("Alt+B");c=createIconMenuItem(e,IDrawIcon.ALIGN_CENTER,"Align Center",x190);c.x283(b);c.x296("Alt+C");c=createIconMenuItem(e,IDrawIcon.ALIGN_MIDDLE,"Align Middle",x192);c.x283(b);c.x296("Alt+M");c=createIconMenuItem(e,IDrawIcon.SAME_WIDTH,"To Same Width",x234);c.x283(b);c.x296("Alt+W");c=createIconMenuItem(e,IDrawIcon.SAME_HEIGHT,"To Same Height",x233);c.x283(b);c.x296("Alt+H");b=a===1;c=createIconMenuItem(e,IDrawIcon.MOVE_UP,"Move Up",x216);c.x283(b);c=createIconMenuItem(e,IDrawIcon.MOVE_DOWN,"Move Down",x215);c.x283(b);b=a>1;c=createIconMenuItem(e,IDrawIcon.GROUP,"Group",x210);c.x283(b);c.x296("F7");b=a===1;c=createIconMenuItem(e,IDrawIcon.UNGROUP,"Ungroup",x236);c.x283(b);c.x296("F8");e.x303(1);return}function x211(b){var a=null;var c=x70(b,2);a=createIconMenuItem(c,IDrawIcon.HELP,"Features",menuItemFeaturesOnClicked);a=createIconMenuItem(c,IDrawIcon.HELP,"Content",x197);a=createIconMenuItem(c,IDrawIcon.ABOUT,"About",x188);c.x303(1);return}function makeMenuItemTransparent(a){return}function createMenuBarItem(d,c,b){var a=new x187(d,0,0,0,0);a.x300(idrawGetText(c));a.x292(b);makeMenuItemTransparent(a);return a}function createDrawingMenuPc(c,d){var a=null;var b=c.rect.w;menu=new x186(c,1,1,b-2,60);a=createMenuBarItem(menu,"File",x206);a=createMenuBarItem(menu,"Edit",x204);a=createMenuBarItem(menu,"Insert",x212);if(idrawGetEnableMultiPages()&&!d.isInlineEdit){a=createMenuBarItem(menu,"Pages",menuItemPageOnClicked)}a=createMenuBarItem(menu,"Arrange",x195);a=createMenuBarItem(menu,"Format",x209);a=createMenuBarItem(menu,"Help",x211);a=new x187(menu,0,0,0,0);a.x274(10);a=createMenuButton(menu,IDrawIcon.UNDO,"Undo",x235);makeMenuItemTransparent(a);a.checkEnable=function(e){var f=a.getApp();return(f.cmd_history.x64()>0)};a=createMenuButton(menu,IDrawIcon.REDO,"Redo",x221);makeMenuItemTransparent(a);a.checkEnable=function(e){var f=a.getApp();return(f.cmd_history.x63()>0)};a=createMenuButton(menu,IDrawIcon.CUT,"Cut",x199);makeMenuItemTransparent(a);a.checkEnable=function(e){var f=a.getApp();return(f.view.countShape(true)>0)};a=createMenuButton(menu,IDrawIcon.COPY,"Copy",x198);makeMenuItemTransparent(a);a.checkEnable=function(e){var f=a.getApp();return(f.view.countShape(true)>0)};a=createMenuButton(menu,IDrawIcon.PASTE,"Paste",x219);makeMenuItemTransparent(a);a.checkEnable=function(e){var f=a.getApp();return(f.view.copyShape.length>0)};a=createMenuButton(menu,IDrawIcon.LINE_COLOR,"Line color",x213);makeMenuItemTransparent(a);a=createMenuButton(menu,IDrawIcon.FILL_COLOR,"Fill color",x207);makeMenuItemTransparent(a);a=createMenuButton(menu,IDrawIcon.TEXT_COLOR,"Text color",x232);makeMenuItemTransparent(a);a=createMenuButton(menu,IDrawIcon.PROPERTY,"Property",x220);makeMenuItemTransparent(a);a.checkEnable=function(e){var f=a.getApp();return(f.view.countShape(true)>0)};if(d.isInlineEdit){a=createMenuButton(menu,IDrawIcon.EXIT,"Exit",x205);makeMenuItemTransparent(a)}if(d.isInlineEdit){menu.x255=function(e){return menuBarPaintBackground2(this,e)}}return menu}function createDrawingToolbarPc(c,d){var b=null;var a=new ToolBar(c,0,0,0,0);a.reload=function(){var g=0;var e=0;var p=0;var l=0;var r=0;var m=1;var f=d.menu.rect.h;var j=getViewPort();var o=j.height-f;var h=this.x138();if(this.defaultCategory===ShapeFactoryGet().defaultCategory){return true}if(h.children){h.reset()}ShapeFactoryGet().sortDefaultCategoryByUseCount();var q=ShapeFactoryGet().x139();this.defaultCategory=ShapeFactoryGet().defaultCategory;e=q.length;r=(o-40)/C_GRID_ITEM_HEIGHT;m=Math.ceil(e/r);if(m>4){m=4}else{if(m<2){m=2}}this.x279(r,m);for(var g=0;g<e;g++){var k=q[g];if(k.x182()){b=new x187(h,0,0,0,0);b.x287(g);b.x294(50,50);b.shape=k.createIconShape();b.shape.x297(x74);b.x251=function(s){menuItemDrawShapeOnClicked(this)};makeMenuItemTransparent(b);if(b.shape.asIcon){b.shape.asIcon()}b.x259=function(t){if(this.state===x78){t.fillStyle="#E0E0E0";t.fillRect(this.rect.x,this.rect.y,this.rect.w,this.rect.h)}if(this.shape.asIcon){this.shape.asIcon()}var s=(this.rect.w-this.shape.x171())/2;var v=(this.rect.h-this.shape.x147())/2;this.shape.move(this.rect.x+s,this.rect.y+v);this.shape.paint(t);if(this.state===x80){var u=idrawGetText(this.shape.id);s=this.rect.x+this.rect.w/2;v=this.rect.y+this.rect.h;t.textAlign="center";t.textBaseline="top";t.fillStyle="Orange";t.font="16px sans-serif";t.fillText(u,s,v)}}}}this.needRelayout=true;this.x300(idrawGetText(this.defaultCategory));l=f+5;p=j.width-m*C_GRID_ITEM_WIDTH-40;this.move(p,l);this.x277(5);this.show(true);this.x262();return};a.x289(C_GRID_ITEM_WIDTH,C_GRID_ITEM_HEIGHT);a.reload();a.show(true);return a}function createDrawingMenuMobile(c,d){var a=null;var b=c.rect.w;menu=new x186(c,1,1,b-2,60);a=createMenuButton(menu,IDrawIcon.NEW,"New",x217);a=createMenuButton(menu,IDrawIcon.OPEN,"Open",x218);a=createMenuButton(menu,IDrawIcon.SAVE,"Save",x223);a=createMenuButton(menu,IDrawIcon.UNDO,"Undo",x235);a.checkEnable=function(e){var f=a.getApp();return(f.cmd_history.x64()>0)};a=createMenuButton(menu,IDrawIcon.REDO,"Redo",x221);a.checkEnable=function(e){var f=a.getApp();return(f.cmd_history.x63()>0)};a=createMenuButton(menu,IDrawIcon.CUT,"Cut",x199);a.checkEnable=function(e){var f=a.getApp();return(f.view.countShape(true)>0)};a=createMenuButton(menu,IDrawIcon.COPY,"Copy",x198);a.checkEnable=function(e){var f=a.getApp();return(f.view.countShape(true)>0)};a=createMenuButton(menu,IDrawIcon.PASTE,"Paste",x219);a.checkEnable=function(e){var f=a.getApp();return(f.view.copyShape.length>0)};a=createMenuButton(menu,IDrawIcon.LINE_COLOR,"Line color",x213);a=createMenuButton(menu,IDrawIcon.FILL_COLOR,"Fill color",x207);a=createMenuButton(menu,IDrawIcon.TEXT_COLOR,"Text color",x232);a=createMenuButton(menu,IDrawIcon.PROPERTY,"Property",x220);a.checkEnable=function(e){var f=a.getApp();return(f.view.countShape(true)>0)};menuItem=createMenuButton(menu,IDrawIcon.ABOUT,"About",x188);menu.x255=function(e){return menuBarPaintBackground2(this,e)};return menu}function createDrawingToolbarMobile(c,d){var b=null;var a=new ToolBarMobile(c,0,0,0,0);a.reload=function(){var g=0;var f=0;var o=0;var l=0;var q=0;var m=1;var j=getViewPort();var e=j.width-20;var h=this.x138();if(this.defaultCategory===ShapeFactoryGet().defaultCategory){return true}if(h.children){h.reset()}ShapeFactoryGet().sortDefaultCategoryByUseCount();var p=ShapeFactoryGet().x139();this.defaultCategory=ShapeFactoryGet().defaultCategory;f=p.length;m=(e-100)/C_GRID_ITEM_WIDTH;m=Math.min(f,m);this.x279(1,m);for(var g=0;g<f;g++){var k=p[g];if(k.x182()){b=new x187(h,0,0,0,0);b.x287(g);b.x294(50,50);b.shape=k.createIconShape();b.shape.x297(x74);b.x251=function(r){menuItemDrawShapeOnClicked(this)};if(b.shape.asIcon){b.shape.asIcon()}b.x259=function(s){if(this.state===x78){s.fillStyle="#E0E0E0";s.fillRect(this.rect.x,this.rect.y,this.rect.w,this.rect.h)}var r=(this.rect.w-this.shape.x171())/2;var u=(this.rect.h-this.shape.x147())/2;if(this.shape.asIcon){this.shape.asIcon()}this.shape.move(this.rect.x+r,this.rect.y+u);this.shape.paint(s);if(this.state===x80){var t=idrawGetText(this.shape.id);r=this.rect.x+this.rect.w/2;u=this.rect.y+this.rect.h;s.textAlign="center";s.textBaseline="top";s.fillStyle="Orange";s.font="16px sans-serif";s.fillText(t,r,u)}}}}this.needRelayout=true;o=(j.width-m*C_GRID_ITEM_WIDTH-100)/2;l=j.height-C_GRID_ITEM_HEIGHT-20;this.move(o,l);this.x277(8);this.show(true);this.x262();return};a.x289(C_GRID_ITEM_WIDTH,C_GRID_ITEM_HEIGHT);a.reload();a.show(true);return a}function CalloutShape(){return}CalloutShape.prototype=new RShape();CalloutShape.prototype.getMoreSelectMark=function(b,a){if(b===x46){a.x=this.handle.x;a.y=this.handle.y;return true}return false};CalloutShape.prototype.moveHandle=function(b,a){this.handle.x+=b;this.handle.y+=a;return};CalloutShape.prototype.isPointInThis=function(b,a){this.drawPath(b);return b.isPointInPath(a.x,a.y)};CalloutShape.prototype.setStyle=function(a){this.style.copy(a);this.style.setLineWidth(1);this.needRelayout=true;return};CalloutShape.prototype.drawText=function(b){if(this.isIcon){b.beginPath();this.calcTextPosition();b.textAlign=this.textAlign;b.textBaseline=this.textBaseline;b.font=this.style.getFont();b.fillStyle=this.style.textColor;if(this.style.textU){this.drawTextUnderLine(b,this.textX,this.textY,this.text)}b.fillText(this.text,this.textX,this.textY,this.w);return}b.textAlign="left";b.textBaseline="top";b.font=this.style.getFont();b.fillStyle=this.style.textColor;this.layoutText(b);if(this.text){var a=0;var f=0;var d=this.margin?this.margin:10;b.beginPath();a=d;f=d;for(var c=0;c<this.lines.length;c++){var e=this.lines[c];if((f+this.style.fontSize)>=this.h){break}b.fillText(e,a,f);f+=this.style.fontSize+6}}return};CalloutShape.prototype.asIcon=function(){this.isIcon=true;this.resize(36,30);this.setStyle(getIconShapeStyle());return};CalloutShape.prototype.drawHandle=function(b){var a=this.handle.x;var c=this.handle.y;if(a>=0&&a<=this.w&&c<=0){this.from.x=this.w/2;this.from.y=0}else{if(a>=0&&a<=this.w&&c>=this.h){this.from.x=this.w/2;this.from.y=this.h}else{if(c>=0&&c<=this.h&&a<=0){this.from.x=0;this.from.y=this.h/2}else{if(c>=0&&c<=this.h&&a>=this.w){this.from.x=this.w;this.from.y=this.h/2}else{this.from.x=this.w/2;this.from.y=this.h/2}}}}x100(b,this.from,this.handle,8,8);b.stroke();b.fill();b.beginPath();x94(b,x27,this.from,this.handle,10);b.beginPath()};function RoundCalloutShapeCreator(){var a=["round-callout","round-callout",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=CalloutInit(new RoundCalloutShape(),this.id,b);c.handle=new Point(-10,0);c.setDefSize(300,200);c.style.setFontSize(14);return c};return}function RoundCalloutShape(){this.R=20;return}RoundCalloutShape.prototype=new CalloutShape();RoundCalloutShape.prototype.paintShape=function(a){this.drawPath(a);a.stroke();a.fill();a.beginPath();return};RoundCalloutShape.prototype.drawPath=function(d){var e=0;var a=this.handle.x;var g=this.handle.y;var f=this.R;var c=this.w/4;var b=this.h/4;if(this.isIcon){f=10}if(f>this.w/2){f=this.w/2}if(f>this.h/2){f=this.h/2}if(a<=0&&g<=0){d.moveTo(0,f);d.lineTo(a,g);d.lineTo(f,0)}else{d.arc(f,f,f,Math.PI,1.5*Math.PI,false)}if(g<=0&&a>0&&a<=this.w){if(a<=this.w/2){d.lineTo(this.w/2-c,0);d.lineTo(a,g);d.lineTo(this.w/2,0)}else{d.lineTo(this.w/2,0);d.lineTo(a,g);d.lineTo(this.w/2+c,0)}}else{d.lineTo(this.w-f,0)}if(g<=0&&a>this.w){d.lineTo(a,g);d.lineTo(this.w,f)}else{d.arc(this.w-f,f,f,1.5*Math.PI,2*Math.PI,false)}if(a>this.w&&g>0&&g<=this.h){if(g<=this.h/2){d.lineTo(this.w,this.h/2-b);d.lineTo(a,g);d.lineTo(this.w,this.h/2)}else{d.lineTo(this.w,this.h/2);d.lineTo(a,g);d.lineTo(this.w,this.h/2+b)}}else{d.lineTo(this.w,this.h-f)}if(a>this.w&&g>this.h){d.lineTo(a,g);d.lineTo(this.w-f,this.h)}else{d.arc(this.w-f,this.h-f,f,0,0.5*Math.PI,false)}if(g>this.h&&a>0&&a<=this.w){if(a<=this.w/2){d.lineTo(this.w/2-c,this.h);d.lineTo(a,g);d.lineTo(this.w/2,this.h)}else{d.lineTo(this.w/2,this.h);d.lineTo(a,g);d.lineTo(this.w/2+c,this.h)}}else{d.lineTo(f,this.h)}if(a<=0&&g>this.h){d.lineTo(a,g);d.lineTo(0,this.h-f)}else{d.arc(f,this.h-f,f,0.5*Math.PI,Math.PI,false)}if(a<=0&&g>0&&g<=this.h){if(g<=this.h/2){d.lineTo(0,this.h/2-b);d.lineTo(a,g);d.lineTo(0,this.h/2)}else{d.lineTo(0,this.h/2);d.lineTo(a,g);d.lineTo(0,this.h/2+b)}}else{d.lineTo(0,f)}return};function RectCalloutShapeCreator(){var a=["rect-callout","rect-callout",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=CalloutInit(new RectCalloutShape(),this.id,b);c.handle=new Point(-10,0);c.setDefSize(300,200);c.style.setFontSize(14);return c};return}function RectCalloutShape(){return}RectCalloutShape.prototype=new CalloutShape();RectCalloutShape.prototype.paintShape=function(a){this.drawPath(a);a.stroke();a.fill();a.beginPath();return};RectCalloutShape.prototype.drawPath=function(d){var a=this.handle.x;var e=this.handle.y;var c=this.w/4;var b=this.h/4;c=Math.min(c,b);b=c;d.moveTo(0,b);if(a<=0&&e<=0){d.lineTo(a,e);d.lineTo(c,0)}else{d.lineTo(0,0);d.lineTo(c,0)}if(e<=0&&a>0&&a<=this.w){if(a<=this.w/2){d.lineTo(this.w/2-c,0);d.lineTo(a,e);d.lineTo(this.w/2,0)}else{d.lineTo(this.w/2,0);d.lineTo(a,e);d.lineTo(this.w/2+c,0)}}else{d.lineTo(this.w-c,0)}if(e<=0&&a>this.w){d.lineTo(a,e);d.lineTo(this.w,c)}else{d.lineTo(this.w,0);d.lineTo(this.w,b)}if(a>this.w&&e>0&&e<=this.h){if(e<=this.h/2){d.lineTo(this.w,this.h/2-b);d.lineTo(a,e);d.lineTo(this.w,this.h/2)}else{d.lineTo(this.w,this.h/2);d.lineTo(a,e);d.lineTo(this.w,this.h/2+b)}}else{d.lineTo(this.w,this.h-c)}if(a>this.w&&e>this.h){d.lineTo(a,e);d.lineTo(this.w-c,this.h)}else{d.lineTo(this.w,this.h);d.lineTo(this.w-c,this.h)}if(e>this.h&&a>0&&a<=this.w){if(a<=this.w/2){d.lineTo(this.w/2-c,this.h);d.lineTo(a,e);d.lineTo(this.w/2,this.h)}else{d.lineTo(this.w/2,this.h);d.lineTo(a,e);d.lineTo(this.w/2+c,this.h)}}else{d.lineTo(c,this.h)}if(a<=0&&e>this.h){d.lineTo(a,e);d.lineTo(0,this.h-c)}else{d.lineTo(0,this.h);d.lineTo(0,this.h-b)}if(a<=0&&e>0&&e<=this.h){if(e<=this.h/2){d.lineTo(0,this.h/2-b);d.lineTo(a,e);d.lineTo(0,this.h/2)}else{d.lineTo(0,this.h/2);d.lineTo(a,e);d.lineTo(0,this.h/2+b)}}else{d.lineTo(0,c)}return};function RoundArrowCalloutShapeCreator(){var a=["round-arrow-callout","round-arrow-callout",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=CalloutInit(new RoundArrowCalloutShape(),this.id,b);c.handle=new Point(-10,0);c.from=new Point(0,0);c.setDefSize(300,200);c.style.setFontSize(14);return c};return}function RoundArrowCalloutShape(){this.R=20;return}RoundArrowCalloutShape.prototype=new CalloutShape();RoundArrowCalloutShape.prototype.drawPath=function(a){var b=this.R;if(b>this.w/2){b=this.w/2}if(b>this.h/2){b=this.h/2}a.arc(b,b,b,Math.PI,1.5*Math.PI,false);a.lineTo(this.w-b,0);a.arc(this.w-b,b,b,1.5*Math.PI,2*Math.PI,false);a.lineTo(this.w,this.h-b);a.arc(this.w-b,this.h-b,b,0,0.5*Math.PI,false);a.lineTo(b,this.h);a.arc(b,this.h-b,b,0.5*Math.PI,Math.PI,false);a.lineTo(0,b);return};RoundArrowCalloutShape.prototype.paintShape=function(a){this.drawPath(a);this.drawHandle(a);a.stroke();a.fill();a.beginPath();return};function RectArrowCalloutShapeCreator(){var a=["rect-arrow-callout","rect-arrow-callout",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=CalloutInit(new RectArrowCalloutShape(),this.id,b);c.handle=new Point(-10,0);c.from=new Point(0,0);c.setDefSize(300,200);c.style.setFontSize(14);return c};return}function RectArrowCalloutShape(){return}RectArrowCalloutShape.prototype=new CalloutShape();RectArrowCalloutShape.prototype.drawPath=function(a){a.rect(0,0,this.w,this.h);return};RectArrowCalloutShape.prototype.paintShape=function(a){this.drawPath(a);this.drawHandle(a);a.stroke();a.fill();a.beginPath();return};function NotesCalloutShapeCreator(){var a=["notes-callout","notes-callout",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=CalloutInit(new NotesCalloutShape(),this.id,b);c.from=new Point(0,0);c.handle=new Point(-10,0);c.setDefSize(300,200);c.style.setFontSize(14);return c};return}function NotesCalloutShape(){return}NotesCalloutShape.prototype=new CalloutShape();NotesCalloutShape.prototype.paintShape=function(a){this.drawPath(a);this.drawHandle(a);a.stroke();a.fill();a.beginPath();return};NotesCalloutShape.prototype.drawPath=function(c){var b=this.w>64?this.w/16:this.w/8;var a=this.h>64?this.h/16:this.h/8;c.moveTo(0,0);c.lineTo(this.w-b,0);c.lineTo(this.w-b,a);c.lineTo(this.w,a);c.lineTo(this.w,this.h);c.lineTo(0,this.h);c.lineTo(0,0);c.moveTo(this.w-b,0);c.lineTo(this.w,a);return};function TextCalloutShapeCreator(d,c,b){var a=[d?d:"text-callout","text-callout",null,1];ShapeCreator.apply(this,a);this.createShape=function(e){var f=CalloutInit(new TextCalloutShape(),this.id,e);f.handle=new Point(1,1);f.x300(b?b:idrawGetText("Text"));f.iconText=c?idrawGetText(c):idrawGetText("Text");f.setDefSize(300,200);f.style.setFontSize(14);f.setSizeLimit(60,30,0,0,0);return f};return}function TextCalloutShape(){return}TextCalloutShape.prototype=new CalloutShape();TextCalloutShape.prototype.isPointInThis=function(b,a){b.rect(0,0,this.w,this.h);return b.isPointInPath(a.x,a.y)};TextCalloutShape.prototype.drawPath=function(a){return};TextCalloutShape.prototype.paintShape=function(a){return};TextCalloutShape.prototype.asIcon=function(){this.margin=2;this.isIcon=true;this.setStyle(getIconShapeStyle());this.style.setFontSize(16);this.x300(this.iconText);return};function CalloutInit(b,c,a){RShapeInit(b,c,a);b.setTextType(C_SHAPE_TEXT_TEXTAREA);return b}function ActorShapeCreator(){var a=["uml-actor","UML Actor",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=RShapeInit(new RShape(),this.id,b);c.setTextTitle("Name");c.calcTextPosition=function(){this.textX=this.w/2;this.textY=this.h*0.9;this.textAlign="center";this.textBaseline="moddle";return};c.asIcon=function(){this.isIcon=true;this.resize(40,40);this.setStyle(getIconShapeStyle());this.style.setFontSize(10);return};c.paintShape=function(d){var e=this.h/8;d.arc(this.w/2,e,e/2,0,2*Math.PI);d.stroke();d.moveTo(this.w/2,1.5*e);d.lineTo(this.w/2,4*e);d.moveTo(this.w/2-e,2.5*e);d.lineTo(this.w/2+e,2.5*e);d.moveTo(this.w/2,4*e);d.lineTo(this.w/2-e,5*e);d.moveTo(this.w/2,4*e);d.lineTo(this.w/2+e,5*e);d.stroke();d.beginPath();return};c.x300("Actor");c.setSizeLimit(80,120,160,240,1);return c};return}function UserCaseShapeCreator(){var a=["uml-user-case","UML User Case",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=RShapeInit(new CircleShape(),this.id,b);c.setTextTitle("Name");c.asIcon=function(){this.isIcon=true;this.resize(40,20);this.setStyle(getIconShapeStyle());return};return c};return}function SystemBoudaryShapeCreator(){var a=["uml-system-bounary","UML System Boudary",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=RShapeInit(new RShape(),this.id,b);c.setTextTitle("Name");c.calcTextPosition=function(){this.textX=this.w-10;this.textY=10;this.textAlign="right";this.textBaseline="top";return};c.setDefSize(400,500);return c};return}function ClassShapeCreator(b){var a=["uml-class","UML Class",null,1];if(b){this.isInterface=b;a[0]="uml-interface";a[1]="UML Class"}ShapeCreator.apply(this,a);this.createShape=function(c){var d=RShapeInit(new RShape(),this.id,c);d.setTextTitle("Name");d.setTextType(C_SHAPE_TEXT_TEXTAREA);d.isInterface=this.isInterface;d.x300=function(h){this.name="";this.variables=null;this.operations=null;if(h){var g=null;var f=splitText(h);g=f[0];this.name=g.trim();if(f.length>1){g=f[1];g=g.trim();this.variables=g.split("\n")}if(f.length>2){g=f[2];g=g.trim();this.operations=g.split("\n")}}this.text=h;return};d.drawText=function(f){var j=0;var g=0;var l=0;var m=this.w/2;var k=null;var h=0;var p=this.style.fontSize;var o=this.isIcon?"<<I>>":"<<interface>>";f.beginPath();f.font=this.style.getFont();f.fillStyle=this.style.textColor;if(this.w<100||this.h<100||(!this.variables&&!this.operations)){f.textAlign="center";f.textBaseline="middle";if(this.isInterface){f.textBaseline="bottom";this.style.setFontSize(p*0.8);f.font=this.style.getFont();f.fillText(o,this.w/2,this.h/2,this.w);f.textBaseline="top";this.style.setFontSize(p);f.font=this.style.getFont()}f.fillText(this.name,this.w/2,this.h/2,this.w);return}f.textAlign="center";f.textBaseline="top";if(this.isInterface){this.style.setFontSize(p*0.8);f.font=this.style.getFont();f.fillText(o,m,l,this.w);l=l+p;this.style.setFontSize(p);f.font=this.style.getFont()}f.fillText(this.name,m,l,this.w);l=l+p;l=l+10;f.moveTo(0,l);f.lineTo(this.w,l);f.stroke();f.textAlign="left";f.textBaseline="top";this.style.setFontSize(p*0.7);f.font=this.style.getFont();l=l+10;h=this.style.fontSize;if(this.variables){f.fillStyle=this.style.textColor;g=this.variables.length;for(j=0;j<g;j++){if((l+h)>=this.h){break}k=this.variables[j];if(k){f.fillText("-",10,l,this.w);f.fillText(k,30,l,this.w);l+=h}}}if(this.operations){l=l+10;f.fillStyle=this.style.strokeStyle;f.moveTo(0,l);f.lineTo(this.w,l);f.stroke();f.fillStyle=this.style.textColor;g=this.operations.length;for(j=0;j<g;j++){if((l+h)>=this.h){break}k=this.operations[j];if(k){f.fillText("+",10,l,this.w);f.fillText(k,30,l,this.w);l+=h}}}this.style.setFontSize(p)};d.asIcon=function(){this.isIcon=true;this.x300("Class");this.resize(40,40);this.setStyle(getIconShapeStyle());return};var e=this.isInterface?"Animal":"Dog";d.x300(e+"\n--\nint age;\nstring name;\n--\nvoid eat(int food);\nvoid run(void);");return d};return}function PackageShapeCreator(){var a=["uml-package","UML Package",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=RShapeInit(new RShape(),this.id,b);c.setTextTitle("Name");c.drawText=function(e){if(this.text){var f=this.h/6;var d=this.w/2;if(f<30){d=this.w/4}if(f<20){f=this.h/4}e.beginPath();this.calcTextPosition();e.textAlign=this.textAlign;e.textBaseline=this.textBaseline;e.font=this.style.getFont();e.fillStyle=this.style.textColor;if(this.h<200||this.w<200){e.fillText(this.text,this.textX,this.textY,this.w)}else{e.fillText(this.text,d/2,f/2,this.w)}e.fill()}return};c.paintShape=function(e){var f=this.h/6;var d=this.w/2;if(f<30){d=this.w/4}if(f<20){f=this.h/4}e.rect(0,0,d,f);e.rect(0,f,this.w,this.h-f);e.stroke();e.fill();e.beginPath();e.moveTo(0,f);e.lineTo(d,f);e.stroke();e.beginPath();return};c.asIcon=function(){this.isIcon=true;this.x300("Package");this.resize(40,40);this.setStyle(getIconShapeStyle());return};c.setDefSize(400,400);return c};return}function SelfAggregationShapeCreator(){var a=["uml-self-aggregation","UML Self Aggregation",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=RShapeInit(new RShape(),this.id,b);c.p1=new Point(0,0);c.p2=new Point(0,0);c.paintShape=function(d){d.moveTo(0,this.h/2);d.lineTo(0,0);d.lineTo(this.w,0);d.lineTo(this.w,this.h);d.lineTo(this.w/2,this.h);d.stroke();this.p1.x=this.w;this.p1.y=this.h;this.p2.x=this.w/2;this.p2.y=this.h;x94(d,x21,this.p1,this.p2,this.style.arrowSize);d.beginPath();return};c.asIcon=function(){this.isIcon=true;this.resize(32,32);this.x300("");this.setStyle(getIconShapeStyle());return};return c};return}function StateShapeCreator(){var a=["uml-state","UML state",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=RShapeInit(new ArcRectShape(),this.id,b);c.setTextTitle("Name");return c};return}function StateActivityShapeCreator(){var a=["uml-state-activity","UML State Activity",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=RShapeInit(new RoundRectShape(),this.id,b);c.setTextTitle("Name");c.setTextType(C_SHAPE_TEXT_TEXTAREA);c.x300=function(f){this.name="";this.activities=null;if(f){var e=null;var d=splitText(f);e=d[0];this.name=e.trim();if(d.length>1){e=d[1];e=e.trim();this.activities=e.split("\n")}}this.text=f;return};c.drawText=function(e){var f=0;var l=0;var k=0;var d=this.w/2;var h=null;var j=0;var g=this.style.fontSize;e.beginPath();e.font=this.style.getFont();e.fillStyle=this.style.textColor;e.textAlign="center";e.textBaseline="top";if(!this.activities){k=this.h/2-g}e.fillText(this.name,d,k,this.w);if(this.activities){k=k+g+10;e.moveTo(0,k);e.lineTo(this.w,k);e.stroke();e.textAlign="left";this.style.setFontSize(g*0.7);e.font=this.style.getFont();k=k+10;j=this.style.fontSize;e.fillStyle=this.style.textColor;l=this.activities.length;for(f=0;f<l;f++){if((k+j)>=this.h){break}h=this.activities[f];if(h){e.fillText(h,20,k,this.w);k+=j}}}this.style.setFontSize(g)};c.asIcon=function(){this.isIcon=true;this.resize(36,36);this.x300("");this.setStyle(getIconShapeStyle());return};c.setDefSize(200,80);c.x300("Idle\n--\ndo/sleeping\n");return c};return}function CompositeStateShapeCreator(){var a=["uml-state-composite","UML Composite State",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=RShapeInit(new RoundRectShape(),this.id,b);c.drawText=function(f){var g=this.h*0.25;g=g<80?g:80;if(this.text&&!this.isIcon){var d=this.w/2;var h=g/2;f.beginPath();f.textAlign="center";f.textBaseline="middle";var e=this.style.getFont();f.font=e;f.fillStyle=this.style.textColor;f.fillText(this.text,d,h);f.fill();f.beginPath()}f.moveTo(0,g);f.lineTo(this.w,g);f.stroke();f.beginPath();return};c.setDefSize(400,300);c.x300(idrawGetText("Composite State"));return c};return}function StateInitialShapeCreator(){var a=["uml-state-initial","UML State Initial",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=RShapeInit(new RShape(),this.id,b);c.setTextTitle("Name");c.paintShape=function(e){var f=(this.w<this.h?this.w:this.h)/2;var d=(this.w/2-f)/2+f;var g=(this.h/2-f)/2+f;e.fillStyle=this.style.lineColor;e.arc(d,g,f,0,2*Math.PI,false);e.stroke();e.fill();e.beginPath();return};c.calcTextPosition=function(){this.textX=this.w/2;this.textY=this.h;this.textAlign="center";this.textBaseline="middle";return};c.asIcon=function(){this.isIcon=true;this.resize(20,20);this.setStyle(getIconShapeStyle());this.style.setFontSize(10);return};c.setSizeLimit(30,30,100,100,1);c.setDefSize(30,30);return c};return}function StateEndShapeCreator(){var a=["uml-state-end","UML State End",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=RShapeInit(new RShape(),this.id,b);c.setTextTitle("Name");c.paintShape=function(e){var f=(this.w<this.h?this.w:this.h)/2;var d=(this.w/2-f)/2+f;var g=(this.h/2-f)/2+f;e.arc(d,g,f,0,2*Math.PI,false);e.stroke();e.beginPath();e.fillStyle=this.style.lineColor;e.arc(d,g,f*0.5,0,2*Math.PI,false);e.stroke();e.fill();e.beginPath();return};c.calcTextPosition=function(){this.textX=this.w/2;this.textY=this.h;this.textAlign="center";this.textBaseline="middle";return};c.setSizeLimit(30,30,100,100,1);return c};return}function StateHTransShapeCreator(){var a=["uml-state-h-trans","UML State H Trans",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=new HLineShape();c.setTextTitle("Name");c.initLShape(b,this.id);c.style.setFirstArrowType(x26);c.style.setSecondArrowType(x27);c.style.setLineStyle(x55);c.setOptions(true,true,true,true);return c};return}function StateVTransShapeCreator(){var a=["uml-state-v-trans","UML State V Trans",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=new VLineShape();c.setTextTitle("Name");c.initLShape(b,this.id);c.style.setFirstArrowType(x26);c.style.setSecondArrowType(x27);c.style.setLineStyle(x55);c.setOptions(true,true,true,true);return c};return}function StateCurveTransShapeCreator(b){b=b?b:"uml-state-curve-trans";var a=[b,"UML State Curve Trans",null,1];ShapeCreator.apply(this,a);this.createShape=function(c){var d=new CurveShape();d.setTextTitle("Name");d.drawArrows=function(e){x94(e,x27,this.points[2],this.points[1],this.style.arrowSize);return};d.initLShape(c,this.id);d.setOptions(true,true,true,true);return d};return}function ActiveObjectShapeCreator(){var a=["uml-active-object","UML Active Object",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=RShapeInit(new RShape(),this.id,b);c.handle=new Point(c.w/2,c.h+100);c.from=new Point(c.w/2,c.h);c.setTextTitle("Name");c.asIcon=function(){this.isIcon=true;c.handle.y=c.h+5;this.resize(36,30);this.setStyle(getIconShapeStyle());return};c.getMoreSelectMark=function(e,d){if(e===x46){this.handle.x=this.w/2;d.x=this.handle.x;d.y=this.handle.y<=this.h?this.h+100:this.handle.y;return true}return false};c.moveHandle=function(e,d){this.handle.x=this.w/2;this.handle.y+=d;if(this.handle.y<=this.h){this.handle.y=this.h+10}return};c.paintShape=function(e){var d=this.handle.x;var f=this.handle.y;e.rect(0,0,this.w,this.h);e.stroke();e.fill();this.from.x=this.w/2;this.from.y=this.h;this.handle.x=this.w/2;if(this.handle.y<=this.h){this.handle.y=this.h+10}e.beginPath();x100(e,this.from,this.handle,8,8);e.stroke();e.beginPath();return};c.setStyle=function(d){this.style.copy(d);this.style.setTextU(true);this.style.setTextI(false);this.style.setTextB(false);return};c.style.setTextU(true);return c};return}function ActivationShapeCreator(){var a=["uml-activation","UML ACtivation",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=RShapeInit(new RShape(),this.id,b);c.setTextType(C_SHAPE_TEXT_NONE);c.asIcon=function(){this.isIcon=true;this.resize(20,40);this.setStyle(getIconShapeStyle());return};c.setSizeLimit(20,0,40,0,0);c.setDefSize(20,200);return c};return}function CallShapeCreator(){var a=["uml-call","UML Call",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=new HLineShape();c.setTextTitle("Name");c.initLShape(b,this.id);c.style.setFirstArrowType(x26);c.style.setSecondArrowType(x25);c.style.setLineStyle(x55);c.setOptions(true,true,true,true);return c};return}function SyncMsgShapeCreator(){var a=["uml-sync-msg","UML Sync Message",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=new HLineShape();c.initLShape(b,this.id);c.style.setFirstArrowType(x26);c.style.setSecondArrowType(x27);c.style.setLineStyle(x55);c.setOptions(true,true,true,true);return c};return}function ASyncMsgShapeCreator(){var a=["uml-asyn-msg","UML Async Message",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=new HLineShape();c.initLShape(b,this.id);c.style.setFirstArrowType(x26);c.style.setSecondArrowType(x27);c.style.setLineStyle(x59);c.setOptions(true,true,true,true);return c};return}function LifeLineShapeCreator(){var a=["uml-life-line","UML Object Life Line",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=new VLineShape();c.initLShape(b,this.id);c.style.setFirstArrowType(x26);c.style.setSecondArrowType(x26);c.style.setLineStyle(x59);c.setOptions(true,true,true,true);return c};return}function SelfActivationShapeCreator(){var a=["uml-self-activation","UML Self Activation",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=RShapeInit(new RShape(),this.id,b);c.p1=new Point(0,0);c.p2=new Point(0,0);c.setTextTitle("Name");c.paintShape=function(d){d.moveTo(0,0);d.lineTo(this.w,0);d.lineTo(this.w,this.h);d.lineTo(0,this.h);d.stroke();this.p1.x=this.w;this.p1.y=this.h;this.p2.x=0;this.p2.y=this.h;x94(d,x25,this.p1,this.p2,this.style.arrowSize);d.beginPath();return};return c};return}function ActiveObjectKillerShapeCreator(){var a=["uml-active-object-killer","UML Active Object Killer",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=RShapeInit(new RShape(),this.id,b);c.setTextType(C_SHAPE_TEXT_NONE);c.paintShape=function(d){d.moveTo(0,0);d.lineTo(this.w,this.h);d.moveTo(this.w,0);d.lineTo(0,this.h);return};c.setSizeLimit(40,40,100,100,1);return c};return}function SyncHBarShapeCreator(){var a=["uml-sync-hbar","UML Sync HBar",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=new HLineShape();c.initLShape(b,this.id);c.style.setFirstArrowType(x26);c.style.setSecondArrowType(x26);c.style.setLineWidth(3);c.style.setLineStyle(x55);c.setOptions(true,true,true,true);return c};return}function SyncVBarShapeCreator(){var a=["uml-sync-vbar","UML Sync VBar",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=new VLineShape();c.initLShape(b,this.id);c.style.setFirstArrowType(x26);c.style.setSecondArrowType(x26);c.style.setLineWidth(3);c.style.setLineStyle(x55);c.setOptions(true,true,true,true);return c};return}function ActionShapeCreator(){var a=["uml-action","UML Action",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=new RoundRectShape();c.setTextTitle("Name");return RShapeInit(c,this.id,b)};return}function ActivityShapeCreator(){var a=["uml-activity","UML Activity",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=new ArcRectShape();c.setTextTitle("Name");return RShapeInit(c,this.id,b)};return}function SingalReceiptShapeCreator(){var a=["uml-signal-receipt","UML Signal Receipt",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=RShapeInit(new RShape(),this.id,b);c.setTextTitle("Name");c.paintShape=function(d){var e=Math.min(this.h,this.w)/2;d.moveTo(0,0);d.lineTo(e,this.h/2);d.lineTo(0,this.h);d.lineTo(this.w,this.h);d.lineTo(this.w,0);d.lineTo(0,0)};c.asIcon=function(){this.isIcon=true;this.resize(40,20);this.setStyle(getIconShapeStyle());return};return c};return}function SingalSindingShapeCreator(){var a=["uml-signal-sending","UML Signal Sending",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=RShapeInit(new RShape(),this.id,b);c.setTextTitle("Name");c.paintShape=function(d){var e=Math.min(this.h,this.w)/2;d.moveTo(0,0);d.lineTo(this.w-e,0);d.lineTo(this.w,this.h/2);d.lineTo(this.w-e,this.h);d.lineTo(0,this.h);d.lineTo(0,0)};c.asIcon=function(){this.isIcon=true;this.resize(40,20);this.setStyle(getIconShapeStyle());return};return c};return}function ObjectShapeCreator(){var a=["uml-object","UML Object",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=RShapeInit(new RShape(),this.id,b);c.setStyle=function(d){this.style.copy(d);this.style.setTextU(true);this.style.setTextI(false);this.style.setTextB(false);return};return c};return}function BranchShapeCreator(){var a=["uml-branch","UML Branch",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=new DiamondShape();return RShapeInit(c,this.id,b)};return}function ActivityInitialShapeCreator(){var a=["uml-init-activity","UML Init Activity",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=RShapeInit(new RShape(),this.id,b);c.setTextTitle("Name");c.paintShape=function(e){var f=(this.w<this.h?this.w:this.h)/2;var d=(this.w/2-f)/2+f;var g=(this.h/2-f)/2+f;e.fillStyle=this.style.lineColor;e.arc(d,g,f,0,2*Math.PI,false);e.stroke();e.fill();e.beginPath();return};c.calcTextPosition=function(){this.textX=this.w/2;this.textY=this.h;this.textAlign="center";this.textBaseline="middle";return};c.asIcon=function(){this.isIcon=true;this.resize(20,20);this.setStyle(getIconShapeStyle());this.style.setFontSize(10);return};c.setSizeLimit(30,30,100,100,1);return c};return}function ActivityFinalShapeCreator(){var a=["uml-final-activity","UML Final Activity",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=RShapeInit(new RShape(),this.id,b);c.setTextTitle("Name");c.paintShape=function(e){var f=(this.w<this.h?this.w:this.h)/2;var d=(this.w/2-f)/2+f;var g=(this.h/2-f)/2+f;e.fillStyle=this.style.lineColor;e.arc(d,g,f*0.5,0,2*Math.PI,false);e.stroke();e.fill();e.beginPath();e.arc(d,g,f,0,2*Math.PI,false);e.stroke();e.beginPath();return};c.calcTextPosition=function(){this.textX=this.w/2;this.textY=this.h;this.textAlign="center";this.textBaseline="middle";return};c.setSizeLimit(30,30,100,100,1);return c};return}function HourGlassShapeCreator(){var a=["uml-hour-glass","UML Hour Glass",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=RShapeInit(new RShape(),this.id,b);c.paintShape=function(d){d.moveTo(0,0);d.lineTo(this.w,0);d.lineTo(0,this.h);d.lineTo(this.w,this.h);d.lineTo(0,0);return};c.calcTextPosition=function(d){this.textX=this.w/2;this.textY=this.h+5;this.textAlign="center";this.textBaseline="top";return};c.calcTextPosition=function(){this.textX=this.w/2;this.textY=this.h;this.textAlign="center";this.textBaseline="top";return};c.setSizeLimit(40,60,80,120,0);return c};return}function FlowEndShapeCreator(){var a=["uml-flow-end","UML Flow End",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=RShapeInit(new RShape(),this.id,b);c.setTextTitle("Name");c.paintShape=function(d){var f=this.w/2;var e=f/1.414;d.arc(f,this.h/2,this.w/2,0,2*Math.PI,0);d.stroke();d.fill();d.beginPath();d.moveTo(f-e,f-e);d.lineTo(f+e,f+e);d.moveTo(f+e,f-e);d.lineTo(f-e,f+e);d.stroke();d.beginPath()};c.calcTextPosition=function(d){this.textX=this.w/2;this.textY=this.h+5;this.textAlign="center";this.textBaseline="top";return};c.setSizeLimit(40,40,80,80,1);return c};return}function SwinLaneShapeCreator(){var a=["uml-swin-lane","UML Swin Lane",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=RShapeInit(new RShape(),this.id,b);c.setTextTitle("Obejct names");c.drawText=function(d){return};c.x300=function(d){this.text=d.length>0?d:"Object1,Object2,Object3";this.names=this.text.split(",");return};c.paintShape=function(e){var g=this.names.length;var d=this.w/g;e.rect(0,0,this.w,this.h);e.stroke();e.fill();e.beginPath();for(var f=0;f<g;f++){e.moveTo(f*d,0);e.lineTo(f*d,this.h)}e.stroke();e.beginPath();if(e.measureText(this.text).width<this.w){e.textAlign="center";e.textBaseline="top";e.font=this.style.getFont();e.fillStyle=this.style.textColor;for(var f=0;f<g;f++){e.fillText(this.names[f],d*f+d/2,5,d)}}};c.x300("Object1,Object2,Object3");c.setSizeLimit(400,500,0,0);return c};return}function AssocShapeCreator(){var a=["uml-assoc","UML Assoc",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=new LineShape();c.initLShape(b,this.id);c.setTextType(C_SHAPE_TEXT_TEXTAREA);c.style.setFirstArrowType(x26);c.style.setSecondArrowType(x26);c.setOptions(true,true,true,true);c.drawText=function(g){if(!this.text){return}var f=null;var j=null;var e=null;var h=null;var d=splitText(this.text);if(d.length===1){f=d[0]}else{j=d[0];f=d[1];if(d.length>2){e=d[2]}}g.save();g.beginPath();g.font=this.style.getFont();g.fillStyle=this.style.textColor;g.textBaseline="bottom";if(j){g.textAlign="left";g.fillText(j,this.points[0].x,this.points[0].y)}if(e){g.textAlign="right";g.fillText(e,this.points[1].x,this.points[1].y)}if(f){g.textAlign="center";g.fillText(f,(this.points[1].x+this.points[0].x)/2,(this.points[1].y+this.points[0].y)/2)}g.restore()};return c};return}function StoredDataShapeCreator(){var a=["fc-stored-data","Stored Data",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=RShapeInit(new StoredDataShape(),this.id,b);c.setDefSize(200,100);return c};return}function StoredDataShape(){return}StoredDataShape.prototype=new RShape();StoredDataShape.prototype.paintShape=function(b){var a=this.w;var d=this.h;var e=0.707*d;var c=0.207*d;b.moveTo(c,0);b.lineTo(a,0);b.arc(a+d/2,d/2,e,1.25*Math.PI,0.75*Math.PI,true);b.lineTo(c,d);b.arc(e,d/2,e,0.75*Math.PI,1.25*Math.PI);return};function DirectDataShapeCreator(){var a=["fc-direct-data","Direct Data",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=RShapeInit(new DirectDataShape(),this.id,b);c.setDefSize(200,100);return c};return}function DirectDataShape(){return}DirectDataShape.prototype=new RShape();DirectDataShape.prototype.paintShape=function(b){var a=this.w;var d=this.h;var e=0.707*d;var c=0.207*d;b.moveTo(c,0);b.lineTo(a-c,0);b.arc(a-e,d/2,e,1.75*Math.PI,0.25*Math.PI,false);b.lineTo(c,d);b.arc(e,d/2,e,0.75*Math.PI,1.25*Math.PI,false);b.fill();b.stroke();b.beginPath();b.arc(a+d/2-c,d/2,e,1.25*Math.PI,0.75*Math.PI,true);b.stroke();b.beginPath();return};function SeqeuncialAccessShapeCreator(){var a=["fc-seq-access","Seqeuncial Access",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=RShapeInit(new SeqeuncialAccessShape(),this.id,b);c.setDefSize(100,100);return c};return}function SeqeuncialAccessShape(){return}SeqeuncialAccessShape.prototype=new RShape();SeqeuncialAccessShape.prototype.paintShape=function(b){var a=this.w/2;var d=this.h/2;var c=this.h/this.w;b.save();b.translate(a,d);b.scale(1,c);b.arc(0,0,this.w/2,0,2*Math.PI);b.restore();b.fill();b.stroke();b.beginPath();b.moveTo(this.w/2,this.h);b.lineTo(this.w,this.h);b.stroke();b.beginPath();return};function ManualInputShapeCreator(){var a=["fc-manual-input","Manual Input",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=RShapeInit(new ManualInputShape(),this.id,b);c.setDefSize(200,100);return c};return}function ManualInputShape(){return}ManualInputShape.prototype=new RShape();ManualInputShape.prototype.paintShape=function(a){a.moveTo(0,this.h/2);a.lineTo(this.w,0);a.lineTo(this.w,this.h);a.lineTo(0,this.h);a.lineTo(0,this.h/2);return};function DocumentShapeCreator(){var a=["fc-document","Document",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=RShapeInit(new DocumentShape(),this.id,b);c.setDefSize(200,100);return c};return}function DocumentShape(){return}DocumentShape.prototype=new RShape();DocumentShape.prototype.paintShape=function(a){a.moveTo(0,this.h);a.lineTo(0,0);a.lineTo(this.w,0);a.lineTo(this.w,this.h);a.bezierCurveTo(this.w*0.6,0.7*this.h,0.4*this.w,1.3*this.h,0,this.h);return};function mathInitShape(c,d,a,b){c.asIcon=function(){this.isIcon=true;this.resize(d,a);this.setStyle(getIconShapeStyle());this.style.setLineWidth(2);return};if(!b){c.setTextType(C_SHAPE_TEXT_NONE)}else{c.setTextType(C_SHAPE_TEXT_INPUT)}c.x310=function(){x308(this,this.textType,false,false);return};c.getNearPoint=function(e){return null};c.setSizeLimit(5,40,40,0,0);c.setDefSize(40,40);c.style.setLineWidth(3);return c}function LBraceShapeCreator(){var a=["math-l-brace","Math Left Brace",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=RShapeInit(new RShape(),this.id,b);c.paintShape=function(d){d.moveTo(this.w,0);d.lineTo(0,0);d.lineTo(0,this.h);d.lineTo(this.w,this.h);d.stroke();d.beginPath();return};return mathInitShape(c,20,36)};return}function RBraceShapeCreator(){var a=["math-r-brace","Math right Brace",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=RShapeInit(new RShape(),this.id,b);c.paintShape=function(d){d.moveTo(0,0);d.lineTo(this.w,0);d.lineTo(this.w,this.h);d.lineTo(0,this.h);d.stroke();d.beginPath();return};return mathInitShape(c,20,36)};return}function LBracketShapeCreator(){var a=["math-l-bracket","Math Left Bracket",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=RShapeInit(new RShape(),this.id,b);c.paintShape=function(e){var f=this.w<this.h/4?this.w:this.h/4;e.moveTo(0,f);e.arc(f,f,f,Math.PI,Math.PI*1.5);e.moveTo(f,this.h);e.arc(f,this.h-f,f,Math.PI/2,Math.PI);var d=f/2;e.moveTo(0,f);e.lineTo(0,this.h/2-d);e.lineTo(-d,this.h/2);e.lineTo(0,this.h/2+d);e.lineTo(0,this.h-f);e.stroke();e.beginPath();return};return mathInitShape(c,20,36)};return}function RBracketShapeCreator(){var a=["math-r-bracket","Math right Bracket",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=RShapeInit(new RShape(),this.id,b);c.paintShape=function(e){e.translate(this.w/2,this.h/2);e.rotate(Math.PI);e.translate(-this.w/2,-this.h/2);var f=this.w<this.h/4?this.w:this.h/4;e.moveTo(0,f);e.arc(f,f,f,Math.PI,Math.PI*1.5);e.moveTo(f,this.h);e.arc(f,this.h-f,f,Math.PI/2,Math.PI);var d=f/2;e.moveTo(0,f);e.lineTo(0,this.h/2-d);e.lineTo(-d,this.h/2);e.lineTo(0,this.h/2+d);e.lineTo(0,this.h-f);e.stroke();e.beginPath();return};return mathInitShape(c,20,36)};return}function LParenthesisShapeCreator(){var a=["math-l-parenthesis","Math Left Parenthesis",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=RShapeInit(new RShape(),this.id,b);c.paintShape=function(d){var e=(0.25*this.h*this.h+this.w*this.w)/(2*this.w);d.arc(this.w+0.5*this.h,this.h/2,this.h/Math.sqrt(2),0.75*Math.PI,1.25*Math.PI);d.stroke();d.beginPath();return};return mathInitShape(c,20,36)};return}function RParenthesisShapeCreator(){var a=["math-r-parenthesis","Math right Parenthesis",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=RShapeInit(new RShape(),this.id,b);c.paintShape=function(d){d.translate(this.w/2,this.h/2);d.rotate(Math.PI);d.translate(-this.w/2,-this.h/2);var e=(0.25*this.h*this.h+this.w*this.w)/(2*this.w);d.arc(this.w+0.5*this.h,this.h/2,this.h/Math.sqrt(2),0.75*Math.PI,1.25*Math.PI);d.stroke();d.beginPath();return};return mathInitShape(c,20,36)};return}function MultiplicationShapeCreator(){var a=["math-multiplication","Math Multiplication",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=RShapeInit(new RShape(),this.id,b);c.paintShape=function(d){d.moveTo(0,0);d.lineTo(this.w,0);d.moveTo(this.w/4,0);d.lineTo(this.w/4,this.h);d.moveTo(this.w*0.75,0);d.lineTo(this.w*0.75,this.h);d.stroke();d.beginPath();return};mathInitShape(c,20,36);c.setSizeLimit(40,40,100,100,0);return c};return}function SumShapeCreator(){var a=["math-sum","Math Sum",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=RShapeInit(new RShape(),this.id,b);c.paintShape=function(d){d.moveTo(this.w,0);d.lineTo(0,0);d.lineTo(this.w/2,this.h/2);d.lineTo(0,this.h);d.lineTo(this.w,this.h);d.stroke();d.beginPath();return};mathInitShape(c,20,36);c.setSizeLimit(40,40,100,100,0);return c};return}function MathVLineShapeCreator(){var a=["math-vline","Math VLine",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=new VLineShape();c.initLShape(b,this.id);c.style.setFirstArrowType(x26);c.style.setSecondArrowType(x26);c.style.setLineWidth(2);c.style.setLineStyle(x55);c.setOptions(true,true,true,true);return c};return}function MathHLineShapeCreator(){var a=["math-hline","Math HLine",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=new HLineShape();c.initLShape(b,this.id);c.style.setFirstArrowType(x26);c.style.setSecondArrowType(x26);c.style.setLineWidth(2);c.style.setLineStyle(x55);c.setOptions(true,true,true,true);return c};return}function MathLineShapeCreator(){var a=["math-line","Math Line",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=new LineShape();c.initLShape(b,this.id);c.style.setFirstArrowType(x26);c.style.setSecondArrowType(x26);c.style.setLineWidth(2);c.style.setLineStyle(x55);c.setOptions(true,true,true,true);return c};return}function SqrtShapeCreator(){var a=["math-sqrt","Math Sqrt",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=RShapeInit(new RShape(),this.id,b);c.paintShape=function(d){var e=this.h/4;if(e>20){e=20}d.moveTo(0,this.h);d.lineTo(e,this.h-e);d.lineTo(2*e,this.h);d.lineTo(3*e,0);d.lineTo(this.w,0);d.stroke();d.beginPath();return};c.calcTextPosition=function(){var d=this.h/4;if(d>20){d=20}this.textX=this.w/2+d;this.textY=this.h/2;this.textAlign="center";this.textBaseline="middle";return};mathInitShape(c,36,36,true);c.setSizeLimit(80,30,0,0,0);return c};return}function IntegralShapeCreator(){var a=["math-integral","Math Integral",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=RShapeInit(new RShape(),this.id,b);c.paintShape=function(d){d.moveTo(this.w,0);d.bezierCurveTo(this.w*0.2,0.25*this.h,this.w*0.8,0.75*this.h,0,this.h);d.stroke();d.beginPath();return};mathInitShape(c,36,36);c.setSizeLimit(20,40,100,200,0);return c};return}function ExpressionShapeCreator(){var a=["math-expr","Math Expression",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=RShapeInit(new RShape(),this.id,b);c.asIcon=function(){this.isIcon=true;this.resize(40,40);this.setStyle(getIconShapeStyle());this.x300(idrawGetText("Expression"));return};c.paintShape=function(d){d.beginPath()};c.x310=function(){x308(this,this.textType,false,false,"Expression");return};c.x300("(a+b)");c.setDefSize(200,40);c.getNearPoint=function(d){return null};return c};return}function UpRightShapeCreator(){var a=["math-up-right","Math UP Right",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=RShapeInit(new RShape(),this.id,b);mathInitShape(c,36,36);c.setSizeLimit(40,40,0,0,0);c.paintShape=function(d){d.moveTo(this.w/2,0);d.lineTo(this.w/2,this.h);d.moveTo(0,this.h);d.lineTo(this.w,this.h);d.stroke();d.beginPath()};return c};return}function ReasonShapeCreator(){var a=["math-reason","Math Reason",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=RShapeInit(new RShape(),this.id,b);mathInitShape(c,36,36);c.setSizeLimit(40,40,0,0,0);c.paintShape=function(d){var e=Math.min(this.w,this.h)/8;d.fillStyle=d.strokeStyle;d.arc(this.w/2,e,e,0,2*Math.PI);d.fill();d.beginPath();d.arc(e,this.h-e,e,0,2*Math.PI);d.fill();d.beginPath();d.arc(this.w-e,this.h-e,e,0,2*Math.PI);d.fill();d.beginPath()};return c};return}function ResultShapeCreator(){var a=["math-result","Math Result",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=RShapeInit(new RShape(),this.id,b);mathInitShape(c,36,36);c.setSizeLimit(40,40,0,0,0);c.paintShape=function(d){var e=Math.min(this.w,this.h)/8;d.translate(this.w/2,this.h/2);d.rotate(Math.PI);d.translate(-this.w/2,-this.h/2);d.fillStyle=d.strokeStyle;d.arc(this.w/2,e,e,0,2*Math.PI);d.fill();d.beginPath();d.arc(e,this.h-e,e,0,2*Math.PI);d.fill();d.beginPath();d.arc(this.w-e,this.h-e,e,0,2*Math.PI);d.fill();d.beginPath()};return c};return}function ExistShapeCreator(){var a=["math-exist","Math Exist",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=RShapeInit(new RShape(),this.id,b);mathInitShape(c,36,36);c.setSizeLimit(40,40,0,0,0);c.paintShape=function(d){d.moveTo(0,0);d.lineTo(this.w/2,this.h);d.lineTo(this.w,0);d.moveTo(0,this.h/2);d.lineTo(this.w,this.h/2);d.stroke();d.beginPath()};return c};return}function UnionShapeCreator(){var a=["math-union","Math Union",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=RShapeInit(new RShape(),this.id,b);mathInitShape(c,30,36);c.setSizeLimit(30,40,0,0,0);c.paintShape=function(d){var e=Math.min(this.w,this.h)/2;d.moveTo(this.w/2-e,this.h);d.lineTo(this.w/2-e,e);d.arc(this.w/2,e,e,Math.PI,Math.PI*2);d.lineTo(this.w/2+e,this.h);d.stroke();d.beginPath()};return c};return}function IntersectionShapeCreator(){var a=["math-intersection","Math Intersection",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=RShapeInit(new RShape(),this.id,b);mathInitShape(c,30,36);c.setSizeLimit(30,40,0,0,0);c.paintShape=function(d){var e=Math.min(this.w,this.h)/2;d.translate(this.w/2,this.h/2);d.rotate(Math.PI);d.translate(-this.w/2,-this.h/2);d.moveTo(this.w/2-e,this.h);d.lineTo(this.w/2-e,e);d.arc(this.w/2,e,e,Math.PI,Math.PI*2);d.lineTo(this.w/2+e,this.h);d.stroke();d.beginPath()};return c};return}function BelongShapeCreator(){var a=["math-belong","Math belong",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=RShapeInit(new RShape(),this.id,b);mathInitShape(c,30,36);c.setSizeLimit(30,40,0,0,0);c.paintShape=function(e){var d=this.w/2;var g=this.h/2;var f=this.h/this.w;e.translate(d,g);e.scale(1,f);e.arc(0,0,this.w/2,0.5*Math.PI,1.5*Math.PI);e.moveTo(-this.w/2,0);e.lineTo(0,0);e.stroke();e.beginPath()};return c};return}function EllipsisShapeCreator(){var a=["math-ellipsis","Math Ellipsis",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=RShapeInit(new RShape(),this.id,b);mathInitShape(c,30,36);c.setSizeLimit(30,40,0,0,0);c.paintShape=function(d){var e=Math.min(this.w,this.h)/12;d.arc(e,this.h/2,e,0,Math.PI*2);d.arc(this.w/2,this.h/2,e,0,Math.PI*2);d.arc(this.w-e,this.h/2,e,0,Math.PI*2);d.fillStyle=d.strokeStyle;d.fill();d.beginPath()};return c};return}function NotEqualShapeCreator(){var a=["math-not-equal","Math Not Equal",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=RShapeInit(new RShape(),this.id,b);mathInitShape(c,30,36);c.setSizeLimit(30,40,0,0,0);c.paintShape=function(d){d.moveTo(0,this.h/4);d.lineTo(this.w,this.h/4);d.moveTo(0,3*this.h/4);d.lineTo(this.w,3*this.h/4);d.moveTo(this.w/4,0);d.lineTo(this.w*3/4,this.h);d.stroke();d.beginPath()};return c};return}function EqualShapeCreator(){var a=["math-equal","Math Equal",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=RShapeInit(new RShape(),this.id,b);mathInitShape(c,30,36);c.setSizeLimit(30,40,0,0,0);c.paintShape=function(d){d.moveTo(0,this.h/4);d.lineTo(this.w,this.h/4);d.moveTo(0,3*this.h/4);d.lineTo(this.w,3*this.h/4);d.stroke();d.beginPath()};return c};return}function LessShapeCreator(){var a=["math-less","Math Less",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=RShapeInit(new RShape(),this.id,b);mathInitShape(c,30,30);c.setSizeLimit(30,40,0,0,0);c.paintShape=function(d){d.moveTo(this.w,0);d.lineTo(0,this.h/2);d.lineTo(this.w,this.h);d.stroke();d.beginPath()};return c};return}function LessEqualShapeCreator(){var a=["math-less-equal","Math Less Equal",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=RShapeInit(new RShape(),this.id,b);mathInitShape(c,30,30);c.setSizeLimit(30,40,0,0,0);c.paintShape=function(d){d.moveTo(this.w,0);d.lineTo(0,this.h*0.25);d.lineTo(this.w,this.h*0.75);d.moveTo(0,this.h*0.5);d.lineTo(this.w,this.h);d.stroke();d.beginPath()};return c};return}function GreateShapeCreator(){var a=["math-greate","Math Greate",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=RShapeInit(new RShape(),this.id,b);mathInitShape(c,30,30);c.setSizeLimit(30,40,0,0,0);c.paintShape=function(d){d.moveTo(0,0);d.lineTo(this.w,this.h*0.5);d.lineTo(0,this.h);d.stroke();d.beginPath()};return c};return}function GreateEqualShapeCreator(){var a=["math-greate-equal","Math Greate Equal",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=RShapeInit(new RShape(),this.id,b);mathInitShape(c,30,30);c.setSizeLimit(30,40,0,0,0);c.paintShape=function(d){d.moveTo(0,0);d.lineTo(this.w,this.h*0.25);d.lineTo(0,this.h*0.75);d.moveTo(this.w,this.h*0.5);d.lineTo(0,this.h);d.stroke();d.beginPath()};return c};return}function LessLessShapeCreator(){var a=["math-less-less","Math Less Less",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=RShapeInit(new RShape(),this.id,b);mathInitShape(c,30,30);c.setSizeLimit(30,40,0,0,0);c.paintShape=function(d){d.moveTo(this.w/2,0);d.lineTo(0,this.h/2);d.lineTo(this.w/2,this.h);d.moveTo(this.w,0);d.lineTo(this.w/2,this.h/2);d.lineTo(this.w,this.h);d.stroke();d.beginPath()};return c};return}function GreateGreateShapeCreator(){var a=["math-greate-greate","Math Greate Greate",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=RShapeInit(new RShape(),this.id,b);mathInitShape(c,30,30);c.setSizeLimit(30,40,0,0,0);c.paintShape=function(d){d.moveTo(0,0);d.lineTo(this.w/2,this.h/2);d.lineTo(0,this.h);d.moveTo(this.w/2,0);d.lineTo(this.w,this.h/2);d.lineTo(this.w/2,this.h);d.stroke();d.beginPath()};return c};return}function AlmostEqualShapeCreator(){var a=["math-almost-equal","Math Almost Equal",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=RShapeInit(new RShape(),this.id,b);mathInitShape(c,30,30);c.setSizeLimit(30,40,0,0,0);c.paintShape=function(d){d.moveTo(0,this.h/2);d.bezierCurveTo(this.w*0.25,-0.5*this.h,this.w*0.75,this.h,this.w,0);d.moveTo(0,this.h);d.bezierCurveTo(this.w*0.25,0,this.w*0.75,this.h*1.5,this.w,this.h/2);d.stroke();d.beginPath();d.stroke();d.beginPath()};return c};return}function InfiniteShapeCreator(){var a=["math-infinite","Math Infinite",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=RShapeInit(new RShape(),this.id,b);mathInitShape(c,30,30);c.setSizeLimit(30,40,0,0,0);c.paintShape=function(e){var d=this.w/2;var g=this.h/2;var f=this.h/this.w;e.translate(d,g);e.scale(1,f);e.translate(-d,0);e.arc(this.w*0.25,0,this.w*0.25,0,2*Math.PI);e.stroke();e.beginPath();e.arc(this.w*0.75,0,this.w*0.25,0,2*Math.PI);e.stroke();e.beginPath()};return c};return}function SuperscriptShapeCreator(){var a=["math-super-script","Math Super Script",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=RShapeInit(new RShape(),this.id,b);c.setSizeLimit(30,40,0,0,0);c.x300("(a+b)\n--\n(c+d)");c.setTextType(C_SHAPE_TEXT_TEXTAREA);c.asIcon=function(){this.isIcon=true;this.resize(30,30);this.setStyle(getIconShapeStyle());this.style.setLineWidth(2);c.style.setFontSize(32);c.x300("a\n--\nb");return};c.drawText=function(d){return};c.paintShape=function(e){if(this.text){e.beginPath();this.calcTextPosition();var d=splitText(this.text);var f=this.style.fontSize;if(d.length<2){return}e.translate(0,-f/2);e.textAlign="right";e.textBaseline="top";e.font=this.style.getFont();e.fillStyle=this.style.textColor;e.fillText(d[1],this.w/2,this.h/2,this.w/2);this.style.setFontSize(f*0.5);e.font=this.style.getFont();e.textAlign="left";e.textBaseline="bottom";e.fillText(d[0],this.w/2,this.h/2+f/2,this.w/2);this.style.setFontSize(f)}return};c.x310=function(){x308(this,this.textType,false,false);return};c.getNearPoint=function(d){return null};return c};return}function SubcriptShapeCreator(){var a=["math-sub-script","Math Sub Script",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=RShapeInit(new RShape(),this.id,b);c.setSizeLimit(30,40,0,0,0);c.x300("(a+b)\n--\n(c+d)");c.setTextType(C_SHAPE_TEXT_TEXTAREA);c.asIcon=function(){this.isIcon=true;this.resize(36,36);this.setStyle(getIconShapeStyle());this.style.setLineWidth(2);c.style.setFontSize(32);c.x300("a\n--\n2");return};c.drawText=function(d){return};c.paintShape=function(e){if(this.text){e.beginPath();this.calcTextPosition();var d=splitText(this.text);var f=this.style.fontSize;if(d.length<2){return}e.translate(0,f/2);e.textAlign="right";e.textBaseline="bottom";e.font=this.style.getFont();e.fillStyle=this.style.textColor;e.fillText(d[0],this.w/2,this.h/2,this.w/2);this.style.setFontSize(f*0.5);e.font=this.style.getFont();e.textAlign="left";e.textBaseline="top";e.fillText(d[1],this.w/2,this.h/2-f/2,this.w/2);this.style.setFontSize(f)}return};c.x310=function(){x308(this,this.textType,false,false);return};c.getNearPoint=function(d){return null};return c};return}function DivisionShapeCreator(){var a=["math-division","Math Division",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=RShapeInit(new RShape(),this.id,b);c.setSizeLimit(30,40,0,0,0);c.x300("(a+b)\n--\n(c+d)");c.setTextType(C_SHAPE_TEXT_TEXTAREA);c.asIcon=function(){this.isIcon=true;this.resize(20,36);this.setStyle(getIconShapeStyle());this.style.setLineWidth(2);c.style.setFontSize(16);c.x300("1\n--\n2");return};c.drawText=function(d){return};c.paintShape=function(e){if(this.text){e.beginPath();this.calcTextPosition();var d=splitText(this.text);if(d.length<2){return}e.textAlign="center";e.textBaseline="bottom";e.font=this.style.getFont();e.fillStyle=this.style.textColor;e.fillText(d[0],this.w/2,this.h/2,this.w/2);e.moveTo(0,this.h/2);e.lineTo(this.w,this.h/2);e.textAlign="center";e.textBaseline="top";e.fillText(d[1],this.w/2,this.h/2,this.w/2)}return};c.x310=function(){x308(this,this.textType,false,false);return};c.getNearPoint=function(d){return null};return c};return}var x31='{"unit":"%","fillColor":"gold", "lineColor":"black", "yMin":0, "yMax":100, "items":[{"fillColor":"red", "lineColor":"blue", "title":"First", "value":60 }, {"fillColor":"green", "lineColor":"blue", "title":"Second", "value":80 }, {"fillColor":"blue", "lineColor":"blue", "title":"Third", "value":40 }]}';function ChartShape(){return}ChartShape.prototype=new RShape();ChartShape.prototype.setStyle=function(a){this.style.copy(a);this.style.enableShadow=false;this.style.enableGradientFill=false;return};ChartShape.prototype.fixMinMax=function(){if(this.hasData()){n=this.data.items.length;for(i=0;i<n;i++){var a=this.data.items[i];if(!a.value){a.value=0}if(this.yMin>a.value){this.yMin=a.value}if(this.yMax<a.value){this.yMax=a.value}}}else{this.yMin=0;this.yMax=100}return};ChartShape.prototype.getTextCookie=function(b){var a=this.getX();var j=this.getY();var c=this.x171();var e=this.x147();var f=1;var g=2;var d=3;if(b.x<(a+0.25*c)&&b.y>(j+0.25*e)){return d}if(b.y>(j+0.8*e)){return g}return f};ChartShape.prototype.setData=function(b){var a=0;var d=0;this.yMin=0;this.yMax=100;this.dataText=b;try{this.data=JSON.parse(b)}catch(c){wtkLog("parse:"+b+" "+c.message)}this.unit="";if(this.data.unit){this.unit=this.data.unit}if(this.data){if(this.data.yMin){this.yMin=this.data.yMin}if(this.data.yMax){this.yMax=this.data.yMax}}this.fixMinMax();return};function XyChartShape(){this.setMargin(100,40,20,40);return}XyChartShape.prototype=new ChartShape();XyChartShape.prototype.toJson=function(){var a=new Object();a.id=this.id;a.dx=this.dx;a.dy=this.dy;a.w=this.w;a.h=this.h;a.text=this.text;a.text2=this.text2;a.imageUrl=this.imageUrl;a.style=this.style.toJson();if(this.handle){a.handle=this.handle}a.unit=this.unit;a.yMax=this.yMax;a.yMin=this.yMin;a.text2=this.text2;a.text3=this.text3;a.leftMargin=this.leftMargin;a.rightMargin=this.rightMargin;a.topMargin=this.topMargin;a.bottomMargin=this.bottomMargin;a.data=this.data;a.xGrids=this.xGrids;a.yGrids=this.yGrids;return a};XyChartShape.prototype.fromJson=function(a){this.dx=a.dx;this.dy=a.dy;this.w=a.w;this.h=a.h;this.x300(a.text);this.setText2(a.text2);if(a.style){this.style.fromJson(a.style)}this.x288(a.imageUrl);this.state=x74;if(a.handle){this.handle=a.handle}this.unit=a.unit;this.yMax=a.yMax;this.yMin=a.yMin;this.text2=a.text2;this.text3=a.text3;this.leftMargin=a.leftMargin;this.rightMargin=a.rightMargin;this.topMargin=a.topMargin;this.bottomMargin=a.bottomMargin;this.data=a.data;this.xGrids=a.xGrids;this.yGrids=a.yGrids;return};XyChartShape.prototype.getXTitle=function(){return this.text2};XyChartShape.prototype.getYTitle=function(){return this.text3};XyChartShape.prototype.setXTitle=function(a){this.text2=a;return};XyChartShape.prototype.setYTitle=function(a){this.text3=a;return};XyChartShape.prototype.setGrids=function(b,a){this.xGrids=b>=0?b:0;this.yGrids=a>=0?a:0;return};XyChartShape.prototype.setRange=function(a,b){this.yMin=a;this.yMax=b;return};XyChartShape.prototype.setUnit=function(a){this.unit=a;return};XyChartShape.prototype.setMargin=function(c,a,d,b){this.leftMargin=c;this.topMargin=a;this.rightMargin=d;this.bottomMargin=b;return};XyChartShape.prototype.asIcon=function(){this.isIcon=true;this.resize(40,40);this.setMargin(2,2,2,2);return};XyChartShape.prototype.initDefaultData=function(){this.x300("Title");this.setXTitle("X Title");this.setYTitle("Y Title");this.setRange(0,100);this.setGrids(10,10);this.resize(400,200);this.setDefSize(500,300);this.setData(x31);this.setMargin(100,40,20,40);this.setSizeLimit(200,100,0,0,0);return};XyChartShape.prototype.setStyle=function(a){this.style.copy(a);this.style.enableShadow=false;this.style.enableGradientFill=false;this.style.setLineWidth(a.lineWidth>3?3:a.lineWidth);return};XyChartShape.prototype.drawText=function(a){if(this.isIcon){return}a.textAlign="center";a.font=this.style.getFont();a.fillStyle=this.style.textColor;if(this.text){a.beginPath();a.textBaseline="top";a.fillText(this.text,this.w/2,0,this.w)}if(this.text3){a.beginPath();a.textBaseline="top";a.save();a.translate(0,this.h/2);a.rotate(-Math.PI/2);a.fillText(this.text3,0,0,this.w);a.restore()}if(this.text2){a.beginPath();a.textBaseline="bottom";a.fillText(this.text2,this.w/2,this.h,this.w)}return};XyChartShape.prototype.x255=function(c){var l=0;var m=0;var f=0;var e=0;var j=0;var p="";var a=0;var o=this.topMargin;var k=this.leftMargin;var h=this.rightMargin;var b=this.bottomMargin;c.fillStyle="White";c.rect(0,0,this.w,this.h);c.fill();c.beginPath();c.fillStyle=this.style.fillColor;c.rect(k,o,this.w-k-h,this.h-o-b);c.fill();c.beginPath();c.moveTo(k,o);c.lineTo(k,this.h-b);c.lineTo(this.w-h,this.h-b);if(!this.isIcon){if(this.yGrids>0){var g=this.yMax-this.yMin;l=o;m=k;e=this.yGrids;j=(this.h-o-b)/e;if(g>10){a=Math.floor(g/e)}else{a=g/e}c.textAlign="right";c.textBaseline="middle";c.fillStyle=this.style.textColor;for(f=0;f<e;f++){p=(this.yMax-a*f)+"";c.fillText(p,m-10,l);c.moveTo(m,l);c.lineTo(this.w-h,l);l=l+j}}if(this.xGrids>0){l=o;m=k;e=this.xGrids;j=(this.w-k-h)/e;for(f=0;f<e;f++){m=m+j;c.moveTo(m,l);c.lineTo(m,this.h-b)}}}c.lineWidth=1;c.stroke();c.beginPath();return};XyChartShape.prototype.paintData=function(a){if(this.hasData()){this.drawItems(a)}return};XyChartShape.prototype.paintShape=function(a){this.x255(a);try{this.paintData(a)}catch(b){wtkLog("paintData failed.")}return};XyChartShape.prototype.x310=function(){x304(this);return};XyChartShape.prototype.hasData=function(){return this.data&&this.data.items&&this.data.items.length};XyChartShape.prototype.drawItemTitle=function(c,e,a,g,b,d){var f=e.title;c.fillText(f,a,g,b);return};XyChartShape.prototype.drawItemValue=function(c,e,a,g,b,d){var f=e.value+""+this.unit;c.fillText(f,a,g,b);return};XyChartShape.prototype.drawItemShape=function(d,c,f,a,g,b,e){return};XyChartShape.prototype.drawItems=function(c){if(!this.hasData()){return}var f=0;var e=0;var k=this.leftMargin;var d=this.data.items.length;var b=this.h-this.bottomMargin;var h=this.h-this.bottomMargin;var j=this.w-this.leftMargin-this.rightMargin;var m=j/d;var g=this.yMax-this.yMin;var o=this.style.fontSize;this.style.setFontSize(o/2);if(g===0){g=100}var a=(this.h-this.topMargin-this.bottomMargin)/g;c.textAlign="center";c.font=this.style.getFont();for(f=0;f<d;f++){var l=this.data.items[f];k=k+m/2;e=l.value*a;h=this.h-this.bottomMargin-e;c.fillStyle=this.style.textColor;if(!this.isIcon){c.textBaseline="top";this.drawItemTitle(c,l,k,b,m,e);c.textBaseline="bottom";this.drawItemValue(c,l,k,h,m,e)}c.fillStyle=this.style.fillColor;if(this.data.fillColor){c.fillStyle=this.data.fillColor}if(this.data.lineColor){c.strokeStyle=this.data.lineColor}this.drawItemShape(c,f,l,k,h,m,e);k=k+m/2}this.style.setFontSize(o);c.beginPath();return};function RectXyChartShapeShapeCreator(){var a=["chart-xy-rect","Rect XY Chart",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=RShapeInit(new XyChartShape(),this.id,b);c.style.x284("gray");c.drawItemShape=function(j,g,l,d,m,f,k){var e=f/2;if(e>60){e=60}j.rect(d-e/2,m,e,k);if(l.fillColor){j.fillStyle=l.fillColor}if(l.lineColor){j.strokeStyle=l.lineColor}j.fill();j.stroke();j.beginPath();return};c.initDefaultData();return c};return}function VLineXyChartShapeShapeCreator(){var a=["chart-xy-vline","Vline XY Chart",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=RShapeInit(new XyChartShape(),this.id,b);c.style.x284("gray");c.drawItemShape=function(g,f,k,d,l,e,j){g.moveTo(d,l);g.lineTo(d,l+j);if(k.lineColor){g.strokeStyle=k.lineColor}g.lineWidth=this.style.lineWidth;g.stroke();g.beginPath();return};c.initDefaultData();return c};return}function LineXyChartShapeShapeCreator(){var a=["chart-xy-line","Line XY Chart",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=RShapeInit(new XyChartShape(),this.id,b);c.style.x284("gray");c.drawItemShape=function(g,f,k,d,l,e,j){if(f===0){g.moveTo(d,l)}else{g.lineTo(d,l)}if(k.lineColor){g.strokeStyle=k.lineColor}g.lineWidth=this.style.lineWidth;g.stroke();return};c.initDefaultData();return c};return}function DotXyChartShapeShapeCreator(){var a=["chart-xy-dot","Dot XY Chart",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=RShapeInit(new XyChartShape(),this.id,b);c.style.x284("gray");c.drawItemShape=function(g,f,k,d,l,e,j){g.arc(d,l,3,0,2*Math.PI);if(k.lineColor){g.strokeStyle=k.lineColor}if(k.fillColor){g.fillStyle=k.fillColor}g.lineWidth=this.style.lineWidth;g.fill();g.stroke();g.beginPath();return};c.initDefaultData();return c};return}function FillXyChartShapeShapeCreator(){var a=["chart-xy-fill","Fill XY Chart",null,1];ShapeCreator.apply(this,a);this.createShape=function(b){var c=RShapeInit(new XyChartShape(),this.id,b);c.style.x284("gray");c.drawItemTitle=function(f,j,d,m,e,g){var l=d-e/2;var k=j.title;f.textAlign="left";f.fillText(k,l,m,e);return};c.drawItemValue=function(f,j,d,m,e,g){var l=d-e/2;var k=j.value+""+this.unit;f.textAlign="left";f.fillText(k,l,m,e);return};c.drawItemShape=function(g,f,k,d,m,e,j){var l=d-e/2;if(f===0){g.moveTo(l,m+j);g.lineTo(l,m)}else{if(f===(this.data.items.length-1)){g.lineTo(l,m);g.lineTo(l,m+j);g.fill()}else{g.lineTo(l,m)}}if(k.lineColor){g.strokeStyle=k.lineColor}g.lineWidth=this.style.lineWidth;g.stroke();return};c.initDefaultData();return c};return}var C_END_NONE=0;var C_END_SQUARE=1;var C_END_ROUND=2;var C_TYPE_SOLID=0;var C_TYPE_DOTTED=1;var C_TYPE_DASHED=2;var C_TYPE_CENTER=3;var C_TYPE_PHANTOM=4;var C_NOT_MIRRORED=0;var C_MIRRORED=1;var C_NOT_EMBEDDED=0;var C_EMBEDDED=1;var C_FILLING_HOLLOW=0;var C_FILLING_FILL=1;var C_FILLING_MESH=2;var C_FILLING_HATCH=3;var C_FILLING_VOID=4;var C_INVISIBLE=0;var C_VISIBLE=1;var C_SHOW_NAME_VALUE=0;var C_SHOW_VALUE=1;var C_SHOW_NAME=2;var C_NORMAL_PIN=0;var C_BUS_PIN=1;var C_BACKGROUND_COLOR=0;var C_PIN_COLOR=1;var C_NET_ENDPOINT_COLOR=2;var C_GRAPHIC_COLOR=3;var C_NET_COLOR=4;var C_ATTRIBUTE_COLOR=5;var C_LOGIC_BUBBLE_COLOR=6;var C_DOTS_GRID_COLOR=7;var C_DETACHED_ATTRIBUTE_COLOR=8;var C_TEXT_COLOR=9;var C_BUS_COLOR=10;var C_SELECT_COLOR=11;var C_BOUNDINGBOX_COLOR=12;var C_ZOOM_BOX_COLOR=13;var C_STROKE_COLOR=14;var C_LOCK_COLOR=15;var C_OUTPUT_BACKGROUND_COLOR=16;var C_FREESTYLE1_COLOR=17;var C_FREESTYLE2_COLOR=18;var C_FREESTYLE3_COLOR=19;var C_FREESTYLE4_COLOR=20;var C_JUNCTION_COLOR=21;var C_MESH_GRID_MAJOR_COLOR=22;var C_MESH_GRID_MINOR_COLOR=23;var gESymbolColors=["White","Red","Black","Black","Black","Black","Black","Black","Black","Black","Black","Black","Black","Black","Black","Black","Black","Black","Black","Black","Black","Black","Black","Black"];function ESymbolShapeCreator(b){var a=[b,"",null,1];ShapeCreator.apply(this,a);this.createShape=function(c){var d=RShapeInit(new ESymbolShape(),this.id,c);d.rotate=0;d.setSymbolID(this.id);d.setTextType(C_SHAPE_TEXT_NONE);d.setRotatable(true);return d};return}function ESymbolShape(){return}ESymbolShape.prototype=new RShape();ESymbolShape.prototype.parseVersion=function(a){var b=new Object();b.type=a[0];b.version=a[1];b.fileformat_version=a[2];return b};ESymbolShape.prototype.transY=function(a){return this.h/this.scale-a};ESymbolShape.prototype.parseLine=function(a){var b=new Object();b.type=a[0];b.x1=milToPixel(parseInt(a[1]));b.y1=milToPixel(parseInt(a[2]));b.x2=milToPixel(parseInt(a[3]));b.y2=milToPixel(parseInt(a[4]));b.color=parseInt(a[5]);b.width=parseInt(a[6]);b.capstyle=parseInt(a[7]);b.dashstyle=parseInt(a[8]);b.dashlength=parseInt(a[9]);b.dashspace=parseInt(a[10]);this.updateSize(b.x1,b.y1);this.updateSize(b.x2,b.y2);b.paintSymbol=function(c,d){d.lineWidth=this.width;d.moveTo(this.x1,c.transY(this.y1));d.lineTo(this.x2,c.transY(this.y2));return};return b};ESymbolShape.prototype.parsePicture=function(a){var b=new Object();b.type=a[0];b.x1=milToPixel(parseInt(a[1]));b.y1=milToPixel(parseInt(a[2]));b.width=milToPixel(parseInt(a[3]));b.height=milToPixel(parseInt(a[4]));b.angle=(parseInt(a[5])/180*Math.PI);b.mirrored=parseInt(a[6]);b.embedded=parseInt(a[7]);this.updateSize(b.x1,b.y1);this.updateSize(b.x1+b.width,b.y1+b.height);return b};ESymbolShape.prototype.parseBox=function(a){var b=new Object();b.type=a[0];b.x=milToPixel(parseInt(a[1]));b.y=milToPixel(parseInt(a[2]));b.width=milToPixel(parseInt(a[3]));b.height=milToPixel(parseInt(a[4]));b.color=parseInt(a[5]);b.widthOfLines=parseInt(a[6]);b.capstyle=parseInt(a[7]);b.dashstyle=parseInt(a[8]);b.dashlength=parseInt(a[9]);b.dashspace=parseInt(a[10]);b.filltype=parseInt(a[11]);b.fillwidth=parseInt(a[12]);b.angle1=(parseInt(a[13])/180*Math.PI);b.pitch1=parseInt(a[14]);b.angle2=(parseInt(a[15])/180*Math.PI);b.pitch2=parseInt(a[16]);this.updateSize(b.x,b.y);this.updateSize(b.x+b.width,b.y+b.height);b.paintSymbol=function(c,d){d.lineWidth=this.widthOfLines;d.rect(this.x,c.transY(this.y),this.width,-this.height);if(b.filltype===C_FILLING_HOLLOW){d.stroke();d.beginPath()}return};return b};ESymbolShape.prototype.parseCircle=function(a){var b=new Object();b.type=a[0];b.x=milToPixel(parseInt(a[1]));b.y=milToPixel(parseInt(a[2]));b.radius=milToPixel(parseInt(a[3]));b.color=parseInt(a[4]);b.width=parseInt(a[5]);b.capstyle=parseInt(a[6]);b.dashstyle=parseInt(a[7]);b.dashlength=parseInt(a[8]);b.dashspace=parseInt(a[9]);b.filltype=parseInt(a[10]);b.fillwidth=parseInt(a[11]);b.angle1=(parseInt(a[12])/180*Math.PI);b.pitch1=parseInt(a[13]);b.angle2=(parseInt(a[14])/180*Math.PI);b.pitch2=parseInt(a[15]);this.updateSize(b.x-b.radius,b.y-b.radius);this.updateSize(b.x+b.radius,b.y+b.radius);b.paintSymbol=function(c,d){var e=this.radius;d.lineWidth=this.width;d.beginPath();d.arc(this.x,c.transY(this.y),e,0,2*Math.PI);if(b.filltype===C_FILLING_HOLLOW){d.stroke();d.beginPath()}return};return b};ESymbolShape.prototype.parseArc=function(a){var b=new Object();b.type=a[0];b.x=milToPixel(parseInt(a[1]));b.y=milToPixel(parseInt(a[2]));b.radius=milToPixel(parseInt(a[3]));b.startangle=(parseInt(a[4])/180)*Math.PI;b.sweepangle=(parseInt(a[5])/180)*Math.PI;b.color=parseInt(a[6]);b.width=parseInt(a[7]);b.capstyle=parseInt(a[8]);b.dashstyle=parseInt(a[9]);b.dashlength=parseInt(a[10]);b.dashspace=parseInt(a[11]);this.updateSize(b.x,b.y);b.paintSymbol=function(c,d){var e=this.radius;d.lineWidth=this.width;d.beginPath();d.arc(this.x,c.transY(this.y),e,this.startangle,this.startangle+this.sweepangle);d.stroke();d.beginPath();return};return b};ESymbolShape.prototype.updateProperty=function(f,c){var d=f.split("=");if(d.length===2){var e=new Object();var a=d[0];var b=d[1];e.value=b;e.action=c;this.properties[a]=e}return};ESymbolShape.prototype.parseText=function(a){var b=new Object();b.type=a[0];b.x=milToPixel(parseInt(a[1]));b.y=milToPixel(parseInt(a[2]));b.color=parseInt(a[3]);b.size=parseInt(a[4]);b.visibility=parseInt(a[5]);b.show_name_value=parseInt(a[6]);b.angle=(parseInt(a[7])/180*Math.PI);b.alignment=parseInt(a[8]);b.num_lines=parseInt(a[9]);return b};ESymbolShape.prototype.parseNet=function(a){var b=new Object();b.type=a[0];b.x1=milToPixel(parseInt(a[1]));b.y1=milToPixel(parseInt(a[2]));b.x2=milToPixel(parseInt(a[3]));b.y2=milToPixel(parseInt(a[4]));b.color=parseInt(a[5]);this.updateSize(b.x1,b.y1);this.updateSize(b.x2,b.y2);b.paintSymbol=function(c,d){var e=3;d.lineWidth=2;d.moveTo(this.x1,this.transY(this.y1));d.lineTo(this.x2,this.transY(this.y2));d.arc(this.x1,this.transY(this.y1),e,0,2*Math.PI);d.arc(this.x2,this.transY(this.y2),e,0,2*Math.PI);return};return b};ESymbolShape.prototype.parseBus=function(a){var b=new Object();b.type=a[0];b.x1=milToPixel(parseInt(a[1]));b.y1=milToPixel(parseInt(a[2]));b.x2=milToPixel(parseInt(a[3]));b.y2=milToPixel(parseInt(a[4]));b.color=parseInt(a[5]);b.ripperdir=parseInt(a[6]);this.updateSize(b.x1,b.y1);this.updateSize(b.x2,b.y2);b.paintSymbol=function(c,d){var e=3;d.lineWidth=2;d.moveTo(this.x1,this.transY(this.y1));d.lineTo(this.x2,this.transY(this.y2));d.arc(this.x1,this.transY(this.y1),e,0,2*Math.PI);d.arc(this.x2,this.transY(this.y2),e,0,2*Math.PI);return};return b};ESymbolShape.prototype.parsePin=function(a){var b=new Object();b.type=a[0];b.x1=milToPixel(parseInt(a[1]));b.y1=milToPixel(parseInt(a[2]));b.x2=milToPixel(parseInt(a[3]));b.y2=milToPixel(parseInt(a[4]));b.color=parseInt(a[5]);b.pintype=parseInt(a[6]);b.whichend=parseInt(a[7]);this.updateSize(b.x1,b.y1);this.updateSize(b.x2,b.y2);b.paintSymbol=function(c,d){var e=3;d.lineWidth=2;d.moveTo(this.x1,c.transY(this.y1));d.lineTo(this.x2,c.transY(this.y2));d.stroke();d.beginPath();if(this.whichend){d.arc(this.x2,c.transY(this.y2),e,0,2*Math.PI)}else{d.arc(this.x1,c.transY(this.y1),e,0,2*Math.PI)}d.fillStyle="Black";return};return b};ESymbolShape.prototype.parseComponent=function(a){var b=new Object();b.type=a[0];b.x=parseInt(a[1]);b.y=parseInt(a[2]);b.selectable=parseInt(a[3]);b.angle=parseInt(a[4]);b.mirror=parseInt(a[5]);b.basename=a[6];this.updateSize(b.x,b.y);return b};ESymbolShape.prototype.parsePath=function(a){var b=new Object();b.type=a[0];b.color=parseInt(a[1]);b.width=parseInt(a[2]);b.capstyle=parseInt(a[3]);b.dashstyle=parseInt(a[4]);b.dashlength=parseInt(a[5]);b.dashspace=parseInt(a[6]);b.filltype=parseInt(a[7]);b.fillwidth=parseInt(a[8]);b.angle1=(parseInt(a[9])/180*Math.PI);b.pitch1=parseInt(a[10]);b.angle2=(parseInt(a[11])/180*Math.PI);b.pitch2=parseInt(a[12]);b.numlines=parseInt(a[13]);b.paintSymbol=function(c,d){var g=this.paths;d.lineWidth=this.width;for(var e=0;e<g.length;e++){var f=g[e];if(f.paintPath){f.paintPath(d)}}if(b.filltype===C_FILLING_HOLLOW){d.stroke();d.beginPath()}return};return b};ESymbolShape.prototype.parseFont=function(a){var b=new Object();b.type=a[0];b.character=parseInt(a[1]);b.width=parseInt(a[2]);b.flag=parseInt(a[3]);return b};ESymbolShape.prototype.updateSize=function(a,b){if(a<this.symbol.minX||this.symbol.minX<0){this.symbol.minX=a}if(b<this.symbol.minY||this.symbol.minY<0){this.symbol.minY=b}if(a>this.symbol.maxX){this.symbol.maxX=a}if(b>this.symbol.maxY){this.symbol.maxY=b}return};ESymbolShape.prototype.parseDefinition=function(p){var q=null;var f=null;var g=null;var a=p.length;var o=null;var b=null;var k=0;var e=0;var m=null;this.properties=new Object();this.symbol=new Object();this.symbol.actions=new Array();this.symbol.minX=-1;this.symbol.minY=-1;this.symbol.maxX=0;this.symbol.maxY=0;for(var d=0;d<a;d++){q=p[d];f=q.split(" ");g=f[0];switch(g){case"v":this.version=this.parseVersion(f);break;case"L":b=this.parseLine(f);break;case"G":b=this.parsePicture(f);b.filename=p[d+1];d++;break;case"B":b=this.parseBox(f);break;case"V":b=this.parseCircle(f);break;case"A":b=this.parseArc(f);break;case"T":b=this.parseText(f);b.texts=new Array();for(var c=0;c<b.num_lines;c++){m=p[d+c+1];b.texts.push(m);this.updateProperty(m,b)}d=d+c;break;case"N":b=this.parseNet(f);break;case"U":b=this.parseBus(f);break;case"P":b=this.parsePin(f);break;case"C":b=this.parseComponent(f);break;case"H":b=this.parsePath(f);b.paths=new Array();for(var c=0;c<b.numlines;c++){var o=new Object();var q=p[d+c+1];q=q.replaceAll(","," ");f=q.split(" ");g=f[0];o.type=f[0];switch(o.type){case"M":o.x=milToPixel(parseInt(f[1]));o.y=milToPixel(parseInt(f[2]));this.updateSize(o.x,o.y);o.paintPath=function(h){h.moveTo(this.x,this.y);return};break;case"L":o.x=milToPixel(parseInt(f[1]));o.y=milToPixel(parseInt(f[2]));this.updateSize(o.x,o.y);o.paintPath=function(h){h.lineTo(this.x,this.y);return};break;case"C":o.x1=milToPixel(parseInt(f[1]));o.y1=milToPixel(parseInt(f[2]));o.x2=milToPixel(parseInt(f[3]));o.y2=milToPixel(parseInt(f[4]));o.x=milToPixel(parseInt(f[5]));o.y=milToPixel(parseInt(f[6]));this.updateSize(o.x1,o.y1);this.updateSize(o.x2,o.y2);this.updateSize(o.x,o.y);o.paintPath=function(h){h.bezierCurveTo(this.x1,this.y1,this.x2,this.y2,this.x,this.y);return};break;case"z":case"Z":break;default:break}b.paths.push(o);if(o.type==="z"||o.type==="Z"){break}}d=d+b.numlines;break;case"F":b=this.parseFont(f);break;case"{":var l=null;b.properties=new Array();for(d=d+1;d<a;d++){q=p[d];f=q.split(" ");g=f[0];if(q==="}"){break}l=this.parseText(f);l.texts=new Array();for(var c=0;c<l.num_lines;c++){var m=p[d+c+1];l.texts.push(m)}d=d+c;b.properties.push(l)}break;case"[":for(d=d+1;d<a;d++){q=p[d];if(q==="]"){break}}break;default:b=null;break}if(b){this.symbol.actions.push(b)}}k=this.symbol.maxX-0;e=this.symbol.maxY-0;this.resize(k,e);this.setDefSize(k,e);this.setSizeLimit(k,e,k,e);return};ESymbolShape.prototype.setSymbolID=function(b){var a=ESymbolManagerGet().lookup(b);if(a){this.parseDefinition(a)}return};ESymbolShape.prototype.paintShape=function(c){if(!this.symbol){return}var j=0;var s=0;var r=0;var e=1;var f=null;var g=this.symbol.actions;var d=this.symbol.actions.length;c.save();if(this.isIcon){var m=this.symbol.maxX;var k=this.symbol.maxY;e=Math.min(this.w/m,this.h/k);m=m*e;k=k*e;s=(this.w-m)/2;r=(this.h-k)/2}if(e>1){e=1}this.scale=e;if(e<0.2){var a=this.id.split(".")[0];c.fillStyle=this.style.fillColor;c.textAlign="center";c.textBaseline="middle";c.fillText(a,this.w/2,this.h/2,this.w)}else{c.translate(s,-r);c.scale(e,e);for(j=0;j<d;j++){f=g[j];if(f.paintSymbol){c.beginPath();c.fillStyle=this.style.fillColor;c.strokeStyle=this.style.lineColor;f.paintSymbol(this,c);c.stroke();c.fill()}}var b=null;var f=null;var l=null;var q=null;for(var p in this.properties){b=this.properties[p];f=b.action;l=b.value;if(!f){continue}if(f.visibility===C_VISIBLE&&!this.isIcon){c.fillStyle=this.style.textColor;c.textAlign="left";c.textBaseline="bottom";if(f.alignment===0){c.textAlign="left";c.textBaseline="bottom"}c.font=f.size+"px sans";switch(f.show_name_value){case C_SHOW_NAME_VALUE:q=p+"="+l;break;case C_SHOW_VALUE:q=l;break;case C_SHOW_NAME:q=p;break}c.fillText(q,f.x,this.transY(f.y))}}if(this.selected){c.beginPath();c.lineWidth=1;c.rect(-5,-5,this.w+10,this.h+10);c.closePath();c.stroke();c.beginPath()}}c.restore();return};ESymbolShape.prototype.getSelectMark=function(b,a){return false};ESymbolShape.prototype.getNearPoint=function(m){var r=this.getX();var q=this.getY();var s=this.x171();var o=this.x147();var b={x:0,y:0};var l=0;var f=m;var e=null;var g=this.symbol.actions;var d=this.symbol.actions.length;for(l=0;l<d;l++){e=g[l];if(e.type==="P"){if(f===0){if(e.whichend){b.x=e.x2;b.y=this.transY(e.y2)}else{b.x=e.x1;b.y=this.transY(e.y1)}break}f--}}if(f<0){return null}var c=s/2;var a=o/2;var u=b.x-c;var t=b.y-a;switch(this.rotate){case 1:b.x=c-t;b.y=a+u;break;case 2:b.x=c-u;b.y=a-t;break;case 3:b.x=c+t;b.y=a-u;break;default:break}b.x+=r;b.y+=q;return b};ESymbolShape.prototype.asIcon=function(){this.resize(40,40);if(!this.isIcon){this.setStyle(getIconShapeStyle())}this.isIcon=true;return};ESymbolShape.prototype.x250=function(b){if(b===KeyEvent.DOM_VK_R){var a=this.rotate+1;this.exec(new x268(this,a));this.x262()}return};ESymbolShape.prototype.getPropListHtml=function(){var b="";var c=null;for(var a in this.properties){c=this.properties[a].value;b=b+'<tr><td width="30%"><input style="width: 90%;" type="text" name="prop_name" value="'+a+'"></input></td> 			<td width="70%"><input style="width: 90%;" type="text" name="prop_value" value="'+c+'"></input></td></tr>'}b=b+'<tr><td width="30%"><input style="width: 90%;" type="text" name="prop_name" value=""></input></td> 			<td width="70%"><input style="width: 90%;" type="text" name="prop_value" value=""></input></td></tr>';b=b+'<tr><td width="30%"><input style="width: 90%;" type="text" name="prop_name" value=""></input></td> 			<td width="70%"><input style="width: 90%;" type="text" name="prop_value" value=""></input></td></tr>';return b};ESymbolShape.prototype.x310=function(){var c='<form id="form_prop" class="appnitro"  method="post" action="">		<label class="description" for="element_7">'+idrawGetText("Degree")+': </label>		<select class="element select small" id="degree" name="degree"> 			<option >0</option> 			<option >90</option> 			<option >180</option> 			<option >270</option> 		</select> 		<label class="description" for="element_7">'+idrawGetText("Property")+': </label>		<table id="table_prop" style="width: 100%; padding: 0; margin: 0;" cellspacing="0">		'+this.getPropListHtml()+'		</table>		<center>		<input id="myok" class="button_ok" type="button" name="myok" value='+idrawGetText("Yes")+' />		<input id="mycancel" class="button_ok" type="button" name="mycancel" value='+idrawGetText("No")+" />		</center>	</form>";showDialog("Property...",c,500,500);var b=this;var a=this.view;var d=$("#form_prop")[0];d.degree.value=this.rotate*90;d.myok.onclick=function(k){var g=0;var f=null;var l=d.elements.length;var j=parseInt(d.degree.value)/90;b.exec(new x268(b,j));for(g=0;g<l;g++){var h=d.elements[g];if(h.name==="prop_name"){if(h.value){f=h.value}else{f=null}}if(h.name==="prop_value"){if(h.value&&f){b.properties[f].value=h.value}f=null}}b.x262();$("#idraw_dialog").dialog("close");return};d.mycancel.onclick=function(f){$("#idraw_dialog").dialog("close");return};return};ESymbolShape.prototype.toJsonMore=function(a){a.props=this.properties;return};ESymbolShape.prototype.fromJsonMore=function(a){if(a.props){this.properties=a.props}return};ESymbolShape.prototype.drawSizeTips=function(a){return};function BusOrNetShapeCreator(c,b){var a=[c,c,null,1];ShapeCreator.apply(this,a);this.type=b;this.useCount=10000;this.createShape=function(d){var e=new LineShape();e.asIcon=function(){this.points[0].x=0;this.points[0].y=0;this.points[1].x=30;this.points[1].y=30;if(!this.isIcon){this.setStyle(getIconShapeStyle())}this.isIcon=true;return};e.getNearPoint=function(f){var g=null;switch(f){case 0:g=this.points[0];break;case 1:g=this.points[1];break;case 2:g=this.getMiddlePoint();break}return g};e.getMiddlePoint=function(){var j={x:0,y:0};var k=this.points[0];var h=this.points[1];var g=Math.abs(k.x-h.x);var f=Math.abs(k.y-h.y);if(g<5||f<5){j.x=(k.x+h.x)/2;j.y=(k.y+h.y)/2}else{if(b==="hv"){j.x=k.x;j.y=h.y}else{j.x=h.x;j.y=k.y}}return j};e.drawLine=function(f){var j=this.points[0];var h=this.points[1];var g=this.getMiddlePoint();f.moveTo(j.x,j.y);f.lineTo(g.x,g.y);f.lineTo(h.x,h.y);f.stroke();return};e.drawArrows=function(g){var j=3;if(this.id==="net-vh"||this.id==="net-hv"){for(var h=0;h<this.points.length;h++){var f=this.points[h];g.beginPath();g.arc(f.x,f.y,j,0,Math.PI*2);g.fill()}g.beginPath()}return};e.updatePoint=function(g,f){this.points[g].y=f.y;this.points[g].x=f.x;return true};e.isPointInThis=function(g,f){var k=this.points[0];var j=this.points[1];var h=this.getMiddlePoint();return this.isPointInSegment(g,k,h,f)||this.isPointInSegment(g,h,j,f)};e.initLShape(d,this.id);e.setTextType(C_SHAPE_TEXT_NONE);e.style.setFirstArrowType(x26);e.style.setSecondArrowType(x26);e.style.setLineStyle(x55);e.style.setLineWidth(2);e.setOptions(true,true,true,true);return e};return}var gESymbolManager=null;function ESymbolManagerGet(){if(gESymbolManager){return gESymbolManager}gESymbolManager=new Object();gESymbolManager.categories=new Array();gESymbolManager.registCategory=function(c,b){var e=new Object();var a=ShapeFactoryGet();e.name=c;e.symbols=b;this.categories.push(e);a.addShapeCreator(new BusOrNetShapeCreator("bus-vh","vh"),c);a.addShapeCreator(new BusOrNetShapeCreator("bus-hv","hv"),c);a.addShapeCreator(new BusOrNetShapeCreator("net-vh","vh"),c);a.addShapeCreator(new BusOrNetShapeCreator("net-hv","hv"),c);for(var d in b){a.addShapeCreator(new ESymbolShapeCreator(d),c)}return};gESymbolManager.lookup=function(a){var b=0;var d=null;var c=null;var e=this.categories.length;for(b=0;b<e;b++){c=this.categories[b];d=c.symbols[a];if(d){break}}return d};return gESymbolManager}function idrawRegisterEda(){ESymbolManagerGet().registCategory("eda basic",gEdaBasic);ShapeFactoryGet().addDiagramType("EDA","eda-basic");idrawDelayLoadScript("http://www.5idraw.com/diagram/js/eda-symbols.php");function c(r){var t="v 20110115 2\n";return t;var f=null;var g=null;var m=0;var l=0;var p=0;var B=0;var C=0;var q=1;var v=null;var o=null;var s=r.allShapes;for(var A=0;A<s.length;A++){f=s[A];if(f.symbol){m=milFromPixel(f.getX())+40000;l=milFromPixel(f.getY())+40000;p=milFromPixel(f.x171());B=milFromPixel(f.x147());C=0;q=f.id.indexOf("title")<0?1:0;if(f.rotate){C=f.rotate*90}t+="C "+m+" "+l+" "+q+" "+C+" 0 "+f.id+"\n";o=f.symbol.actions;if(o&&o.length){t+="{\n";for(var z=0;z<o.length;z++){v=o[z];if(v.type==="T"){var d=v.texts;var e=C+v.angle*90;var E=m+milFromPixel(v.x);var D=l+milFromPixel(v.y);t+=v.type+" "+E+" "+D+" ";t+=v.color+" "+v.size+" "+v.visibility+" ";t+=v.show_name_value+" "+e+" ";t+=v.alignment+" "+v.texts.length+"\n";for(var u=0;u<d.length;u++){t+=d[u]+"\n"}}}t+="}\n"}}}return t}function b(g){var d="";var k=g.getApp();var e=k.view;var j=c(e);if(isOldIE()){d=idrawGetText("You browser is too old, it does not support web storage, please copy the text and save it into file.")}var h='<form id="form_save" class="appnitro"  method="post" action="">			<p>'+d+'</p>			<label class="description" for="name">'+idrawGetText("Name")+':</label> 			<input id="name" name="name" class="element text large" type="text" maxlength="128" value="idraw.jso"/> 			<textarea id="content" value="" rows="15" cols="48" ></textarea>			<center>			<input id="ok" class="button_ok" type="button" name="ok" value='+idrawGetText("OK")+' />			<input id="cancel" class="button_ok" type="button" name="cancel" value='+idrawGetText("Cancel")+" />			</center>			</form>";showDialog("Save...",h,480,480);var f=$("#form_save")[0];f.content.value=j;f.ok.onclick=function(m){var o=f.name.value;if(!o){return}var l=null;if(!localStorage.fileNames){l=new Array()}else{l=JSON.parse(localStorage.fileNames)}l.remove(o);l.push(o);localStorage.fileNames=JSON.stringify(l);localStorage[o]=j;$("#idraw_dialog").dialog("close");return};f.cancel.onclick=function(l){$("#idraw_dialog").dialog("close");return};return}function a(f,e){var d=f.view;if(d.type&&d.type!="EDA"){return null}return createIconMenuItem(e,IDrawIcon.SAVE,"Export",b,null)}idrawAddCustomMenu("File",a);return}var resistor_1_sym=["v 20031231 1","L 600 200 500 0 3 0 0 0 -1 -1","L 500 0 400 200 3 0 0 0 -1 -1","L 400 200 300 0 3 0 0 0 -1 -1","L 300 0 200 200 3 0 0 0 -1 -1","T 300 400 5 10 0 0 0 0 1","device=RESISTOR","L 600 200 700 0 3 0 0 0 -1 -1","L 700 0 750 100 3 0 0 0 -1 -1","P 900 100 750 100 1 0 0","{","T 800 150 5 8 0 1 0 0 1","pinnumber=2","T 800 150 5 8 0 0 0 0 1","pinseq=2","T 800 150 5 8 0 1 0 0 1 ","pinlabel=2","T 800 150 5 8 0 1 0 0 1 ","pintype=pas","}","P 0 100 152 100 1 0 0","{","T 100 150 5 8 0 1 0 0 1","pinnumber=1","T 100 150 5 8 0 0 0 0 1","pinseq=1","T 100 150 5 8 0 1 0 0 1 ","pinlabel=1","T 100 150 5 8 0 1 0 0 1 ","pintype=pas","}","L 201 200 150 100 3 0 0 0 -1 -1","T 200 300 8 10 1 1 0 0 1","refdes=R?","T 0 0 8 10 0 1 0 0 1","pins=2","T 0 0 8 10 0 1 0 0 1","class=DISCRETE"];var resistor_2_sym=["v 20081221 2","P 900 100 750 100 1 0 0","{","T 800 150 5 8 0 1 0 0 1","pinnumber=2","T 800 150 5 8 0 0 0 0 1","pinseq=2","T 800 150 5 8 0 1 0 0 1","pinlabel=2","T 800 150 5 8 0 1 0 0 1","pintype=pas","}","P 0 100 150 100 1 0 0","{","T 100 150 5 8 0 1 0 0 1","pinnumber=1","T 100 150 5 8 0 0 0 0 1","pinseq=1","T 100 150 5 8 0 1 0 0 1","pinlabel=1","T 100 150 5 8 0 1 0 0 1","pintype=pas","}","B 150 0 600 200 3 0 0 0 -1 -1 0 -1 -1 -1 -1 -1","T 400 350 5 10 0 0 0 0 1","device=RESISTOR","T 200 300 8 10 1 1 0 0 1","refdes=R?"];var capacitor_1_sym=["v 20050820 1","P 0 200 200 200 1 0 0","{","T 150 250 5 8 0 1 0 6 1","pinnumber=1","T 150 150 5 8 0 1 0 8 1","pinseq=1","T 200 200 9 8 0 1 0 0 1","pinlabel=1","T 200 200 5 8 0 1 0 2 1","pintype=pas","}","P 900 200 700 200 1 0 0","{","T 750 250 5 8 0 1 0 0 1","pinnumber=2","T 750 150 5 8 0 1 0 2 1","pinseq=2","T 700 200 9 8 0 1 0 6 1","pinlabel=2","T 700 200 5 8 0 1 0 8 1","pintype=pas","}","L 400 400 400 0 3 0 0 0 -1 -1","L 500 400 500 0 3 0 0 0 -1 -1","L 700 200 500 200 3 0 0 0 -1 -1","L 400 200 200 200 3 0 0 0 -1 -1","T 200 700 5 10 0 0 0 0 1","device=CAPACITOR","T 200 500 8 10 1 1 0 0 1","refdes=C?","T 200 1300 5 10 0 0 0 0 1","description=capacitor","T 200 1100 5 10 0 0 0 0 1","numslots=0","T 200 900 5 10 0 0 0 0 1","symversion=0.1"];var capacitor_2_sym=["v 20050820 1","P 0 200 200 200 1 0 0","{","T 150 250 5 8 1 1 0 6 1","pinnumber=1","T 200 150 5 8 0 1 0 8 1","pinseq=1","T 250 200 9 8 0 1 0 0 1","pinlabel=+","T 250 200 5 8 0 1 0 2 1","pintype=pas","}","P 900 200 700 200 1 0 0","{","T 750 250 5 8 1 1 0 0 1","pinnumber=2","T 700 150 5 8 0 1 0 2 1","pinseq=2","T 650 200 9 8 0 1 0 6 1","pinlabel=-","T 650 200 5 8 0 1 0 8 1","pintype=pas","}","L 400 400 400 0 3 0 0 0 -1 -1","L 700 200 500 200 3 0 0 0 -1 -1","L 400 200 200 200 3 0 0 0 -1 -1","T 200 700 5 10 0 0 0 0 1","device=POLARIZED_CAPACITOR","A 1200 200 700 165 30 3 0 0 0 -1 -1","L 289 400 289 300 3 0 0 0 -1 -1","L 340 349 240 349 3 0 0 0 -1 -1","T 200 500 8 10 1 1 0 0 1","refdes=C?","T 200 1300 5 10 0 0 0 0 1","description=polarized capacitor","T 200 1100 5 10 0 0 0 0 1","numslots=0","T 200 900 5 10 0 0 0 0 1","symversion=0.1"];var capacitor_3_sym=["v 20050820 1","P 0 200 200 200 1 0 0","{","T 150 250 5 8 1 1 0 6 1","pinnumber=P","T 150 150 5 8 0 1 0 8 1","pinseq=1","T 200 200 9 8 0 1 0 0 1","pinlabel=+","T 200 200 5 8 0 1 0 2 1","pintype=pas","}","P 900 200 700 200 1 0 0","{","T 750 250 5 8 1 1 0 0 1","pinnumber=N","T 750 150 5 8 0 1 0 2 1","pinseq=2","T 700 200 9 8 0 1 0 6 1","pinlabel=-","T 700 200 5 8 0 1 0 8 1","pintype=pas","}","L 400 400 400 0 3 0 0 0 -1 -1","L 700 200 500 200 3 0 0 0 -1 -1","L 400 200 200 200 3 0 0 0 -1 -1","T 200 700 5 10 0 0 0 0 1","device=POLARIZED_CAPACITOR","A 1200 200 700 165 30 3 0 0 0 -1 -1","L 289 400 289 300 3 0 0 0 -1 -1","L 340 349 240 349 3 0 0 0 -1 -1","T 200 500 8 10 1 1 0 0 1","refdes=C?","T 200 1300 5 10 0 0 0 0 1","description=polarized capacitor","T 200 1100 5 10 0 0 0 0 1","numslots=0","T 200 900 5 10 0 0 0 0 1","symversion=0.1"];var capacitor_4_sym=["v 20050820 1","P 0 200 200 200 1 0 0","{","T 150 250 5 8 1 1 0 6 1","pinnumber=1","T 150 150 5 8 0 1 0 8 1","pinseq=1","T 200 200 9 8 0 1 0 0 1","pinlabel=+","T 200 200 5 8 0 1 0 2 1","pintype=pas","}","P 900 200 700 200 1 0 0","{","T 750 250 5 8 1 1 0 0 1","pinnumber=2","T 750 150 5 8 0 1 0 2 1","pinseq=2","T 700 200 9 8 0 1 0 6 1","pinlabel=-","T 700 200 5 8 0 1 0 8 1","pintype=pas","}","L 550 400 550 0 3 0 0 0 -1 -1","L 700 200 550 200 3 0 0 0 -1 -1","L 350 200 200 200 3 0 0 0 -1 -1","T 200 1100 5 10 0 0 0 0 1","device=POLARIZED_CAPACITOR","L 239 400 239 300 3 0 0 0 -1 -1","L 290 349 190 349 3 0 0 0 -1 -1","T 200 500 8 10 1 1 0 0 1","refdes=C?","B 350 0 100 400 3 0 0 0 -1 -1 0 -1 -1 -1 -1 -1","T 200 1300 5 10 0 0 0 0 1","description=polarized capacitor","T 200 900 5 10 0 0 0 0 1","numslots=0","T 200 700 5 10 0 0 0 0 1","symversion=0.1"];var diode_1_sym=["v 20031231 1","L 300 400 300 0 3 0 0 0 -1 -1","L 300 400 600 200 3 0 0 0 -1 -1","T 400 600 5 10 0 0 0 0 1","device=DIODE","L 600 200 300 0 3 0 0 0 -1 -1","L 600 400 600 0 3 0 0 0 -1 -1","P 0 200 200 200 1 0 0","{","T 100 250 5 8 0 1 0 0 1","pinnumber=1","T 100 250 5 8 0 0 0 0 1","pinseq=1","T 100 250 5 8 0 1 0 0 1 ","pinlabel=1","T 100 250 5 8 0 1 0 0 1 ","pintype=pas","}","P 900 200 700 200 1 0 0","{","T 700 250 5 8 0 1 0 0 1","pinnumber=2","T 700 250 5 8 0 0 0 0 1","pinseq=2","T 700 250 5 8 0 1 0 0 1 ","pinlabel=2","T 700 250 5 8 0 1 0 0 1 ","pintype=pas","}","L 700 200 600 200 3 0 0 0 -1 -1","L 300 200 200 200 3 0 0 0 -1 -1","T 300 500 8 10 1 1 0 0 1","refdes=D?"];var diode_2_sym=["v 20031231 1","L 300 500 300 100 3 0 0 0 -1 -1","L 300 500 600 300 3 0 0 0 -1 -1","T 400 600 5 10 0 0 0 0 1","device=DIODE","L 600 300 300 100 3 0 0 0 -1 -1","L 600 500 600 100 3 0 0 0 -1 -1","P 0 300 200 300 1 0 0","{","T 100 350 5 8 0 1 0 0 1","pinnumber=1","T 100 350 5 8 0 0 0 0 1","pinseq=1","T 100 350 5 8 0 1 0 0 1 ","pinlabel=1","T 100 350 5 8 0 1 0 0 1 ","pintype=pas","}","P 900 300 700 300 1 0 0","{","T 700 350 5 8 0 1 0 0 1","pinnumber=2","T 700 350 5 8 0 0 0 0 1","pinseq=2","T 700 350 5 8 0 1 0 0 1 ","pinlabel=2","T 700 350 5 8 0 1 0 0 1 ","pintype=pas","}","L 700 300 600 300 3 0 0 0 -1 -1","L 300 300 200 300 3 0 0 0 -1 -1","A 650 500 50 0 180 3 0 0 0 -1 -1","A 550 100 50 180 180 3 0 0 0 -1 -1","T 300 600 8 10 1 1 0 0 1","refdes=D?"];var diode_3_sym=["v 20031231 1","L 600 0 600 400 3 0 0 0 -1 -1","L 600 0 300 200 3 0 0 0 -1 -1","T 450 550 5 10 0 0 0 0 1","device=DIODE","L 300 200 600 400 3 0 0 0 -1 -1","L 300 0 300 400 3 0 0 0 -1 -1","P 900 200 700 200 1 0 0","{","T 800 150 5 8 0 1 180 0 1","pinnumber=2","T 800 150 5 8 0 0 180 0 1","pinseq=2","T 800 150 5 8 0 1 180 0 1 ","pinlabel=2","T 800 150 5 8 0 1 180 0 1 ","pintype=pas","}","P 0 200 200 200 1 0 0","{","T 200 150 5 8 0 1 180 0 1","pinnumber=1","T 200 150 5 8 0 0 180 0 1","pinseq=1","T 200 150 5 8 0 1 180 0 1 ","pinlabel=1","T 200 150 5 8 0 1 180 0 1 ","pintype=pas","}","L 200 200 300 200 3 0 0 0 -1 -1","L 600 200 700 200 3 0 0 0 -1 -1","T 350 450 8 10 1 1 0 0 1","refdes=D?"];var speaker_1_sym=["v 20031231 1","L 1800 2500 1800 0 3 0 0 0 -1 -1","A 1000 1600 100 270 180 3 0 0 0 -1 -1","A 1000 1400 100 270 180 3 0 0 0 -1 -1","A 1000 1200 100 270 180 3 0 0 0 -1 -1","A 1000 1000 100 270 180 3 0 0 0 -1 -1","A 1000 1800 100 270 180 3 0 0 0 -1 -1","A 1000 800 100 270 180 3 0 0 0 -1 -1","T 300 400 9 10 1 0 0 0 1","SPEAKER","P 1000 1900 0 1900 1 0 1","{","T 50 1950 5 10 0 1 0 0 1","pinnumber=1","T 50 1950 5 10 0 0 0 0 1","pinseq=1","T 50 1950 5 10 0 1 0 0 1 ","pinlabel=1","T 50 1950 5 10 0 1 0 0 1 ","pintype=pas","}","P 1000 700 0 700 1 0 1","{","T 0 750 5 10 0 1 0 0 1","pinnumber=2","T 0 750 5 10 0 0 0 0 1","pinseq=2","T 0 750 5 10 0 1 0 0 1 ","pinlabel=2","T 0 750 5 10 0 1 0 0 1 ","pintype=pas","}","B 1200 700 200 1200 3 0 0 0 -1 -1 0 -1 -1 -1 -1 -1","T 2000 2500 5 10 0 0 0 0 1","device=SPEAKER","L 1400 1900 1800 2500 3 0 0 0 -1 -1","L 1400 700 1800 0 3 0 0 0 -1 -1","T 600 2000 8 10 1 1 0 0 1","refdes=SPK?"];var voltage_1_sym=["v 20031231 1","P 0 200 200 200 1 0 0","{","T 100 250 5 8 0 1 0 0 1","pinnumber=1","T 100 250 5 8 0 0 0 0 1","pinseq=1","T 100 250 5 8 0 1 0 0 1 ","pinlabel=1","T 100 250 5 8 0 1 0 0 1 ","pintype=pwr","}","P 900 200 700 200 1 0 0","{","T 700 250 5 8 0 1 0 0 1","pinnumber=2","T 700 250 5 8 0 0 0 0 1","pinseq=2","T 700 250 5 8 0 1 0 0 1 ","pinlabel=2","T 700 250 5 8 0 1 0 0 1 ","pintype=pwr","}","V 450 200 200 3 0 0 0 -1 -1 0 -1 -1 -1 -1 -1","T 100 500 5 10 0 0 0 0 1","device=VOLTAGE_SOURCE","L 200 200 250 200 3 0 0 0 -1 -1","L 650 200 700 200 3 0 0 0 -1 -1","A 400 200 50 0 180 3 0 0 0 -1 -1","A 500 200 50 180 180 3 0 0 0 -1 -1","T 300 500 8 10 1 1 0 0 1","refdes=V?"];var voltage_2_sym=["v 20031231 1","P 0 200 200 200 1 0 0","{","T 100 250 5 8 0 1 0 0 1","pinnumber=1","T 100 250 5 8 0 0 0 0 1","pinseq=1","T 100 250 5 8 0 1 0 0 1 ","pinlabel=1","T 100 250 5 8 0 1 0 0 1 ","pintype=pwr","}","P 900 200 700 200 1 0 0","{","T 700 250 5 8 0 1 0 0 1","pinnumber=2","T 700 250 5 8 0 0 0 0 1","pinseq=2","T 700 250 5 8 0 1 0 0 1 ","pinlabel=2","T 700 250 5 8 0 1 0 0 1 ","pintype=pwr","}","V 450 200 200 3 0 0 0 -1 -1 0 -1 -1 -1 -1 -1","T 100 550 5 10 0 0 0 0 1","device=VOLTAGE_SOURCE","L 200 200 250 200 3 0 0 0 -1 -1","L 650 200 700 200 3 0 0 0 -1 -1","T 300 500 8 10 1 1 0 0 1","refdes=V?"];var battery_2_sym=["v 20050820 1","P 0 200 200 200 1 0 0","{","T 150 250 5 8 1 1 0 6 1","pinnumber=1","T 150 150 5 8 0 1 0 8 1","pinseq=1","T 200 200 9 8 0 1 0 0 1","pinlabel=+","T 200 200 5 8 0 1 0 2 1","pintype=pwr","}","P 900 200 700 200 1 0 0","{","T 750 250 5 8 1 1 0 0 1","pinnumber=2","T 750 150 5 8 0 1 0 2 1","pinseq=2","T 700 200 9 8 0 1 0 6 1","pinlabel=-","T 700 200 5 8 0 1 0 8 1","pintype=pwr","}","L 300 400 300 0 3 0 0 0 -1 -1","L 400 300 400 100 3 0 0 0 -1 -1","L 500 400 500 0 3 0 0 0 -1 -1","L 600 300 600 100 3 0 0 0 -1 -1","T 300 700 5 10 0 0 0 0 1","device=BATTERY","L 700 200 600 200 3 0 0 0 -1 -1","L 200 200 300 200 3 0 0 0 -1 -1","T 300 500 8 10 1 1 0 0 1","refdes=B?","T 300 1100 5 10 0 0 0 0 1","description=battery stack","T 300 900 5 10 0 0 0 0 1","numslots=0","T 300 1300 5 10 0 0 0 0 1","symversion=0.1"];var battery_3_sym=["v 20050820 1","P 0 200 200 200 1 0 0","{","T 150 250 5 8 1 1 0 6 1","pinnumber=1","T 150 150 5 8 0 1 0 8 1","pinseq=1","T 200 200 9 8 0 1 0 0 1","pinlabel=+","T 200 200 5 8 0 1 0 2 1","pintype=pwr","}","P 1100 200 900 200 1 0 0","{","T 950 250 5 8 1 1 0 0 1","pinnumber=2","T 950 150 5 8 0 1 0 2 1","pinseq=2","T 900 200 9 8 0 1 0 6 1","pinlabel=-","T 900 200 5 8 0 1 0 8 1","pintype=pwr","}","L 300 400 300 0 3 0 0 0 -1 -1","L 400 300 400 100 3 0 0 0 -1 -1","L 500 400 500 0 3 0 0 0 -1 -1","L 600 300 600 100 3 0 0 0 -1 -1","L 900 200 800 200 3 0 0 0 -1 -1","L 200 200 300 200 3 0 0 0 -1 -1","L 700 400 700 0 3 0 0 0 -1 -1","L 800 300 800 100 3 0 0 0 -1 -1","T 300 700 5 10 0 0 0 0 1","device=BATTERY","T 300 500 8 10 1 1 0 0 1","refdes=B?","T 300 1350 5 10 0 0 0 0 1","description=battery stack","T 300 1150 5 10 0 0 0 0 1","numslots=0","T 300 950 5 10 0 0 0 0 1","symversion=0.1"];var generic_power_sym=["v 20031231 1","P 200 0 200 200 1 0 0","{","T 250 50 5 6 0 1 0 0 1","pinnumber=1","T 250 50 5 6 0 0 0 0 1","pinseq=1","T 250 50 5 6 0 1 0 0 1 ","pinlabel=1","T 250 50 5 6 0 1 0 0 1 ","pintype=pwr","}","L 50 200 350 200 3 0 0 0 -1 -1","T 200 250 8 10 1 1 0 3 1","net=Vcc:1"];var gnd_1_sym=["v 20031231 1","P 100 100 100 300 1 0 1","{","T 158 161 5 4 0 1 0 0 1","pinnumber=1","T 158 161 5 4 0 0 0 0 1","pinseq=1","T 158 161 5 4 0 1 0 0 1 ","pinlabel=1","T 158 161 5 4 0 1 0 0 1 ","pintype=pwr","}","L 0 100 200 100 3 0 0 0 -1 -1","L 55 50 145 50 3 0 0 0 -1 -1","L 80 10 120 10 3 0 0 0 -1 -1","T 300 50 8 10 0 0 0 0 1","net=GND:1"];var beeper_1_sym=["v 20050820 1","P 0 300 200 300 1 0 0","{","T 150 350 5 8 1 1 0 6 1","pinnumber=1","T 150 250 5 8 0 1 0 8 1","pinseq=1","T 250 300 9 8 0 1 0 0 1","pinlabel=1","T 250 300 5 8 0 1 0 2 1","pintype=pas","}","P 1000 300 800 300 1 0 0","{","T 850 350 5 8 1 1 0 0 1","pinnumber=2","T 850 250 5 8 0 1 0 2 1","pinseq=2","T 800 300 9 8 0 1 0 6 1","pinlabel=2","T 800 300 5 8 0 1 0 8 1","pintype=pas","}","T 300 900 5 10 0 0 0 0 1","device=BEEPER","T 300 700 8 10 1 1 0 0 1","refdes=U?","V 500 300 300 3 0 0 0 -1 -1 0 -1 -1 -1 -1 -1","T 300 1500 5 10 0 0 0 0 1","description=pieco beeper","T 300 1300 5 10 0 0 0 0 1","numslots=0","T 300 1100 5 10 0 0 0 0 1","symversion=0.1","T 277 255 9 8 1 0 0 0 1","Beeper"];var capacitor_variable_1_sym=["v 20050820 1","L 200 400 700 0 3 0 0 0 -1 -1","T 200 700 5 10 0 0 0 0 1","device=VARIABLE_CAPACITOR","L 700 0 600 0 3 0 0 0 -1 -1","L 700 0 700 100 3 0 0 0 -1 -1","P 0 200 200 200 1 0 0","{","T 150 250 5 8 0 1 0 6 1","pinnumber=1","T 150 150 5 8 0 1 0 8 1","pinseq=1","T 200 200 9 8 0 1 0 0 1","pinlabel=1","T 200 200 5 8 0 1 0 2 1","pintype=pas","}","P 900 200 700 200 1 0 0","{","T 750 250 5 8 0 1 0 0 1","pinnumber=2","T 750 150 5 8 0 1 0 2 1","pinseq=2","T 700 200 9 8 0 1 0 6 1","pinlabel=2","T 700 200 5 8 0 1 0 8 1","pintype=pas","}","L 400 400 400 0 3 0 0 0 -1 -1","L 500 400 500 0 3 0 0 0 -1 -1","L 700 200 500 200 3 0 0 0 -1 -1","L 400 200 200 200 3 0 0 0 -1 -1","T 200 500 8 10 1 1 0 0 1","refdes=C?","T 200 1300 5 10 0 0 0 0 1","description=variable capacitor","T 200 1100 5 10 0 0 0 0 1","numslots=0","T 200 900 5 10 0 0 0 0 1","symversion=0.1"];var capacitor_variable_2_sym=["v 20050820 1","L 200 400 700 0 3 0 0 0 -1 -1","T 200 700 5 10 0 0 0 0 1","device=VARIABLE_CAPACITOR","L 700 0 600 0 3 0 0 0 -1 -1","L 700 0 700 100 3 0 0 0 -1 -1","P 0 200 200 200 1 0 0","{","T 150 250 5 8 0 1 0 6 1","pinnumber=1","T 150 150 5 8 0 1 0 8 1","pinseq=1","T 200 200 9 8 0 1 0 0 1","pinlabel=1","T 200 200 5 8 0 1 0 2 1","pintype=pas","}","P 900 200 700 200 1 0 0","{","T 750 250 5 8 0 1 0 0 1","pinnumber=2","T 750 150 5 8 0 1 0 2 1","pinseq=2","T 700 200 9 8 0 1 0 6 1","pinlabel=2","T 700 200 5 8 0 1 0 8 1","pintype=pas","}","L 500 400 500 0 3 0 0 0 -1 -1","L 700 200 500 200 3 0 0 0 -1 -1","L 400 200 200 200 3 0 0 0 -1 -1","A 100 200 300 315 90 3 0 0 0 -1 -1","T 200 500 8 10 1 1 0 0 1","refdes=C?","T 200 1300 5 10 0 0 0 0 1","description=variable capacitor","T 200 1100 5 10 0 0 0 0 1","numslots=0","T 200 900 5 10 0 0 0 0 1","symversion=0.1"];var coil_1_sym=["v 20050820 1","P 200 0 0 0 1 0 1","{","T 150 50 5 8 0 1 0 6 1","pinnumber=1","T 150 -50 5 8 0 1 0 8 1","pinseq=1","T 250 0 9 8 0 1 0 0 1","pinlabel=1","T 250 0 5 8 0 1 0 2 1","pintype=pas","}","P 800 0 1000 0 1 0 1","{","T 850 50 5 8 0 1 0 0 1","pinnumber=2","T 850 -50 5 8 0 1 0 2 1","pinseq=2","T 750 0 9 8 0 1 0 6 1","pinlabel=2","T 750 0 5 8 0 1 0 8 1","pintype=pas","}","A 300 0 100 0 180 3 0 0 0 -1 -1","A 500 0 100 0 180 3 0 0 0 -1 -1","A 700 0 100 0 180 3 0 0 0 -1 -1","T 200 400 5 10 0 0 0 0 1","device=COIL","T 200 200 8 10 1 1 0 0 1","refdes=L?","T 200 1000 5 10 0 0 0 0 1","description=incuctor","T 200 800 5 10 0 0 0 0 1","numslots=0","T 200 600 5 10 0 0 0 0 1","symversion=0.1"];var coil_2_sym=["v 20050820 1","A 289 100 98 315 225 3 0 0 0 -1 -1","A 430 100 100 315 270 3 0 0 0 -1 -1","A 571 100 100 315 270 3 0 0 0 -1 -1","A 712 100 100 0 225 3 0 0 0 -1 -1","P 0 100 189 100 1 0 0","{","T 150 150 5 8 0 1 0 6 1","pinnumber=1","T 150 50 5 8 0 1 0 8 1","pinseq=1","T 250 100 9 8 0 1 0 0 1","pinlabel=1","T 250 100 5 8 0 1 0 2 1","pintype=pas","}","P 812 100 1000 100 1 0 1","{","T 850 150 5 8 0 1 0 0 1","pinnumber=2","T 850 50 5 8 0 1 0 2 1","pinseq=2","T 750 100 9 8 0 1 0 6 1","pinlabel=2","T 750 100 5 8 0 1 0 8 1","pintype=pas","}","T 200 500 5 10 0 0 0 0 1","device=COIL","T 200 300 8 10 1 1 0 0 1","refdes=L?","T 200 1100 5 10 0 0 0 0 1","description=inductor","T 200 900 5 10 0 0 0 0 1","numslots=0","T 200 700 5 10 0 0 0 0 1","symversion=0.1"];var crystal_1_sym=["v 20050820 1","P 0 100 200 100 1 0 0","{","T 150 150 5 8 0 1 0 6 1","pinnumber=1","T 150 50 5 8 0 1 0 8 1","pinseq=1","T 250 100 9 8 0 1 0 0 1","pinlabel=1","T 250 100 5 8 0 1 0 2 1","pintype=pas","}","P 500 100 700 100 1 0 1","{","T 550 150 5 8 0 1 0 0 1","pinnumber=2","T 550 50 5 8 0 1 0 2 1","pinseq=2","T 450 100 9 8 0 1 0 6 1","pinlabel=2","T 450 100 5 8 0 1 0 8 1","pintype=pas","}","B 250 0 200 200 3 0 0 0 -1 -1 0 -1 -1 -1 -1 -1","T 200 500 5 10 0 0 0 0 1","device=CRYSTAL","L 200 240 200 -40 3 0 0 0 -1 -1","L 500 240 500 -40 3 0 0 0 -1 -1","T 200 300 8 10 1 1 0 0 1","refdes=U?","T 200 1100 5 10 0 0 0 0 1","description=crystal","T 200 900 5 10 0 0 0 0 1","numslots=0","T 200 700 5 10 0 0 0 0 1","symversion=0.1"];var current_1_sym=["v 20031231 1","P 0 200 200 200 1 0 0","{","T 100 250 5 8 0 1 0 0 1","pinnumber=1","T 100 250 5 8 0 0 0 0 1","pinseq=1","T 100 250 5 8 0 1 0 0 1 ","pinlabel=1","T 100 250 5 8 0 1 0 0 1 ","pintype=pwr","}","P 900 200 700 200 1 0 0","{","T 700 250 5 8 0 1 0 0 1","pinnumber=2","T 700 250 5 8 0 0 0 0 1","pinseq=2","T 700 250 5 8 0 1 0 0 1 ","pinlabel=2","T 700 250 5 8 0 1 0 0 1 ","pintype=pwr","}","V 450 200 200 3 0 0 0 -1 -1 0 -1 -1 -1 -1 -1","T 600 1000 5 10 0 0 0 0 1","device=CURRENT_SOURCE","L 200 200 250 200 3 0 0 0 -1 -1","L 650 200 700 200 3 0 0 0 -1 -1","L 350 200 550 200 3 0 0 0 -1 -1","L 550 200 500 250 3 0 0 0 -1 -1","L 550 200 500 150 3 0 0 0 -1 -1","T 300 500 8 10 1 1 0 0 1","refdes=I?"];var dual_opamp_1_sym=["v 20050820 1","L 200 800 200 0 3 0 0 0 -1 -1","L 200 800 800 400 3 0 0 0 -1 -1","T 200 2300 5 10 0 0 0 0 1","device=DUAL_OPAMP","L 800 400 200 0 3 0 0 0 -1 -1","L 300 250 300 150 3 0 0 0 -1 -1","L 250 200 350 200 3 0 0 0 -1 -1","L 250 600 350 600 3 0 0 0 -1 -1","P 0 200 200 200 1 0 0","{","T 150 250 5 8 1 1 0 6 1","pinnumber=3","T 150 150 5 8 0 1 0 8 1","pinseq=1","T 250 200 9 8 0 1 0 0 1","pinlabel=IN+","T 250 200 5 8 0 1 0 2 1","pintype=in","}","P 0 600 200 600 1 0 0","{","T 150 650 5 8 1 1 0 6 1","pinnumber=2","T 150 550 5 8 0 1 0 8 1","pinseq=2","T 250 600 9 8 0 1 0 0 1","pinlabel=IN-","T 250 600 5 8 0 1 0 2 1","pintype=in","}","P 800 400 1000 400 1 0 1","{","T 850 450 5 8 1 1 0 0 1","pinnumber=1","T 850 350 5 8 0 1 0 2 1","pinseq=5","T 800 400 9 8 0 1 0 6 1","pinlabel=OUT","T 800 400 5 8 0 1 0 8 1","pintype=out","}","P 500 600 500 800 1 0 1","{","T 550 600 5 8 1 1 0 0 1","pinnumber=8","T 550 600 5 8 0 1 0 2 1","pinseq=3","T 500 600 9 8 1 1 0 5 1","pinlabel=V+","T 500 500 5 8 0 1 0 5 1","pintype=pwr","}","P 500 200 500 0 1 0 1","{","T 550 100 5 8 1 1 0 0 1","pinnumber=4","T 550 100 5 8 0 1 0 2 1","pinseq=4","T 500 200 9 8 1 1 0 3 1","pinlabel=V-","T 500 300 5 8 0 1 0 3 1","pintype=pwr","}","T 200 900 8 10 1 1 0 0 1","refdes=U?","T 200 1100 5 10 0 0 0 0 1","slot=1","T 200 1300 5 10 0 0 0 0 1","numslots=2","T 200 1500 5 10 0 0 0 0 1","slotdef=1:3,2,8,4,1","T 200 1700 5 10 0 0 0 0 1","slotdef=2:5,6,8,4,7","T 200 1900 5 10 0 0 0 0 1","footprint=SO8","T 200 2100 5 10 0 0 0 0 1","footprint2=DIP8","T 200 2500 5 10 0 0 0 0 1","symversion=0.2","T 200 2700 5 10 0 0 0 0 1","documentation=http://www.onsemi.com/pub/Collateral/LM358-D.PDF","T 200 2900 5 10 0 0 0 0 1","description=dual opamp"];var fuse_1_sym=["v 20050820 1","P 0 0 200 0 1 0 0","{","T 150 50 5 8 0 1 0 6 1","pinnumber=1","T 150 -50 5 8 0 1 0 8 1","pinseq=1","T 250 0 9 8 0 1 0 0 1","pinlabel=1","T 250 0 5 8 0 1 0 2 1","pintype=pas","}","P 700 0 900 0 1 0 1","{","T 750 50 5 8 0 1 0 0 1","pinnumber=2","T 750 -50 5 8 0 1 0 2 1","pinseq=2","T 650 0 9 8 0 1 0 6 1","pinlabel=2","T 650 0 5 8 0 1 0 8 1","pintype=pas","}","A 325 0 125 180 180 3 0 0 0 -1 -1","A 575 0 125 0 180 3 0 0 0 -1 -1","T 200 400 5 10 0 0 0 0 1","device=FUSE","T 200 200 8 10 1 1 0 0 1","refdes=F?","T 200 1000 5 10 0 0 0 0 1","description=fuse","T 200 800 5 10 0 0 0 0 1","numslots=0","T 200 600 5 10 0 0 0 0 1","symversion=0.1"];var inductor_1_sym=["v 20050820 1","P 900 100 750 100 1 0 0","{","T 800 150 5 8 0 1 0 0 1","pinnumber=2","T 800 50 5 8 0 1 0 2 1","pinseq=2","T 700 100 9 8 0 1 0 6 1","pinlabel=2","T 700 100 5 8 0 1 0 8 1","pintype=pas","}","P 0 100 150 100 1 0 0","{","T 100 150 5 8 0 1 0 6 1","pinnumber=1","T 100 50 5 8 0 1 0 8 1","pinseq=1","T 200 100 9 8 0 1 0 0 1","pinlabel=1","T 200 100 5 8 0 1 0 2 1","pintype=pas","}","A 237 100 75 0 180 3 0 0 0 -1 -1","A 379 100 75 0 180 3 0 0 0 -1 -1","A 521 100 75 0 180 3 0 0 0 -1 -1","A 663 100 75 0 180 3 0 0 0 -1 -1","T 200 500 5 10 0 0 0 0 1","device=INDUCTOR","L 738 100 750 100 3 0 0 0 -1 -1","L 150 100 162 100 3 0 0 0 -1 -1","A 308 100 4 180 180 3 0 0 0 -1 -1","A 450 100 4 180 180 3 0 0 0 -1 -1","A 592 100 4 180 180 3 0 0 0 -1 -1","T 200 300 8 10 1 1 0 0 1","refdes=L?","T 200 1100 5 10 0 0 0 0 1","description=inductor","T 200 900 5 10 0 0 0 0 1","numslots=0","T 200 700 5 10 0 0 0 0 1","symversion=0.1"];var led_1_sym=["v 20050820 1","P 0 200 200 200 1 0 0","{","T 150 250 5 8 1 1 0 6 1","pinnumber=1","T 150 150 5 8 0 1 0 8 1","pinseq=1","T 250 200 9 8 0 1 0 0 1","pinlabel=A","T 250 200 5 8 0 1 0 2 1","pintype=pas","}","P 900 200 700 200 1 0 0","{","T 750 250 5 8 1 1 0 0 1","pinnumber=2","T 750 150 5 8 0 1 0 2 1","pinseq=2","T 650 200 9 8 0 1 0 6 1","pinlabel=K","T 650 200 5 8 0 1 0 8 1","pintype=pas","}","L 400 300 500 200 3 0 0 0 -1 -1","L 500 200 400 100 3 0 0 0 -1 -1","L 400 300 400 100 3 0 0 0 -1 -1","L 500 300 500 100 3 0 0 0 -1 -1","L 500 200 700 200 3 0 0 0 -1 -1","L 400 200 200 200 3 0 0 0 -1 -1","V 450 200 200 3 0 0 0 -1 -1 0 -1 -1 -1 -1 -1","T 800 600 5 10 0 0 0 0 1","device=LED","L 516 503 617 604 3 0 0 0 -1 -1","L 617 604 621 555 3 0 0 0 -1 -1","L 621 555 722 657 3 0 0 0 -1 -1","L 484 418 585 518 3 0 0 0 -1 -1","L 585 518 589 469 3 0 0 0 -1 -1","L 589 469 690 570 3 0 0 0 -1 -1","T 800 400 8 10 1 1 0 0 1","refdes=LED?","T 800 1200 5 10 0 0 0 0 1","description=LED","T 800 1000 5 10 0 0 0 0 1","numslots=0","T 800 800 5 10 0 0 0 0 1","symversion=0.1"];var microphone_1_sym=["v 20050820 1","A 0 500 500 270 180 3 0 0 0 -1 -1","T 400 1200 5 10 0 0 0 0 1","device=MICROPHONE","L 0 1000 0 0 3 0 0 0 -1 -1","T 400 1000 8 10 1 1 0 0 1","refdes=MIC?","T 400 1850 5 10 0 0 0 0 1","description=microphone","T 400 1650 5 10 0 0 0 0 1","numslots=0","T 400 1450 5 10 0 0 0 0 1","symversion=0.1","P 700 800 400 800 1 0 0","{","T 500 750 5 10 0 1 0 2 1","pinseq=1","T 350 800 5 10 0 1 0 8 1","pintype=pas","T 500 850 5 10 0 1 0 0 1","pinnumber=1","T 350 800 5 10 0 1 0 6 1","pinlabel=1","}","P 700 200 400 200 1 0 0","{","T 500 150 5 10 0 1 0 2 1","pinseq=2","T 350 200 5 10 0 1 0 8 1","pintype=pas","T 500 250 5 10 0 1 0 0 1","pinnumber=2","T 350 200 5 10 0 1 0 6 1","pinlabel=2","}"];var nmos_1_sym=["v 20050820 1","L 300 600 300 200 3 0 0 0 -1 -1","T 700 800 5 10 0 0 0 0 1","device=NMOS_TRANSISTOR","L 200 600 200 200 3 0 0 0 -1 -1","L 300 600 500 600 3 0 0 0 -1 -1","L 300 200 500 200 3 0 0 0 -1 -1","L 300 400 500 400 3 0 0 0 -1 -1","L 300 400 400 500 3 0 0 0 -1 -1","L 300 400 400 300 3 0 0 0 -1 -1","P 0 400 200 400 1 0 0","{","T 150 450 5 8 0 1 0 6 1","pinnumber=G","T 150 350 5 8 0 1 0 8 1","pinseq=2","T 200 400 9 8 0 1 0 0 1","pinlabel=G","T 200 400 5 8 0 1 0 2 1","pintype=in","}","P 500 600 500 800 1 0 1","{","T 550 650 5 8 0 1 0 0 1","pinnumber=D","T 550 650 5 8 0 1 0 2 1","pinseq=1","T 500 600 9 8 0 1 0 5 1","pinlabel=D","T 500 400 5 8 0 1 0 5 1","pintype=pas","}","P 500 400 700 400 1 0 1","{","T 550 450 5 8 0 1 0 0 1","pinnumber=B","T 550 350 5 8 0 1 0 2 1","pinseq=4","T 500 400 9 8 0 1 0 6 1","pinlabel=B","T 500 400 5 8 0 1 0 8 1","pintype=pas","}","P 500 200 500 0 1 0 1","{","T 550 50 5 8 0 1 0 0 1","pinnumber=S","T 550 50 5 8 0 1 0 2 1","pinseq=3","T 500 200 9 8 0 1 0 3 1","pinlabel=S","T 500 500 5 8 0 1 0 3 1","pintype=pas","}","T 700 600 8 10 1 1 0 0 1","refdes=Q?","T 700 1400 5 10 0 0 0 0 1","description=NMOS transistor","T 700 1200 5 10 0 0 0 0 1","numslots=0","T 700 1000 5 10 0 0 0 0 1","symversion=0.1"];var nmos_2_sym=["v 20031231 1","L 250 650 250 150 3 0 0 0 -1 -1","T 600 500 5 10 0 0 0 0 1","device=NMOS_TRANSISTOR","L 200 550 200 250 3 0 0 0 -1 -1","L 250 600 500 600 3 0 0 0 -1 -1","L 250 200 500 200 3 0 0 0 -1 -1","L 250 400 500 400 3 0 0 0 -1 -1","L 250 400 350 450 3 0 0 0 -1 -1","L 250 400 350 350 3 0 0 0 -1 -1","P 0 400 200 400 1 0 0","{","T 0 500 5 10 0 1 0 0 1","pinnumber=G","T 0 500 5 10 0 0 0 0 1","pinseq=2","T 0 500 5 10 0 1 0 0 1 ","pinlabel=G","T 0 500 5 10 0 1 0 0 1 ","pintype=pas","}","P 500 600 500 800 1 0 1","{","T 300 700 5 10 0 1 0 0 1","pinnumber=D","T 300 700 5 10 0 0 0 0 1","pinseq=1","T 300 700 5 10 0 1 0 0 1 ","pinlabel=D","T 300 700 5 10 0 1 0 0 1 ","pintype=pas","}","P 500 400 700 400 1 0 1","{","T 600 500 5 10 0 1 0 0 1","pinnumber=B","T 600 500 5 10 0 0 0 0 1","pinseq=4","T 600 500 5 10 0 1 0 0 1 ","pinlabel=B","T 600 500 5 10 0 1 0 0 1 ","pintype=pas","}","P 500 200 500 0 1 0 1","{","T 300 0 5 10 0 1 0 0 1","pinnumber=S","T 300 0 5 10 0 0 0 0 1","pinseq=3","T 300 0 5 10 0 1 0 0 1 ","pinlabel=S","T 300 0 5 10 0 1 0 0 1 ","pintype=pas","}","T 700 600 8 10 1 1 0 0 1","refdes=Q?"];var nmos_3_sym=["v 20031231 1","T 600 500 5 10 0 0 0 0 1","device=NMOS_TRANSISTOR","T 600 500 5 10 0 0 0 0 1","numslots=0","T 600 500 5 10 0 0 0 0 1","description=generic N channel MOS transistor (enhancement type)","L 250 600 500 600 3 0 0 0 -1 -1","L 250 200 500 200 3 0 0 0 -1 -1","L 250 400 350 450 3 0 0 0 -1 -1","L 250 400 350 350 3 0 0 0 -1 -1","P 0 200 200 200 1 0 0","{","T 0 300 5 10 0 1 0 0 1","pinnumber=G","T 0 300 9 10 0 1 0 0 1","pinlabel=G","T 0 300 5 10 0 0 0 0 1","pinseq=2","T 0 300 5 10 0 0 0 0 1","pintype=pas","}","P 500 600 500 800 1 0 1","{","T 300 700 5 10 0 1 0 0 1","pinnumber=D","T 300 700 9 10 0 1 0 0 1","pinlabel=D","T 300 700 5 10 0 0 0 0 1","pinseq=1","T 300 700 5 10 0 0 0 0 1","pintype=pas","}","P 500 200 500 0 1 0 1","{","T 300 0 5 10 0 1 0 0 1","pinnumber=S","T 300 0 9 10 0 1 0 0 1","pinlabel=S","T 300 0 5 10 0 0 0 0 1","pinseq=3","T 300 0 5 10 0 0 0 0 1","pintype=pas","}","T 700 600 8 10 1 1 0 0 1","refdes=Q?","L 250 675 250 525 3 0 0 0 -1 -1","L 250 475 250 325 3 0 0 0 -1 -1","L 250 275 250 125 3 0 0 0 -1 -1","L 200 600 200 200 3 0 0 0 -1 -1","L 250 400 400 400 3 0 0 0 -1 -1","L 400 400 400 200 3 0 0 0 -1 -1"];var npn_3_sym=["v 20080706 2","P 600 1000 600 800 1 0 0","{","T 500 850 5 6 1 1 0 0 1","pinnumber=C","T 500 850 5 6 0 0 0 0 1","pinseq=1","T 500 850 5 6 0 1 0 0 1","pinlabel=C","T 500 850 5 6 0 1 0 0 1","pintype=pas","}","P 600 200 600 0 1 0 1","{","T 500 50 5 6 1 1 0 0 1","pinnumber=E","T 500 50 5 6 0 0 0 0 1","pinseq=3","T 500 50 5 6 0 1 0 0 1","pinlabel=E","T 500 50 5 6 0 1 0 0 1","pintype=pas","}","V 500 501 316 3 0 0 0 -1 -1 0 -1 -1 -1 -1 -1","T 900 500 5 10 0 0 0 0 1","device=NPN_TRANSISTOR","L 600 200 400 400 3 0 0 0 -1 -1","L 600 800 400 600 3 0 0 0 -1 -1","L 400 700 400 300 3 0 0 0 -1 -1","P 0 500 184 500 1 0 0","{","T 100 550 5 6 1 1 0 0 1","pinnumber=B","T 100 550 5 6 0 0 0 0 1","pinseq=2","T 100 550 5 6 0 1 0 0 1","pinlabel=B","T 100 550 5 6 0 1 0 0 1","pintype=pas","}","L 400 500 184 500 3 0 0 0 -1 -1","T 900 500 8 10 1 1 0 0 1","refdes=Q?","H 3 0 0 0 -1 -1 1 -1 -1 -1 -1 -1 5","M 510,240","L 601,200","L 555,295","L 535,265","z"];var opamp_1_sym=["v 20050820 1","L 200 800 200 0 3 0 0 0 -1 -1","L 200 800 800 400 3 0 0 0 -1 -1","T 700 800 5 10 0 0 0 0 1","device=OPAMP","L 800 400 200 0 3 0 0 0 -1 -1","L 300 650 300 550 3 0 0 0 -1 -1","L 250 600 350 600 3 0 0 0 -1 -1","L 250 200 350 200 3 0 0 0 -1 -1","P 0 600 200 600 1 0 0","{","T 150 650 5 8 1 1 0 6 1","pinnumber=1","T 150 550 5 8 0 1 0 8 1","pinseq=1","T 250 600 9 8 0 1 0 0 1","pinlabel=in+","T 250 600 5 8 0 1 0 2 1","pintype=in","}","P 0 200 200 200 1 0 0","{","T 150 250 5 8 1 1 0 6 1","pinnumber=2","T 150 150 5 8 0 1 0 8 1","pinseq=2","T 250 200 9 8 0 1 0 0 1","pinlabel=in-","T 250 200 5 8 0 1 0 2 1","pintype=in","}","P 800 400 1000 400 1 0 1","{","T 800 450 5 8 1 1 0 0 1","pinnumber=5","T 800 350 5 8 0 1 0 2 1","pinseq=5","T 750 400 9 8 0 1 0 6 1","pinlabel=out","T 750 400 5 8 0 1 0 8 1","pintype=out","}","P 500 600 500 800 1 0 1","{","T 550 600 5 8 1 1 0 0 1","pinnumber=3","T 550 600 5 8 0 1 0 2 1","pinseq=3","T 500 600 9 8 0 1 0 5 1","pinlabel=V+","T 500 550 5 8 0 1 0 5 1","pintype=pwr","}","P 500 200 500 0 1 0 1","{","T 550 100 5 8 1 1 0 0 1","pinnumber=4","T 550 100 5 8 0 1 0 2 1","pinseq=4","T 500 200 9 8 0 1 0 3 1","pinlabel=V-","T 500 300 5 8 0 1 0 3 1","pintype=pwr","}","T 700 600 8 10 1 1 0 0 1","refdes=U?","T 700 1200 5 10 0 0 0 0 1","description=operational amplifier","T 700 1000 5 10 0 0 0 0 1","numslots=0","T 700 1400 5 10 0 0 0 0 1","symversion=0.1"];var photodiode_1_sym=["v 20031231 1","P 500 0 500 200 1 0 0","{","T 450 200 5 8 0 1 90 0 1","pinnumber=1","T 450 200 5 8 0 0 90 0 1","pinseq=1","T 450 200 5 8 0 1 90 0 1 ","pinlabel=1","T 450 200 5 8 0 1 90 0 1 ","pintype=pas","}","P 500 900 500 700 1 0 0","{","T 450 700 5 8 0 1 90 0 1","pinnumber=2","T 450 700 5 8 0 0 90 0 1","pinseq=2","T 450 700 5 8 0 1 90 0 1 ","pinlabel=2","T 450 700 5 8 0 1 90 0 1 ","pintype=pas","}","L 400 400 500 500 3 0 0 0 -1 -1","L 500 500 600 400 3 0 0 0 -1 -1","L 400 400 600 400 3 0 0 0 -1 -1","L 400 500 600 500 3 0 0 0 -1 -1","L 500 500 500 700 3 0 0 0 -1 -1","L 500 400 500 200 3 0 0 0 -1 -1","V 500 450 200 3 0 0 0 -1 -1 0 -1 -1 -1 -1 -1","T 500 1100 5 10 0 0 0 0 1","device=photodiode","L 219 702 154 655 3 0 0 0 -1 -1","L 82 826 95 742 3 0 0 0 -1 -1","L 229 622 82 826 3 0 0 0 -1 -1","T 900 800 8 10 1 1 180 0 1","refdes=PD?","L 230 621 219 702 3 0 0 0 -1 -1","L 154 655 230 621 3 0 0 0 -1 -1","L 95 742 -37 898 3 0 0 0 -1 -1","L 215 541 150 494 3 0 0 0 -1 -1","L 78 665 91 581 3 0 0 0 -1 -1","L 225 461 78 665 3 0 0 0 -1 -1","L 226 460 215 541 3 0 0 0 -1 -1","L 150 494 226 460 3 0 0 0 -1 -1","L 91 581 -41 737 3 0 0 0 -1 -1"];var photo_resistor_1_sym=["v 20031231 1","L 600 400 500 200 3 0 0 0 -1 -1","L 500 200 400 400 3 0 0 0 -1 -1","L 400 400 300 200 3 0 0 0 -1 -1","L 300 200 200 400 3 0 0 0 -1 -1","L 600 400 700 200 3 0 0 0 -1 -1","L 700 200 750 300 3 0 0 0 -1 -1","P 900 300 750 300 1 0 0","{","T 800 350 5 8 0 1 0 0 1","pinnumber=2","T 800 350 5 8 0 0 0 0 1","pinseq=2","T 800 350 5 8 0 1 0 0 1 ","pinlabel=2","T 800 350 5 8 0 1 0 0 1 ","pintype=pas","}","P 0 300 152 300 1 0 0","{","T 100 350 5 8 0 1 0 0 1","pinnumber=1","T 100 350 5 8 0 0 0 0 1","pinseq=1","T 100 350 5 8 0 1 0 0 1 ","pinlabel=1","T 100 350 5 8 0 1 0 0 1 ","pintype=pas","}","L 201 400 150 300 3 0 0 0 -1 -1","V 450 300 300 3 0 0 0 -1 -1 0 -1 -1 -1 -1 -1","T 700 700 5 10 0 0 0 0 1","device=PHOTORESISTOR","T 200 700 8 10 1 1 0 0 1","refdes=R?"];var photo_transistor_1_sym=["v 20031231 1","T -200 500 5 6 0 1 0 0 1","device=PS2501-1","P 200 400 200 300 1 0 0","{","T 200 200 3 6 0 1 0 0 1","pinnumber=1","T 200 200 3 6 0 0 0 0 1","pinseq=1","T -163 400 3 6 0 1 0 0 1","pinlabel=COLLECTOR","T 200 200 3 6 0 1 0 0 1 ","pintype=pas","}","P 200 100 200 0 1 0 1","{","T 210 -50 3 6 0 1 0 0 1","pinnumber=2","T 210 -50 3 6 0 0 0 0 1","pinseq=2","T 210 -50 3 6 0 1 0 0 1","pinlabel=EMITTER","T 210 -50 3 6 0 1 0 0 1 ","pintype=pas","}","L 60 200 20 210 3 0 0 0 -1 -1","L 20 210 50 240 3 0 0 0 -1 -1","L 50 240 60 200 3 0 0 0 -1 -1","L 60 130 20 140 3 0 0 0 -1 -1","L 20 140 50 170 3 0 0 0 -1 -1","L 50 170 60 130 3 0 0 0 -1 -1","L 100 300 100 100 3 0 0 0 -1 -1","L 200 100 100 170 3 0 0 0 -1 -1","L 100 230 200 300 3 0 0 0 -1 -1","L 40 220 0 260 3 0 0 0 -1 -1","L 0 260 0 230 3 0 0 0 -1 -1","L 0 230 -40 270 3 0 0 0 -1 -1","L 40 150 0 190 3 0 0 0 -1 -1","L 0 190 0 160 3 0 0 0 -1 -1","L 0 160 -40 200 3 0 0 0 -1 -1","L 200 100 170 140 3 0 0 0 -1 -1","L 170 140 150 110 3 0 0 0 -1 -1","L 150 110 200 100 3 0 0 0 -1 -1","T 260 100 8 10 1 1 0 0 1","refdes=Q?","T -40 0 8 10 0 1 0 0 1","device=photo-transistor"];var pmos_1_sym=["v 20031231 1","L 300 600 300 200 3 0 0 0 -1 -1","T 600 200 5 10 0 0 0 0 1","device=PMOS_TRANSISTOR","L 200 600 200 200 3 0 0 0 -1 -1","L 300 600 500 600 3 0 0 0 -1 -1","L 300 200 500 200 3 0 0 0 -1 -1","L 300 400 500 400 3 0 0 0 -1 -1","L 500 400 400 300 3 0 0 0 -1 -1","L 500 400 400 500 3 0 0 0 -1 -1","P 500 600 500 800 1 0 1","{","T 300 700 5 10 0 1 0 0 1","pinnumber=D","T 300 700 5 10 0 0 0 0 1","pinseq=1","T 300 700 5 10 0 1 0 0 1 ","pinlabel=D","T 300 700 5 10 0 1 0 0 1 ","pintype=pas","}","P 500 400 700 400 1 0 1","{","T 600 500 5 10 0 1 0 0 1","pinnumber=B","T 600 500 5 10 0 0 0 0 1","pinseq=4","T 600 500 5 10 0 1 0 0 1 ","pinlabel=B","T 600 500 5 10 0 1 0 0 1 ","pintype=pas","}","P 500 200 500 0 1 0 1","{","T 300 0 5 10 0 1 0 0 1","pinnumber=S","T 300 0 5 10 0 0 0 0 1","pinseq=3","T 300 0 5 10 0 1 0 0 1 ","pinlabel=S","T 300 0 5 10 0 1 0 0 1 ","pintype=pas","}","P 200 400 0 400 1 0 1","{","T 0 500 5 10 0 1 0 0 1","pinnumber=G","T 0 500 5 10 0 0 0 0 1","pinseq=2","T 0 500 5 10 0 1 0 0 1 ","pinlabel=G","T 0 500 5 10 0 1 0 0 1 ","pintype=pas","}","T 700 600 8 10 1 1 0 0 1","refdes=Q?"];var pnp_3_sym=["v 20080706 2","P 600 1000 600 800 1 0 0","{","T 500 850 5 6 1 1 0 0 1","pinnumber=C","T 500 850 5 6 0 0 0 0 1","pinseq=1","T 500 850 5 6 0 1 0 0 1","pinlabel=C","T 500 850 5 6 0 1 0 0 1","pintype=pas","}","P 600 200 600 0 1 0 1","{","T 500 50 5 6 1 1 0 0 1","pinnumber=E","T 500 50 5 6 0 0 0 0 1","pinseq=3","T 500 50 5 6 0 1 0 0 1","pinlabel=E","T 500 50 5 6 0 1 0 0 1","pintype=pas","}","V 500 501 316 3 0 0 0 -1 -1 0 -1 -1 -1 -1 -1","T 900 500 5 10 0 0 0 0 1","device=PNP_TRANSISTOR","L 600 200 400 400 3 0 0 0 -1 -1","L 600 800 400 600 3 0 0 0 -1 -1","L 400 700 400 300 3 0 0 0 -1 -1","P 0 500 184 500 1 0 0","{","T 100 550 5 6 1 1 0 0 1","pinnumber=B","T 100 550 5 6 0 0 0 0 1","pinseq=2","T 100 550 5 6 0 1 0 0 1","pinlabel=B","T 100 550 5 6 0 1 0 0 1","pintype=pas","}","L 400 500 184 500 3 0 0 0 -1 -1","H 3 0 0 0 -1 -1 1 -1 -1 -1 -1 -1 5","M 440,290","L 400,401","L 495,355","L 465,335","z","T 900 500 8 10 1 1 0 0 1","refdes=Q?"];var resistor_variable_1_sym=["v 20031231 1","P 500 450 500 600 1 0 1","{","T 400 500 5 8 0 1 0 0 1","pinnumber=3","T 400 500 5 8 0 0 0 0 1","pinseq=3","T 400 500 5 8 0 1 0 0 1 ","pinlabel=3","T 400 500 5 8 0 1 0 0 1 ","pintype=pas","}","L 500 200 448 301 3 0 0 0 -1 -1","L 501 201 553 302 3 0 0 0 -1 -1","L 600 200 500 0 3 0 0 0 -1 -1","L 500 0 400 200 3 0 0 0 -1 -1","L 400 200 300 0 3 0 0 0 -1 -1","L 300 0 200 200 3 0 0 0 -1 -1","T 800 900 5 10 0 0 0 0 1","device=VARIABLE_RESISTOR","L 600 200 700 0 3 0 0 0 -1 -1","L 700 0 750 100 3 0 0 0 -1 -1","P 900 100 750 100 1 0 0","{","T 800 150 5 8 0 1 0 0 1","pinnumber=2","T 800 150 5 8 0 0 0 0 1","pinseq=2","T 800 150 5 8 0 1 0 0 1 ","pinlabel=2","T 800 150 5 8 0 1 0 0 1 ","pintype=pas","}","P 0 100 152 100 1 0 0","{","T 100 150 5 8 0 1 0 0 1","pinnumber=1","T 100 150 5 8 0 0 0 0 1","pinseq=1","T 100 150 5 8 0 1 0 0 1 ","pinlabel=1","T 100 150 5 8 0 1 0 0 1 ","pintype=pas","}","L 201 200 150 100 3 0 0 0 -1 -1","L 500 200 500 450 3 0 0 0 -1 -1","T 600 400 8 10 1 1 0 0 1","refdes=R?"];var resistor_variable_2_sym=["v 20031231 1","T 550 400 8 10 1 1 0 0 1","refdes=R?","T 800 900 8 10 0 1 0 0 1","device=VARIABLE_RESISTOR","P 0 100 200 100 1 0 0","{","T 0 100 5 10 0 1 0 0 1","pinnumber=1","T 0 100 5 10 0 0 0 0 1","pinseq=1","T 0 100 5 10 0 1 0 0 1 ","pinlabel=1","T 0 100 5 10 0 1 0 0 1 ","pintype=pas","}","P 700 100 900 100 1 0 1","{","T 800 100 5 10 0 1 0 0 1","pinnumber=2","T 800 100 5 10 0 0 0 0 1","pinseq=2","T 800 100 5 10 0 1 0 0 1 ","pinlabel=2","T 800 100 5 10 0 1 0 0 1 ","pintype=pas","}","P 500 400 500 600 1 0 1","{","T 500 500 5 10 0 1 90 0 1","pinnumber=3","T 500 500 5 10 0 0 90 0 1","pinseq=3","T 500 500 5 10 0 1 90 0 1 ","pinlabel=3","T 500 500 5 10 0 1 90 0 1 ","pintype=pas","}","B 200 0 500 200 3 0 0 0 -1 -1 0 -1 -1 -1 -1 -1","L 500 400 500 200 3 0 0 0 -1 -1","L 500 200 450 300 3 0 0 0 -1 -1","L 500 200 550 300 3 0 0 0 -1 -1"];var gEdaBasic={"resistor-1.sym":resistor_1_sym,"resistor-2.sym":resistor_2_sym,"capacitor-1.sym":capacitor_1_sym,"capacitor-2.sym":capacitor_2_sym,"capacitor-3.sym":capacitor_3_sym,"capacitor-4.sym":capacitor_4_sym,"diode-1.sym":diode_1_sym,"diode-2.sym":diode_2_sym,"diode-3.sym":diode_3_sym,"speaker-1.sym":speaker_1_sym,"voltage-1.sym":voltage_1_sym,"voltage-2.sym":voltage_2_sym,"battery-2.sym":battery_2_sym,"battery-3.sym":battery_3_sym,"generic-power.sym":generic_power_sym,"gnd-1.sym":gnd_1_sym,"beeper-1.sym":beeper_1_sym,"capacitor-variable-1.sym":capacitor_variable_1_sym,"capacitor-variable-2.sym":capacitor_variable_2_sym,"coil-1.sym":coil_1_sym,"coil-2.sym":coil_2_sym,"crystal-1.sym":crystal_1_sym,"current-1.sym":current_1_sym,"dual-opamp-1.sym":dual_opamp_1_sym,"fuse-1.sym":fuse_1_sym,"inductor-1.sym":inductor_1_sym,"led-1.sym":led_1_sym,"microphone-1.sym":microphone_1_sym,"nmos-1.sym":nmos_1_sym,"nmos-2.sym":nmos_2_sym,"nmos-3.sym":nmos_3_sym,"npn-3.sym":npn_3_sym,"opamp-1.sym":opamp_1_sym,"photodiode-1.sym":photodiode_1_sym,"photo-resistor-1.sym":photo_resistor_1_sym,"photo-transistor-1.sym":photo_transistor_1_sym,"pmos-1.sym":pmos_1_sym,"pnp-3.sym":pnp_3_sym,"resistor-variable-1.sym":resistor_variable_1_sym,"resistor-variable-2.sym":resistor_variable_2_sym};var CATEGORY_F_C_D="Flow Chart";var CATEGORY_F_C_B="Basic Shapes";var gHadRegisterBasic=false;function idrawRegisterBasic(a){if(gHadRegisterBasic){return}gHadRegisterBasic=true;ShapeFactoryGet().addShapeCreator(new LineShapeCreator(),CATEGORY_F_C_D);ShapeFactoryGet().addShapeCreator(new SegmentsShapeCreator(),CATEGORY_F_C_D);ShapeFactoryGet().addShapeCreator(new CurveShapeCreator(),CATEGORY_F_C_D);ShapeFactoryGet().addShapeCreator(new HLineShapeCreator("h-line"),CATEGORY_F_C_D);ShapeFactoryGet().addShapeCreator(new VLineShapeCreator("v-line"),CATEGORY_F_C_D);ShapeFactoryGet().addShapeCreator(new ArcRectShapeCreator("fc-start-end"),CATEGORY_F_C_D);ShapeFactoryGet().addShapeCreator(new DiamondShapeCreator("fc-decision"),CATEGORY_F_C_D);ShapeFactoryGet().addShapeCreator(new RectShapeCreator("fc-process"),CATEGORY_F_C_D);ShapeFactoryGet().addShapeCreator(new ParallRectShapeCreator("fc-data"),CATEGORY_F_C_D);ShapeFactoryGet().addShapeCreator(new StoredDataShapeCreator(),CATEGORY_F_C_D);ShapeFactoryGet().addShapeCreator(new DirectDataShapeCreator(),CATEGORY_F_C_D);ShapeFactoryGet().addShapeCreator(new ManualInputShapeCreator(),CATEGORY_F_C_D);ShapeFactoryGet().addShapeCreator(new DocumentShapeCreator(),CATEGORY_F_C_D);ShapeFactoryGet().addShapeCreator(new SeqeuncialAccessShapeCreator(),CATEGORY_F_C_D);ShapeFactoryGet().addShapeCreator(new TextCalloutShapeCreator(),CATEGORY_F_C_D);ShapeFactoryGet().addShapeCreator(new RectCalloutShapeCreator(),CATEGORY_F_C_D);ShapeFactoryGet().addShapeCreator(new ArrowShapeCreator("line-normal-arrow",x27,x55),CATEGORY_F_C_D);ShapeFactoryGet().addShapeCreator(new ArrowShapeCreator("line-diamond-arrow",x21,x55),CATEGORY_F_C_D);ShapeFactoryGet().addShapeCreator(new ArrowShapeCreator("line-fill-diamond-arrow",x23,x55),CATEGORY_F_C_D);ShapeFactoryGet().addShapeCreator(new ArrowShapeCreator("line-tri-arrow",x29,x55),CATEGORY_F_C_D);ShapeFactoryGet().addShapeCreator(new ArrowShapeCreator("dash-line-normal-arrow",x27,x59),CATEGORY_F_C_D);ShapeFactoryGet().addShapeCreator(new RoundCalloutShapeCreator(),CATEGORY_F_C_D);ShapeFactoryGet().addShapeCreator(new NotesCalloutShapeCreator(),CATEGORY_F_C_D);ShapeFactoryGet().addShapeCreator(new RoundArrowCalloutShapeCreator(),CATEGORY_F_C_D);ShapeFactoryGet().addShapeCreator(new RectShapeCreator(),CATEGORY_F_C_B);ShapeFactoryGet().addShapeCreator(new CircleShapeCreator(),CATEGORY_F_C_B);ShapeFactoryGet().addShapeCreator(new RoundRectShapeCreator(),CATEGORY_F_C_B);ShapeFactoryGet().addShapeCreator(new TriRectShapeCreator(),CATEGORY_F_C_B);ShapeFactoryGet().addShapeCreator(new ImageRectShapeCreator(),CATEGORY_F_C_B);ShapeFactoryGet().addShapeCreator(new DiamondShapeCreator(),CATEGORY_F_C_B);ShapeFactoryGet().addShapeCreator(new FourArrowShapeCreator("4arrow",C_SHAPE_FOUR_ARROW),CATEGORY_F_C_B);ShapeFactoryGet().addShapeCreator(new FourArrowShapeCreator("3arrow-left",C_SHAPE_THREE_LEFT_ARROW),CATEGORY_F_C_B);ShapeFactoryGet().addShapeCreator(new FourArrowShapeCreator("3arrow-right",C_SHAPE_THREE_RIGHT_ARROW),CATEGORY_F_C_B);ShapeFactoryGet().addShapeCreator(new FourArrowShapeCreator("3arrow-down",C_SHAPE_THREE_DOWN_ARROW),CATEGORY_F_C_B);ShapeFactoryGet().addShapeCreator(new FourArrowShapeCreator("3arrow-up",C_SHAPE_THREE_UP_ARROW),CATEGORY_F_C_B);ShapeFactoryGet().addShapeCreator(new LeftArrowShapeCreator(),CATEGORY_F_C_B);ShapeFactoryGet().addShapeCreator(new RightArrowShapeCreator(),CATEGORY_F_C_B);ShapeFactoryGet().addShapeCreator(new UpArrowShapeCreator(),CATEGORY_F_C_B);ShapeFactoryGet().addShapeCreator(new DownArrowShapeCreator(),CATEGORY_F_C_B);ShapeFactoryGet().addShapeCreator(new HorArrowShapeCreator(),CATEGORY_F_C_B);ShapeFactoryGet().addShapeCreator(new VerArrowShapeCreator(),CATEGORY_F_C_B);ShapeFactoryGet().addShapeCreator(new ArrowShapeCreator("line-normal-arrow",x27,x55),CATEGORY_F_C_B);ShapeFactoryGet().addShapeCreator(new ArrowShapeCreator("line-diamond-arrow",x21,x55),CATEGORY_F_C_B);ShapeFactoryGet().addShapeCreator(new ArrowShapeCreator("line-fill-diamond-arrow",x23,x55),CATEGORY_F_C_B);ShapeFactoryGet().addShapeCreator(new ArrowShapeCreator("line-tri-arrow",x29,x55),CATEGORY_F_C_B);ShapeFactoryGet().addShapeCreator(new ArrowShapeCreator("dash-line-normal-arrow",x27,x59),CATEGORY_F_C_B);if(a){ShapeFactoryGet().addDiagramType(CATEGORY_F_C_D,CATEGORY_F_C_D)}return}var hadRegisterUML=false;function idrawRegisterUML(){if(hadRegisterUML){return}hadRegisterUML=true;var e="UML User Case Diagram";ShapeFactoryGet().addShapeCreator(new ActorShapeCreator(),e);ShapeFactoryGet().addShapeCreator(new UserCaseShapeCreator(),e);ShapeFactoryGet().addShapeCreator(new SystemBoudaryShapeCreator(),e);ShapeFactoryGet().addShapeCreator(new NotesCalloutShapeCreator(),e);ShapeFactoryGet().addShapeCreator(new TextCalloutShapeCreator(),e);ShapeFactoryGet().addShapeCreator(new AssocShapeCreator(),e);ShapeFactoryGet().addShapeCreator(new ArrowShapeCreator("uml-direct_assoc",x27,x55),e);ShapeFactoryGet().addShapeCreator(new ArrowShapeCreator("uml-aggregation",x21,x55),e);ShapeFactoryGet().addShapeCreator(new ArrowShapeCreator("uml-composition",x23,x55),e);ShapeFactoryGet().addShapeCreator(new ArrowShapeCreator("uml-generalization",x29,x55),e);ShapeFactoryGet().addShapeCreator(new ArrowShapeCreator("uml-dependency",x27,x59),e);ShapeFactoryGet().addShapeCreator(new ArrowShapeCreator("uml-realization",x29,x59),e);var b="UML Class Diagram";ShapeFactoryGet().addShapeCreator(new ClassShapeCreator(),b);ShapeFactoryGet().addShapeCreator(new ClassShapeCreator(true),b);ShapeFactoryGet().addShapeCreator(new PackageShapeCreator(),b);ShapeFactoryGet().addShapeCreator(new NotesCalloutShapeCreator(),b);ShapeFactoryGet().addShapeCreator(new SelfAggregationShapeCreator(),b);ShapeFactoryGet().addShapeCreator(new ArrowShapeCreator("uml-assoc",x26,x55),b);ShapeFactoryGet().addShapeCreator(new ArrowShapeCreator("uml-direct_assoc",x27,x55),b);ShapeFactoryGet().addShapeCreator(new ArrowShapeCreator("uml-aggregation",x21,x55),b);ShapeFactoryGet().addShapeCreator(new ArrowShapeCreator("uml-composition",x23,x55),b);ShapeFactoryGet().addShapeCreator(new ArrowShapeCreator("uml-generalization",x29,x55),b);ShapeFactoryGet().addShapeCreator(new ArrowShapeCreator("uml-dependency",x27,x59),b);ShapeFactoryGet().addShapeCreator(new ArrowShapeCreator("uml-realization",x29,x59),b);var c="UML State Diagram";ShapeFactoryGet().addShapeCreator(new StateShapeCreator(),c);ShapeFactoryGet().addShapeCreator(new StateActivityShapeCreator(),c);ShapeFactoryGet().addShapeCreator(new StateInitialShapeCreator(),c);ShapeFactoryGet().addShapeCreator(new StateEndShapeCreator(),c);ShapeFactoryGet().addShapeCreator(new CompositeStateShapeCreator(),c);ShapeFactoryGet().addShapeCreator(new DiamondShapeCreator("uml-junction"),c);ShapeFactoryGet().addShapeCreator(new CircleShapeCreator("uml-choice"),c);ShapeFactoryGet().addShapeCreator(new SyncHBarShapeCreator(),c);ShapeFactoryGet().addShapeCreator(new SyncVBarShapeCreator(),c);ShapeFactoryGet().addShapeCreator(new TextCalloutShapeCreator(),c);ShapeFactoryGet().addShapeCreator(new NotesCalloutShapeCreator(),c);ShapeFactoryGet().addShapeCreator(new ArrowShapeCreator("uml-line-trans",x27,x55),c);ShapeFactoryGet().addShapeCreator(new StateCurveTransShapeCreator(),c);ShapeFactoryGet().addShapeCreator(new StateHTransShapeCreator(),c);ShapeFactoryGet().addShapeCreator(new StateVTransShapeCreator(),c);ShapeFactoryGet().addShapeCreator(new SegmentsShapeCreator("uml-segments-trans"),c);var d="UML Sequence Diagram";ShapeFactoryGet().addShapeCreator(new ActorShapeCreator(),d);ShapeFactoryGet().addShapeCreator(new ActiveObjectShapeCreator(),d);ShapeFactoryGet().addShapeCreator(new ActivationShapeCreator(),d);ShapeFactoryGet().addShapeCreator(new TextCalloutShapeCreator(),d);ShapeFactoryGet().addShapeCreator(new CallShapeCreator(),d);ShapeFactoryGet().addShapeCreator(new SyncMsgShapeCreator(),d);ShapeFactoryGet().addShapeCreator(new ASyncMsgShapeCreator(),d);ShapeFactoryGet().addShapeCreator(new SelfActivationShapeCreator(),d);ShapeFactoryGet().addShapeCreator(new ActiveObjectKillerShapeCreator(),d);ShapeFactoryGet().addShapeCreator(new LifeLineShapeCreator(),d);ShapeFactoryGet().addShapeCreator(new NotesCalloutShapeCreator(),d);ShapeFactoryGet().addShapeCreator(new RoundCalloutShapeCreator(),d);var a="UML Activity Diagram";ShapeFactoryGet().addShapeCreator(new ActivityShapeCreator(),a);ShapeFactoryGet().addShapeCreator(new ObjectShapeCreator(),a);ShapeFactoryGet().addShapeCreator(new ActivityInitialShapeCreator(),a);ShapeFactoryGet().addShapeCreator(new ActivityFinalShapeCreator(),a);ShapeFactoryGet().addShapeCreator(new SyncHBarShapeCreator(),a);ShapeFactoryGet().addShapeCreator(new SyncVBarShapeCreator(),a);ShapeFactoryGet().addShapeCreator(new BranchShapeCreator(),a);ShapeFactoryGet().addShapeCreator(new HourGlassShapeCreator(),a);ShapeFactoryGet().addShapeCreator(new FlowEndShapeCreator(),a);ShapeFactoryGet().addShapeCreator(new SwinLaneShapeCreator(),a);ShapeFactoryGet().addShapeCreator(new StateCurveTransShapeCreator("uml-curve-flow"),a);ShapeFactoryGet().addShapeCreator(new ArrowShapeCreator("uml-activity-flow",x27,x55),a);ShapeFactoryGet().addShapeCreator(new ArrowShapeCreator("uml-activity-async-flow",x27,x59),a);ShapeFactoryGet().addShapeCreator(new SegmentsShapeCreator("uml-segments-flow"),a);ShapeFactoryGet().addShapeCreator(new SingalReceiptShapeCreator(),a);ShapeFactoryGet().addShapeCreator(new SingalSindingShapeCreator(),a);ShapeFactoryGet().addShapeCreator(new NotesCalloutShapeCreator(),a);ShapeFactoryGet().addShapeCreator(new TextCalloutShapeCreator(),a);ShapeFactoryGet().addDiagramType(e,e);ShapeFactoryGet().addDiagramType(b,b);ShapeFactoryGet().addDiagramType(c,c);ShapeFactoryGet().addDiagramType(d,d);ShapeFactoryGet().addDiagramType(a,a);return}var hadRegisterMath=false;function idrawRegisterMath(){if(hadRegisterMath){return}hadRegisterMath=true;var a="Maths Symbols";ShapeFactoryGet().addShapeCreator(new ExpressionShapeCreator(),a);ShapeFactoryGet().addShapeCreator(new SubcriptShapeCreator(),a);ShapeFactoryGet().addShapeCreator(new SuperscriptShapeCreator(),a);ShapeFactoryGet().addShapeCreator(new DivisionShapeCreator(),a);ShapeFactoryGet().addShapeCreator(new SqrtShapeCreator(),a);ShapeFactoryGet().addShapeCreator(new LBraceShapeCreator(),a);ShapeFactoryGet().addShapeCreator(new RBraceShapeCreator(),a);ShapeFactoryGet().addShapeCreator(new LBracketShapeCreator(),a);ShapeFactoryGet().addShapeCreator(new RBracketShapeCreator(),a);ShapeFactoryGet().addShapeCreator(new LParenthesisShapeCreator(),a);ShapeFactoryGet().addShapeCreator(new RParenthesisShapeCreator(),a);ShapeFactoryGet().addShapeCreator(new MultiplicationShapeCreator(),a);ShapeFactoryGet().addShapeCreator(new SumShapeCreator(),a);ShapeFactoryGet().addShapeCreator(new MathHLineShapeCreator(),a);ShapeFactoryGet().addShapeCreator(new MathVLineShapeCreator(),a);ShapeFactoryGet().addShapeCreator(new IntegralShapeCreator(),a);ShapeFactoryGet().addShapeCreator(new UpRightShapeCreator(),a);ShapeFactoryGet().addShapeCreator(new ReasonShapeCreator(),a);ShapeFactoryGet().addShapeCreator(new ResultShapeCreator(),a);ShapeFactoryGet().addShapeCreator(new ExistShapeCreator(),a);ShapeFactoryGet().addShapeCreator(new UnionShapeCreator(),a);ShapeFactoryGet().addShapeCreator(new IntersectionShapeCreator(),a);ShapeFactoryGet().addShapeCreator(new BelongShapeCreator(),a);ShapeFactoryGet().addShapeCreator(new EllipsisShapeCreator(),a);ShapeFactoryGet().addShapeCreator(new EqualShapeCreator(),a);ShapeFactoryGet().addShapeCreator(new NotEqualShapeCreator(),a);ShapeFactoryGet().addShapeCreator(new LessShapeCreator(),a);ShapeFactoryGet().addShapeCreator(new LessEqualShapeCreator(),a);ShapeFactoryGet().addShapeCreator(new GreateShapeCreator(),a);ShapeFactoryGet().addShapeCreator(new GreateEqualShapeCreator(),a);ShapeFactoryGet().addShapeCreator(new LessLessShapeCreator(),a);ShapeFactoryGet().addShapeCreator(new GreateGreateShapeCreator(),a);ShapeFactoryGet().addShapeCreator(new AlmostEqualShapeCreator(),a);ShapeFactoryGet().addShapeCreator(new InfiniteShapeCreator(),a);ShapeFactoryGet().addShapeCreator(new MathLineShapeCreator(),a);ShapeFactoryGet().addShapeCreator(new NotesCalloutShapeCreator(),a);ShapeFactoryGet().addDiagramType(a,a);return}var hadRegisterChart=false;function idrawRegisterChart(){if(hadRegisterChart){return}hadRegisterChart=true;var a="Chart";ShapeFactoryGet().addShapeCreator(new RectXyChartShapeShapeCreator(),a);ShapeFactoryGet().addShapeCreator(new LineXyChartShapeShapeCreator(),a);ShapeFactoryGet().addShapeCreator(new VLineXyChartShapeShapeCreator(),a);ShapeFactoryGet().addShapeCreator(new DotXyChartShapeShapeCreator(),a);ShapeFactoryGet().addShapeCreator(new FillXyChartShapeShapeCreator(),a);ShapeFactoryGet().addShapeCreator(new TextCalloutShapeCreator(),a);ShapeFactoryGet().addShapeCreator(new NotesCalloutShapeCreator(),a);ShapeFactoryGet().addShapeCreator(new LineShapeCreator(),a);ShapeFactoryGet().addDiagramType(a,a);return}function idrawRegisterAll(){idrawRegisterBasic(true);idrawRegisterUML();idrawRegisterMath();idrawRegisterChart();return}function idrawRegister(a){if(a==="flowchart"){idrawRegisterBasic(true)}else{if(a==="uml"){idrawRegisterUML()}else{if(a==="math"){idrawRegisterMath()}else{if(a==="chart"){idrawRegisterChart()}else{if(a==="eda"){idrawRegisterEda()}else{idrawRegisterAll()}}}}}wtkLog("idrawRegister: category="+a);return}function idrawRegisterBasicForDemo(){if(!gHadRegisterBasic){idrawRegisterBasic(false);ShapeFactoryGet().removeCategoryName(CATEGORY_F_C_D);ShapeFactoryGet().removeCategoryName(CATEGORY_F_C_B)}return}var gDelayScripts=new Array();var gDelayStyles=new Array();function idrawDelayLoadScript(a){gDelayScripts.push(a);return}function idrawDelayLoadStyle(a){gDelayStyles.push(a);return}setTimeout(function(){var c=0;var a=null;var b=null;var d=document.head?document.head:document.body;for(c=0;c<gDelayScripts.length;c++){b=gDelayScripts[c];a=document.createElement("script");a.src=b;d.appendChild(a);wtkLog("Load: "+b)}for(c=0;c<gDelayStyles.length;c++){b=gDelayStyles[c];a=document.createElement("link");a.src=b;d.appendChild(a);wtkLog("Load: "+b)}return},800);function delayLoadScripts(c,a){if(a){idrawSetResHostName(".");idrawDelayLoadScript("http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js");idrawDelayLoadScript("http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.21/jquery-ui.min.js");idrawDelayLoadScript(drawingGetJsURL("help_data.js"))}else{var b=idrawGetLanguage();if(c){idrawSetResHostName(c)}if(b==="zh"||b==="zh-cn"){idrawDelayLoadScript("http://lib.sinaapp.com/js/jquery/1.7.2/jquery.min.js");idrawDelayLoadScript("http://lib.sinaapp.com/js/jquery-ui/1.8.9/jquery-ui.min.js")}else{idrawDelayLoadScript("http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js");idrawDelayLoadScript("http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.21/jquery-ui.min.js")}idrawDelayLoadScript(drawingGetJsURL("help_data.js"));if(browser.versions.webKit){idrawDelayLoadScript(drawingGetJsURL("FileSaver.min.js"))}}return};wtkLog("5idraw.js build at 2012年 10月 04日 星期四 09:18:59 CST ");
